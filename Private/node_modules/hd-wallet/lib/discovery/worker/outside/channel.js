'use strict';

var cov_6jb0hxt84 = function () {
    var path = '/home/g/dev/hd-wallet/src/discovery/worker/outside/channel.js',
        hash = '8848d0fc8441734ce0c727486403b9c6b8a12b34',
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
        path: '/home/g/dev/hd-wallet/src/discovery/worker/outside/channel.js',
        statementMap: {
            '0': {
                start: {
                    line: 24,
                    column: 27
                },
                end: {
                    line: 24,
                    column: 28
                }
            },
            '1': {
                start: {
                    line: 25,
                    column: 10
                },
                end: {
                    line: 25,
                    column: 67
                }
            },
            '2': {
                start: {
                    line: 39,
                    column: 8
                },
                end: {
                    line: 39,
                    column: 37
                }
            },
            '3': {
                start: {
                    line: 40,
                    column: 8
                },
                end: {
                    line: 40,
                    column: 35
                }
            },
            '4': {
                start: {
                    line: 42,
                    column: 8
                },
                end: {
                    line: 55,
                    column: 11
                }
            },
            '5': {
                start: {
                    line: 43,
                    column: 12
                },
                end: {
                    line: 54,
                    column: 15
                }
            },
            '6': {
                start: {
                    line: 44,
                    column: 31
                },
                end: {
                    line: 44,
                    column: 34
                }
            },
            '7': {
                start: {
                    line: 45,
                    column: 31
                },
                end: {
                    line: 45,
                    column: 33
                }
            },
            '8': {
                start: {
                    line: 48,
                    column: 16
                },
                end: {
                    line: 51,
                    column: 18
                }
            },
            '9': {
                start: {
                    line: 49,
                    column: 45
                },
                end: {
                    line: 49,
                    column: 55
                }
            },
            '10': {
                start: {
                    line: 50,
                    column: 20
                },
                end: {
                    line: 50,
                    column: 51
                }
            },
            '11': {
                start: {
                    line: 53,
                    column: 16
                },
                end: {
                    line: 53,
                    column: 42
                }
            },
            '12': {
                start: {
                    line: 57,
                    column: 8
                },
                end: {
                    line: 64,
                    column: 11
                }
            },
            '13': {
                start: {
                    line: 58,
                    column: 12
                },
                end: {
                    line: 60,
                    column: 13
                }
            },
            '14': {
                start: {
                    line: 59,
                    column: 16
                },
                end: {
                    line: 59,
                    column: 51
                }
            },
            '15': {
                start: {
                    line: 61,
                    column: 12
                },
                end: {
                    line: 63,
                    column: 13
                }
            },
            '16': {
                start: {
                    line: 62,
                    column: 16
                },
                end: {
                    line: 62,
                    column: 50
                }
            },
            '17': {
                start: {
                    line: 68,
                    column: 8
                },
                end: {
                    line: 70,
                    column: 11
                }
            },
            '18': {
                start: {
                    line: 69,
                    column: 12
                },
                end: {
                    line: 69,
                    column: 36
                }
            },
            '19': {
                start: {
                    line: 74,
                    column: 8
                },
                end: {
                    line: 95,
                    column: 11
                }
            },
            '20': {
                start: {
                    line: 75,
                    column: 12
                },
                end: {
                    line: 94,
                    column: 15
                }
            },
            '21': {
                start: {
                    line: 76,
                    column: 16
                },
                end: {
                    line: 84,
                    column: 17
                }
            },
            '22': {
                start: {
                    line: 77,
                    column: 20
                },
                end: {
                    line: 77,
                    column: 44
                }
            },
            '23': {
                start: {
                    line: 78,
                    column: 20
                },
                end: {
                    line: 78,
                    column: 29
                }
            },
            '24': {
                start: {
                    line: 79,
                    column: 20
                },
                end: {
                    line: 79,
                    column: 31
                }
            },
            '25': {
                start: {
                    line: 80,
                    column: 20
                },
                end: {
                    line: 83,
                    column: 23
                }
            },
            '26': {
                start: {
                    line: 81,
                    column: 24
                },
                end: {
                    line: 81,
                    column: 45
                }
            },
            '27': {
                start: {
                    line: 82,
                    column: 24
                },
                end: {
                    line: 82,
                    column: 35
                }
            },
            '28': {
                start: {
                    line: 85,
                    column: 16
                },
                end: {
                    line: 93,
                    column: 17
                }
            },
            '29': {
                start: {
                    line: 86,
                    column: 20
                },
                end: {
                    line: 86,
                    column: 42
                }
            },
            '30': {
                start: {
                    line: 87,
                    column: 20
                },
                end: {
                    line: 87,
                    column: 29
                }
            },
            '31': {
                start: {
                    line: 88,
                    column: 20
                },
                end: {
                    line: 88,
                    column: 31
                }
            },
            '32': {
                start: {
                    line: 89,
                    column: 20
                },
                end: {
                    line: 92,
                    column: 23
                }
            },
            '33': {
                start: {
                    line: 90,
                    column: 24
                },
                end: {
                    line: 90,
                    column: 45
                }
            },
            '34': {
                start: {
                    line: 91,
                    column: 24
                },
                end: {
                    line: 91,
                    column: 35
                }
            },
            '35': {
                start: {
                    line: 99,
                    column: 24
                },
                end: {
                    line: 99,
                    column: 56
                }
            },
            '36': {
                start: {
                    line: 101,
                    column: 8
                },
                end: {
                    line: 119,
                    column: 11
                }
            },
            '37': {
                start: {
                    line: 103,
                    column: 43
                },
                end: {
                    line: 106,
                    column: 13
                }
            },
            '38': {
                start: {
                    line: 107,
                    column: 12
                },
                end: {
                    line: 111,
                    column: 15
                }
            },
            '39': {
                start: {
                    line: 113,
                    column: 28
                },
                end: {
                    line: 113,
                    column: 95
                }
            },
            '40': {
                start: {
                    line: 114,
                    column: 12
                },
                end: {
                    line: 118,
                    column: 15
                }
            },
            '41': {
                start: {
                    line: 123,
                    column: 23
                },
                end: {
                    line: 123,
                    column: 54
                }
            },
            '42': {
                start: {
                    line: 125,
                    column: 8
                },
                end: {
                    line: 134,
                    column: 11
                }
            },
            '43': {
                start: {
                    line: 126,
                    column: 12
                },
                end: {
                    line: 133,
                    column: 15
                }
            },
            '44': {
                start: {
                    line: 135,
                    column: 8
                },
                end: {
                    line: 140,
                    column: 11
                }
            },
            '45': {
                start: {
                    line: 136,
                    column: 12
                },
                end: {
                    line: 139,
                    column: 15
                }
            }
        },
        fnMap: {
            '0': {
                name: '(anonymous_0)',
                decl: {
                    start: {
                        line: 34,
                        column: 4
                    },
                    end: {
                        line: 34,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 38,
                        column: 6
                    },
                    end: {
                        line: 65,
                        column: 5
                    }
                },
                line: 38
            },
            '1': {
                name: '(anonymous_1)',
                decl: {
                    start: {
                        line: 42,
                        column: 29
                    },
                    end: {
                        line: 42,
                        column: 30
                    }
                },
                loc: {
                    start: {
                        line: 42,
                        column: 42
                    },
                    end: {
                        line: 55,
                        column: 9
                    }
                },
                line: 42
            },
            '2': {
                name: '(anonymous_2)',
                decl: {
                    start: {
                        line: 43,
                        column: 19
                    },
                    end: {
                        line: 43,
                        column: 20
                    }
                },
                loc: {
                    start: {
                        line: 43,
                        column: 27
                    },
                    end: {
                        line: 54,
                        column: 13
                    }
                },
                line: 43
            },
            '3': {
                name: '(anonymous_3)',
                decl: {
                    start: {
                        line: 48,
                        column: 35
                    },
                    end: {
                        line: 48,
                        column: 36
                    }
                },
                loc: {
                    start: {
                        line: 48,
                        column: 66
                    },
                    end: {
                        line: 51,
                        column: 17
                    }
                },
                line: 48
            },
            '4': {
                name: '(anonymous_4)',
                decl: {
                    start: {
                        line: 57,
                        column: 35
                    },
                    end: {
                        line: 57,
                        column: 36
                    }
                },
                loc: {
                    start: {
                        line: 57,
                        column: 48
                    },
                    end: {
                        line: 64,
                        column: 9
                    }
                },
                line: 57
            },
            '5': {
                name: '(anonymous_5)',
                decl: {
                    start: {
                        line: 67,
                        column: 4
                    },
                    end: {
                        line: 67,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 67,
                        column: 31
                    },
                    end: {
                        line: 71,
                        column: 5
                    }
                },
                line: 67
            },
            '6': {
                name: '(anonymous_6)',
                decl: {
                    start: {
                        line: 68,
                        column: 20
                    },
                    end: {
                        line: 68,
                        column: 21
                    }
                },
                loc: {
                    start: {
                        line: 68,
                        column: 25
                    },
                    end: {
                        line: 70,
                        column: 9
                    }
                },
                line: 68
            },
            '7': {
                name: '(anonymous_7)',
                decl: {
                    start: {
                        line: 73,
                        column: 4
                    },
                    end: {
                        line: 73,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 73,
                        column: 59
                    },
                    end: {
                        line: 96,
                        column: 5
                    }
                },
                line: 73
            },
            '8': {
                name: '(anonymous_8)',
                decl: {
                    start: {
                        line: 74,
                        column: 27
                    },
                    end: {
                        line: 74,
                        column: 28
                    }
                },
                loc: {
                    start: {
                        line: 74,
                        column: 48
                    },
                    end: {
                        line: 95,
                        column: 9
                    }
                },
                line: 74
            },
            '9': {
                name: '(anonymous_9)',
                decl: {
                    start: {
                        line: 75,
                        column: 39
                    },
                    end: {
                        line: 75,
                        column: 40
                    }
                },
                loc: {
                    start: {
                        line: 75,
                        column: 60
                    },
                    end: {
                        line: 94,
                        column: 13
                    }
                },
                line: 75
            },
            '10': {
                name: '(anonymous_10)',
                decl: {
                    start: {
                        line: 80,
                        column: 32
                    },
                    end: {
                        line: 80,
                        column: 33
                    }
                },
                loc: {
                    start: {
                        line: 80,
                        column: 37
                    },
                    end: {
                        line: 83,
                        column: 21
                    }
                },
                line: 80
            },
            '11': {
                name: '(anonymous_11)',
                decl: {
                    start: {
                        line: 89,
                        column: 32
                    },
                    end: {
                        line: 89,
                        column: 33
                    }
                },
                loc: {
                    start: {
                        line: 89,
                        column: 37
                    },
                    end: {
                        line: 92,
                        column: 21
                    }
                },
                line: 89
            },
            '12': {
                name: '(anonymous_12)',
                decl: {
                    start: {
                        line: 98,
                        column: 4
                    },
                    end: {
                        line: 98,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 98,
                        column: 60
                    },
                    end: {
                        line: 120,
                        column: 5
                    }
                },
                line: 98
            },
            '13': {
                name: '(anonymous_13)',
                decl: {
                    start: {
                        line: 101,
                        column: 21
                    },
                    end: {
                        line: 101,
                        column: 22
                    }
                },
                loc: {
                    start: {
                        line: 101,
                        column: 31
                    },
                    end: {
                        line: 112,
                        column: 9
                    }
                },
                line: 101
            },
            '14': {
                name: '(anonymous_14)',
                decl: {
                    start: {
                        line: 112,
                        column: 11
                    },
                    end: {
                        line: 112,
                        column: 12
                    }
                },
                loc: {
                    start: {
                        line: 112,
                        column: 20
                    },
                    end: {
                        line: 119,
                        column: 9
                    }
                },
                line: 112
            },
            '15': {
                name: '(anonymous_15)',
                decl: {
                    start: {
                        line: 122,
                        column: 4
                    },
                    end: {
                        line: 122,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 122,
                        column: 58
                    },
                    end: {
                        line: 141,
                        column: 5
                    }
                },
                line: 122
            },
            '16': {
                name: '(anonymous_16)',
                decl: {
                    start: {
                        line: 125,
                        column: 29
                    },
                    end: {
                        line: 125,
                        column: 30
                    }
                },
                loc: {
                    start: {
                        line: 125,
                        column: 38
                    },
                    end: {
                        line: 134,
                        column: 9
                    }
                },
                line: 125
            },
            '17': {
                name: '(anonymous_17)',
                decl: {
                    start: {
                        line: 135,
                        column: 29
                    },
                    end: {
                        line: 135,
                        column: 30
                    }
                },
                loc: {
                    start: {
                        line: 135,
                        column: 38
                    },
                    end: {
                        line: 140,
                        column: 9
                    }
                },
                line: 135
            }
        },
        branchMap: {
            '0': {
                loc: {
                    start: {
                        line: 58,
                        column: 12
                    },
                    end: {
                        line: 60,
                        column: 13
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 58,
                        column: 12
                    },
                    end: {
                        line: 60,
                        column: 13
                    }
                }, {
                    start: {
                        line: 58,
                        column: 12
                    },
                    end: {
                        line: 60,
                        column: 13
                    }
                }],
                line: 58
            },
            '1': {
                loc: {
                    start: {
                        line: 61,
                        column: 12
                    },
                    end: {
                        line: 63,
                        column: 13
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 61,
                        column: 12
                    },
                    end: {
                        line: 63,
                        column: 13
                    }
                }, {
                    start: {
                        line: 61,
                        column: 12
                    },
                    end: {
                        line: 63,
                        column: 13
                    }
                }],
                line: 61
            },
            '2': {
                loc: {
                    start: {
                        line: 76,
                        column: 16
                    },
                    end: {
                        line: 84,
                        column: 17
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 76,
                        column: 16
                    },
                    end: {
                        line: 84,
                        column: 17
                    }
                }, {
                    start: {
                        line: 76,
                        column: 16
                    },
                    end: {
                        line: 84,
                        column: 17
                    }
                }],
                line: 76
            },
            '3': {
                loc: {
                    start: {
                        line: 85,
                        column: 16
                    },
                    end: {
                        line: 93,
                        column: 17
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 85,
                        column: 16
                    },
                    end: {
                        line: 93,
                        column: 17
                    }
                }, {
                    start: {
                        line: 85,
                        column: 16
                    },
                    end: {
                        line: 93,
                        column: 17
                    }
                }],
                line: 85
            },
            '4': {
                loc: {
                    start: {
                        line: 113,
                        column: 28
                    },
                    end: {
                        line: 113,
                        column: 95
                    }
                },
                type: 'cond-expr',
                locations: [{
                    start: {
                        line: 113,
                        column: 52
                    },
                    end: {
                        line: 113,
                        column: 68
                    }
                }, {
                    start: {
                        line: 113,
                        column: 71
                    },
                    end: {
                        line: 113,
                        column: 95
                    }
                }],
                line: 113
            }
        },
        s: {
            '0': 0,
            '1': 0,
            '2': 0,
            '3': 0,
            '4': 0,
            '5': 0,
            '6': 0,
            '7': 0,
            '8': 0,
            '9': 0,
            '10': 0,
            '11': 0,
            '12': 0,
            '13': 0,
            '14': 0,
            '15': 0,
            '16': 0,
            '17': 0,
            '18': 0,
            '19': 0,
            '20': 0,
            '21': 0,
            '22': 0,
            '23': 0,
            '24': 0,
            '25': 0,
            '26': 0,
            '27': 0,
            '28': 0,
            '29': 0,
            '30': 0,
            '31': 0,
            '32': 0,
            '33': 0,
            '34': 0,
            '35': 0,
            '36': 0,
            '37': 0,
            '38': 0,
            '39': 0,
            '40': 0,
            '41': 0,
            '42': 0,
            '43': 0,
            '44': 0,
            '45': 0
        },
        f: {
            '0': 0,
            '1': 0,
            '2': 0,
            '3': 0,
            '4': 0,
            '5': 0,
            '6': 0,
            '7': 0,
            '8': 0,
            '9': 0,
            '10': 0,
            '11': 0,
            '12': 0,
            '13': 0,
            '14': 0,
            '15': 0,
            '16': 0,
            '17': 0
        },
        b: {
            '0': [0, 0],
            '1': [0, 0],
            '2': [0, 0],
            '3': [0, 0],
            '4': [0, 0]
        },
        _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
        return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
}();

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.WorkerChannel = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _stream = require('../../../utils/stream');

var _queue = require('queue');

var _queue2 = _interopRequireDefault(_queue);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

// will get injected
var CONCURRENT_WORKERS = (cov_6jb0hxt84.s[0]++, 4);
var q = (cov_6jb0hxt84.s[1]++, (0, _queue2.default)({ concurrency: CONCURRENT_WORKERS, autostart: true }));

var WorkerChannel = exports.WorkerChannel = function () {
    function WorkerChannel(f, getPromise, getStream) {
        var _this = this;

        _classCallCheck(this, WorkerChannel);

        this.messageEmitter = new _stream.Emitter();
        cov_6jb0hxt84.f[0]++;
        cov_6jb0hxt84.s[2]++;

        this.getPromise = getPromise;
        cov_6jb0hxt84.s[3]++;
        this.getStream = getStream;

        cov_6jb0hxt84.s[4]++;
        this.w = new Promise(function (resolve) {
            cov_6jb0hxt84.f[1]++;
            cov_6jb0hxt84.s[5]++;

            q.push(function (cb) {
                cov_6jb0hxt84.f[2]++;

                var worker = (cov_6jb0hxt84.s[6]++, f());
                var finish = (cov_6jb0hxt84.s[7]++, cb);

                // $FlowIssue
                cov_6jb0hxt84.s[8]++;
                worker.onmessage = function (event) {
                    cov_6jb0hxt84.f[3]++;

                    var data = (cov_6jb0hxt84.s[9]++, event.data);
                    cov_6jb0hxt84.s[10]++;
                    _this.messageEmitter.emit(data);
                };

                cov_6jb0hxt84.s[11]++;
                resolve({ worker: worker, finish: finish });
            });
        });

        cov_6jb0hxt84.s[12]++;
        this.messageEmitter.attach(function (message) {
            cov_6jb0hxt84.f[4]++;
            cov_6jb0hxt84.s[13]++;

            if (message.type === 'promiseRequest') {
                cov_6jb0hxt84.b[0][0]++;
                cov_6jb0hxt84.s[14]++;

                _this.handlePromiseRequest(message);
            } else {
                cov_6jb0hxt84.b[0][1]++;
            }
            cov_6jb0hxt84.s[15]++;
            if (message.type === 'streamRequest') {
                cov_6jb0hxt84.b[1][0]++;
                cov_6jb0hxt84.s[16]++;

                _this.handleStreamRequest(message);
            } else {
                cov_6jb0hxt84.b[1][1]++;
            }
        });
    }

    _createClass(WorkerChannel, [{
        key: 'postToWorker',
        value: function postToWorker(m) {
            cov_6jb0hxt84.f[5]++;
            cov_6jb0hxt84.s[17]++;

            this.w.then(function (w) {
                cov_6jb0hxt84.f[6]++;
                cov_6jb0hxt84.s[18]++;

                w.worker.postMessage(m);
            });
        }
    }, {
        key: 'resPromise',
        value: function resPromise(onFinish) {
            var _this2 = this;

            cov_6jb0hxt84.f[7]++;
            cov_6jb0hxt84.s[19]++;

            return new Promise(function (resolve, reject) {
                cov_6jb0hxt84.f[8]++;
                cov_6jb0hxt84.s[20]++;

                _this2.messageEmitter.attach(function (message, detach) {
                    cov_6jb0hxt84.f[9]++;
                    cov_6jb0hxt84.s[21]++;

                    if (message.type === 'result') {
                        cov_6jb0hxt84.b[2][0]++;
                        cov_6jb0hxt84.s[22]++;

                        resolve(message.result);
                        cov_6jb0hxt84.s[23]++;
                        detach();
                        cov_6jb0hxt84.s[24]++;
                        onFinish();
                        cov_6jb0hxt84.s[25]++;
                        _this2.w.then(function (w) {
                            cov_6jb0hxt84.f[10]++;
                            cov_6jb0hxt84.s[26]++;

                            w.worker.terminate();
                            cov_6jb0hxt84.s[27]++;
                            w.finish();
                        });
                    } else {
                        cov_6jb0hxt84.b[2][1]++;
                    }
                    cov_6jb0hxt84.s[28]++;
                    if (message.type === 'error') {
                        cov_6jb0hxt84.b[3][0]++;
                        cov_6jb0hxt84.s[29]++;

                        reject(message.error);
                        cov_6jb0hxt84.s[30]++;
                        detach();
                        cov_6jb0hxt84.s[31]++;
                        onFinish();
                        cov_6jb0hxt84.s[32]++;
                        _this2.w.then(function (w) {
                            cov_6jb0hxt84.f[11]++;
                            cov_6jb0hxt84.s[33]++;

                            w.worker.terminate();
                            cov_6jb0hxt84.s[34]++;
                            w.finish();
                        });
                    } else {
                        cov_6jb0hxt84.b[3][1]++;
                    }
                });
            });
        }
    }, {
        key: 'handlePromiseRequest',
        value: function handlePromiseRequest(request) {
            var _this3 = this;

            cov_6jb0hxt84.f[12]++;

            var promise = (cov_6jb0hxt84.s[35]++, this.getPromise(request.request));

            cov_6jb0hxt84.s[36]++;
            promise.then(function (result) {
                cov_6jb0hxt84.f[13]++;

                // $FlowIssue I overload Flow logic a bit here
                var r = (cov_6jb0hxt84.s[37]++, {
                    type: request.request.type,
                    response: result
                });
                cov_6jb0hxt84.s[38]++;
                _this3.postToWorker({
                    type: 'promiseResponseSuccess',
                    id: request.id,
                    response: r
                });
            }, function (error) {
                cov_6jb0hxt84.f[14]++;

                var message = (cov_6jb0hxt84.s[39]++, error.message == null ? (cov_6jb0hxt84.b[4][0]++, error.toString()) : (cov_6jb0hxt84.b[4][1]++, error.message.toString()));
                cov_6jb0hxt84.s[40]++;
                _this3.postToWorker({
                    type: 'promiseResponseFailure',
                    failure: message,
                    id: request.id
                });
            });
        }
    }, {
        key: 'handleStreamRequest',
        value: function handleStreamRequest(request) {
            var _this4 = this;

            cov_6jb0hxt84.f[15]++;

            var stream = (cov_6jb0hxt84.s[41]++, this.getStream(request.request));

            cov_6jb0hxt84.s[42]++;
            stream.values.attach(function (value) {
                cov_6jb0hxt84.f[16]++;
                cov_6jb0hxt84.s[43]++;

                _this4.postToWorker({
                    type: 'streamResponseUpdate',
                    id: request.id,
                    update: {
                        type: request.request.type,
                        response: value
                    }
                });
            });
            cov_6jb0hxt84.s[44]++;
            stream.finish.attach(function (value) {
                cov_6jb0hxt84.f[17]++;
                cov_6jb0hxt84.s[45]++;

                _this4.postToWorker({
                    type: 'streamResponseFinish',
                    id: request.id
                });
            });
        }
    }]);

    return WorkerChannel;
}();