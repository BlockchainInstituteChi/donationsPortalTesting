'use strict';

var cov_23l4oknjv3 = function () {
    var path = '/home/g/dev/hd-wallet/src/discovery/worker/inside/get-chain-transactions.js',
        hash = 'c892cbe5d98ea4a2114a3a3af6d4d815eb9220e6',
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
        path: '/home/g/dev/hd-wallet/src/discovery/worker/inside/get-chain-transactions.js',
        statementMap: {
            '0': {
                start: {
                    line: 64,
                    column: 8
                },
                end: {
                    line: 64,
                    column: 53
                }
            },
            '1': {
                start: {
                    line: 79,
                    column: 22
                },
                end: {
                    line: 79,
                    column: 32
                }
            },
            '2': {
                start: {
                    line: 80,
                    column: 8
                },
                end: {
                    line: 83,
                    column: 10
                }
            },
            '3': {
                start: {
                    line: 128,
                    column: 8
                },
                end: {
                    line: 128,
                    column: 23
                }
            },
            '4': {
                start: {
                    line: 129,
                    column: 8
                },
                end: {
                    line: 129,
                    column: 39
                }
            },
            '5': {
                start: {
                    line: 130,
                    column: 8
                },
                end: {
                    line: 130,
                    column: 59
                }
            },
            '6': {
                start: {
                    line: 131,
                    column: 8
                },
                end: {
                    line: 131,
                    column: 51
                }
            },
            '7': {
                start: {
                    line: 132,
                    column: 8
                },
                end: {
                    line: 132,
                    column: 26
                }
            },
            '8': {
                start: {
                    line: 133,
                    column: 8
                },
                end: {
                    line: 133,
                    column: 27
                }
            },
            '9': {
                start: {
                    line: 134,
                    column: 8
                },
                end: {
                    line: 134,
                    column: 35
                }
            },
            '10': {
                start: {
                    line: 135,
                    column: 8
                },
                end: {
                    line: 135,
                    column: 57
                }
            },
            '11': {
                start: {
                    line: 136,
                    column: 8
                },
                end: {
                    line: 136,
                    column: 41
                }
            },
            '12': {
                start: {
                    line: 137,
                    column: 8
                },
                end: {
                    line: 137,
                    column: 31
                }
            },
            '13': {
                start: {
                    line: 138,
                    column: 8
                },
                end: {
                    line: 138,
                    column: 25
                }
            },
            '14': {
                start: {
                    line: 139,
                    column: 8
                },
                end: {
                    line: 139,
                    column: 29
                }
            },
            '15': {
                start: {
                    line: 140,
                    column: 8
                },
                end: {
                    line: 140,
                    column: 39
                }
            },
            '16': {
                start: {
                    line: 141,
                    column: 8
                },
                end: {
                    line: 143,
                    column: 9
                }
            },
            '17': {
                start: {
                    line: 142,
                    column: 12
                },
                end: {
                    line: 142,
                    column: 152
                }
            },
            '18': {
                start: {
                    line: 149,
                    column: 22
                },
                end: {
                    line: 149,
                    column: 23
                }
            },
            '19': {
                start: {
                    line: 150,
                    column: 21
                },
                end: {
                    line: 150,
                    column: 33
                }
            },
            '20': {
                start: {
                    line: 152,
                    column: 8
                },
                end: {
                    line: 152,
                    column: 46
                }
            },
            '21': {
                start: {
                    line: 153,
                    column: 8
                },
                end: {
                    line: 153,
                    column: 32
                }
            },
            '22': {
                start: {
                    line: 163,
                    column: 50
                },
                end: {
                    line: 163,
                    column: 71
                }
            },
            '23': {
                start: {
                    line: 164,
                    column: 8
                },
                end: {
                    line: 170,
                    column: 9
                }
            },
            '24': {
                start: {
                    line: 165,
                    column: 12
                },
                end: {
                    line: 165,
                    column: 83
                }
            },
            '25': {
                start: {
                    line: 167,
                    column: 12
                },
                end: {
                    line: 169,
                    column: 13
                }
            },
            '26': {
                start: {
                    line: 168,
                    column: 16
                },
                end: {
                    line: 168,
                    column: 61
                }
            },
            '27': {
                start: {
                    line: 172,
                    column: 8
                },
                end: {
                    line: 203,
                    column: 11
                }
            },
            '28': {
                start: {
                    line: 173,
                    column: 27
                },
                end: {
                    line: 181,
                    column: 13
                }
            },
            '29': {
                start: {
                    line: 183,
                    column: 12
                },
                end: {
                    line: 198,
                    column: 15
                }
            },
            '30': {
                start: {
                    line: 184,
                    column: 16
                },
                end: {
                    line: 188,
                    column: 17
                }
            },
            '31': {
                start: {
                    line: 185,
                    column: 20
                },
                end: {
                    line: 185,
                    column: 44
                }
            },
            '32': {
                start: {
                    line: 186,
                    column: 20
                },
                end: {
                    line: 186,
                    column: 37
                }
            },
            '33': {
                start: {
                    line: 187,
                    column: 20
                },
                end: {
                    line: 187,
                    column: 27
                }
            },
            '34': {
                start: {
                    line: 190,
                    column: 30
                },
                end: {
                    line: 190,
                    column: 36
                }
            },
            '35': {
                start: {
                    line: 191,
                    column: 16
                },
                end: {
                    line: 197,
                    column: 17
                }
            },
            '36': {
                start: {
                    line: 192,
                    column: 20
                },
                end: {
                    line: 192,
                    column: 58
                }
            },
            '37': {
                start: {
                    line: 194,
                    column: 20
                },
                end: {
                    line: 194,
                    column: 103
                }
            },
            '38': {
                start: {
                    line: 195,
                    column: 20
                },
                end: {
                    line: 195,
                    column: 37
                }
            },
            '39': {
                start: {
                    line: 196,
                    column: 20
                },
                end: {
                    line: 196,
                    column: 27
                }
            },
            '40': {
                start: {
                    line: 200,
                    column: 12
                },
                end: {
                    line: 202,
                    column: 15
                }
            },
            '41': {
                start: {
                    line: 201,
                    column: 16
                },
                end: {
                    line: 201,
                    column: 40
                }
            },
            '42': {
                start: {
                    line: 212,
                    column: 8
                },
                end: {
                    line: 216,
                    column: 11
                }
            },
            '43': {
                start: {
                    line: 213,
                    column: 12
                },
                end: {
                    line: 213,
                    column: 51
                }
            },
            '44': {
                start: {
                    line: 214,
                    column: 12
                },
                end: {
                    line: 214,
                    column: 58
                }
            },
            '45': {
                start: {
                    line: 215,
                    column: 12
                },
                end: {
                    line: 215,
                    column: 49
                }
            },
            '46': {
                start: {
                    line: 218,
                    column: 8
                },
                end: {
                    line: 283,
                    column: 11
                }
            },
            '47': {
                start: {
                    line: 220,
                    column: 27
                },
                end: {
                    line: 220,
                    column: 91
                }
            },
            '48': {
                start: {
                    line: 221,
                    column: 36
                },
                end: {
                    line: 221,
                    column: 38
                }
            },
            '49': {
                start: {
                    line: 222,
                    column: 12
                },
                end: {
                    line: 269,
                    column: 15
                }
            },
            '50': {
                start: {
                    line: 225,
                    column: 16
                },
                end: {
                    line: 266,
                    column: 17
                }
            },
            '51': {
                start: {
                    line: 226,
                    column: 20
                },
                end: {
                    line: 226,
                    column: 93
                }
            },
            '52': {
                start: {
                    line: 227,
                    column: 20
                },
                end: {
                    line: 229,
                    column: 21
                }
            },
            '53': {
                start: {
                    line: 228,
                    column: 24
                },
                end: {
                    line: 228,
                    column: 67
                }
            },
            '54': {
                start: {
                    line: 231,
                    column: 20
                },
                end: {
                    line: 240,
                    column: 21
                }
            },
            '55': {
                start: {
                    line: 233,
                    column: 24
                },
                end: {
                    line: 239,
                    column: 25
                }
            },
            '56': {
                start: {
                    line: 234,
                    column: 46
                },
                end: {
                    line: 234,
                    column: 70
                }
            },
            '57': {
                start: {
                    line: 236,
                    column: 28
                },
                end: {
                    line: 238,
                    column: 29
                }
            },
            '58': {
                start: {
                    line: 237,
                    column: 32
                },
                end: {
                    line: 237,
                    column: 63
                }
            },
            '59': {
                start: {
                    line: 244,
                    column: 33
                },
                end: {
                    line: 244,
                    column: 78
                }
            },
            '60': {
                start: {
                    line: 246,
                    column: 20
                },
                end: {
                    line: 265,
                    column: 21
                }
            },
            '61': {
                start: {
                    line: 249,
                    column: 39
                },
                end: {
                    line: 249,
                    column: 92
                }
            },
            '62': {
                start: {
                    line: 251,
                    column: 35
                },
                end: {
                    line: 251,
                    column: 37
                }
            },
            '63': {
                start: {
                    line: 253,
                    column: 24
                },
                end: {
                    line: 261,
                    column: 25
                }
            },
            '64': {
                start: {
                    line: 254,
                    column: 28
                },
                end: {
                    line: 260,
                    column: 29
                }
            },
            '65': {
                start: {
                    line: 254,
                    column: 50
                },
                end: {
                    line: 254,
                    column: 69
                }
            },
            '66': {
                start: {
                    line: 255,
                    column: 46
                },
                end: {
                    line: 255,
                    column: 70
                }
            },
            '67': {
                start: {
                    line: 256,
                    column: 32
                },
                end: {
                    line: 256,
                    column: 58
                }
            },
            '68': {
                start: {
                    line: 258,
                    column: 44
                },
                end: {
                    line: 258,
                    column: 73
                }
            },
            '69': {
                start: {
                    line: 259,
                    column: 32
                },
                end: {
                    line: 259,
                    column: 56
                }
            },
            '70': {
                start: {
                    line: 262,
                    column: 24
                },
                end: {
                    line: 262,
                    column: 61
                }
            },
            '71': {
                start: {
                    line: 264,
                    column: 24
                },
                end: {
                    line: 264,
                    column: 44
                }
            },
            '72': {
                start: {
                    line: 268,
                    column: 16
                },
                end: {
                    line: 268,
                    column: 46
                }
            },
            '73': {
                start: {
                    line: 270,
                    column: 43
                },
                end: {
                    line: 278,
                    column: 13
                }
            },
            '74': {
                start: {
                    line: 281,
                    column: 12
                },
                end: {
                    line: 281,
                    column: 45
                }
            },
            '75': {
                start: {
                    line: 282,
                    column: 12
                },
                end: {
                    line: 282,
                    column: 35
                }
            },
            '76': {
                start: {
                    line: 290,
                    column: 8
                },
                end: {
                    line: 290,
                    column: 33
                }
            },
            '77': {
                start: {
                    line: 293,
                    column: 33
                },
                end: {
                    line: 293,
                    column: 62
                }
            },
            '78': {
                start: {
                    line: 294,
                    column: 29
                },
                end: {
                    line: 294,
                    column: 57
                }
            },
            '79': {
                start: {
                    line: 296,
                    column: 12
                },
                end: {
                    line: 298,
                    column: 26
                }
            },
            '80': {
                start: {
                    line: 299,
                    column: 26
                },
                end: {
                    line: 299,
                    column: 47
                }
            },
            '81': {
                start: {
                    line: 302,
                    column: 8
                },
                end: {
                    line: 339,
                    column: 9
                }
            },
            '82': {
                start: {
                    line: 307,
                    column: 12
                },
                end: {
                    line: 332,
                    column: 13
                }
            },
            '83': {
                start: {
                    line: 310,
                    column: 16
                },
                end: {
                    line: 324,
                    column: 17
                }
            },
            '84': {
                start: {
                    line: 312,
                    column: 20
                },
                end: {
                    line: 316,
                    column: 22
                }
            },
            '85': {
                start: {
                    line: 319,
                    column: 20
                },
                end: {
                    line: 323,
                    column: 22
                }
            },
            '86': {
                start: {
                    line: 327,
                    column: 16
                },
                end: {
                    line: 331,
                    column: 18
                }
            },
            '87': {
                start: {
                    line: 335,
                    column: 12
                },
                end: {
                    line: 338,
                    column: 15
                }
            },
            '88': {
                start: {
                    line: 346,
                    column: 16
                },
                end: {
                    line: 346,
                    column: 25
                }
            },
            '89': {
                start: {
                    line: 348,
                    column: 4
                },
                end: {
                    line: 350,
                    column: 7
                }
            },
            '90': {
                start: {
                    line: 349,
                    column: 8
                },
                end: {
                    line: 349,
                    column: 24
                }
            },
            '91': {
                start: {
                    line: 351,
                    column: 4
                },
                end: {
                    line: 351,
                    column: 15
                }
            }
        },
        fnMap: {
            '0': {
                name: '(anonymous_0)',
                decl: {
                    start: {
                        line: 63,
                        column: 4
                    },
                    end: {
                        line: 63,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 63,
                        column: 35
                    },
                    end: {
                        line: 65,
                        column: 5
                    }
                },
                line: 63
            },
            '1': {
                name: '(anonymous_1)',
                decl: {
                    start: {
                        line: 78,
                        column: 4
                    },
                    end: {
                        line: 78,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 78,
                        column: 28
                    },
                    end: {
                        line: 84,
                        column: 5
                    }
                },
                line: 78
            },
            '2': {
                name: '(anonymous_2)',
                decl: {
                    start: {
                        line: 106,
                        column: 4
                    },
                    end: {
                        line: 106,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 127,
                        column: 6
                    },
                    end: {
                        line: 144,
                        column: 5
                    }
                },
                line: 127
            },
            '3': {
                name: '(anonymous_3)',
                decl: {
                    start: {
                        line: 146,
                        column: 4
                    },
                    end: {
                        line: 146,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 146,
                        column: 38
                    },
                    end: {
                        line: 154,
                        column: 5
                    }
                },
                line: 146
            },
            '4': {
                name: '(anonymous_4)',
                decl: {
                    start: {
                        line: 158,
                        column: 4
                    },
                    end: {
                        line: 158,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 162,
                        column: 6
                    },
                    end: {
                        line: 204,
                        column: 5
                    }
                },
                line: 162
            },
            '5': {
                name: '(anonymous_5)',
                decl: {
                    start: {
                        line: 172,
                        column: 24
                    },
                    end: {
                        line: 172,
                        column: 25
                    }
                },
                loc: {
                    start: {
                        line: 172,
                        column: 37
                    },
                    end: {
                        line: 203,
                        column: 9
                    }
                },
                line: 172
            },
            '6': {
                name: '(anonymous_6)',
                decl: {
                    start: {
                        line: 183,
                        column: 33
                    },
                    end: {
                        line: 183,
                        column: 34
                    }
                },
                loc: {
                    start: {
                        line: 183,
                        column: 45
                    },
                    end: {
                        line: 198,
                        column: 13
                    }
                },
                line: 183
            },
            '7': {
                name: '(anonymous_7)',
                decl: {
                    start: {
                        line: 200,
                        column: 33
                    },
                    end: {
                        line: 200,
                        column: 34
                    }
                },
                loc: {
                    start: {
                        line: 200,
                        column: 39
                    },
                    end: {
                        line: 202,
                        column: 13
                    }
                },
                line: 200
            },
            '8': {
                name: '(anonymous_8)',
                decl: {
                    start: {
                        line: 207,
                        column: 4
                    },
                    end: {
                        line: 207,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 210,
                        column: 6
                    },
                    end: {
                        line: 284,
                        column: 5
                    }
                },
                line: 210
            },
            '9': {
                name: '(anonymous_9)',
                decl: {
                    start: {
                        line: 212,
                        column: 32
                    },
                    end: {
                        line: 212,
                        column: 33
                    }
                },
                loc: {
                    start: {
                        line: 212,
                        column: 48
                    },
                    end: {
                        line: 216,
                        column: 9
                    }
                },
                line: 212
            },
            '10': {
                name: '(anonymous_10)',
                decl: {
                    start: {
                        line: 218,
                        column: 35
                    },
                    end: {
                        line: 218,
                        column: 36
                    }
                },
                loc: {
                    start: {
                        line: 218,
                        column: 50
                    },
                    end: {
                        line: 283,
                        column: 9
                    }
                },
                line: 218
            },
            '11': {
                name: '(anonymous_11)',
                decl: {
                    start: {
                        line: 222,
                        column: 32
                    },
                    end: {
                        line: 222,
                        column: 33
                    }
                },
                loc: {
                    start: {
                        line: 222,
                        column: 44
                    },
                    end: {
                        line: 269,
                        column: 13
                    }
                },
                line: 222
            },
            '12': {
                name: '(anonymous_12)',
                decl: {
                    start: {
                        line: 254,
                        column: 45
                    },
                    end: {
                        line: 254,
                        column: 46
                    }
                },
                loc: {
                    start: {
                        line: 254,
                        column: 50
                    },
                    end: {
                        line: 254,
                        column: 69
                    }
                },
                line: 254
            },
            '13': {
                name: '(anonymous_13)',
                decl: {
                    start: {
                        line: 287,
                        column: 4
                    },
                    end: {
                        line: 287,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 289,
                        column: 6
                    },
                    end: {
                        line: 340,
                        column: 5
                    }
                },
                line: 289
            },
            '14': {
                name: 'deriveTxidSet',
                decl: {
                    start: {
                        line: 343,
                        column: 9
                    },
                    end: {
                        line: 343,
                        column: 22
                    }
                },
                loc: {
                    start: {
                        line: 345,
                        column: 15
                    },
                    end: {
                        line: 352,
                        column: 1
                    }
                },
                line: 345
            },
            '15': {
                name: '(anonymous_15)',
                decl: {
                    start: {
                        line: 348,
                        column: 25
                    },
                    end: {
                        line: 348,
                        column: 26
                    }
                },
                loc: {
                    start: {
                        line: 348,
                        column: 30
                    },
                    end: {
                        line: 350,
                        column: 5
                    }
                },
                line: 348
            }
        },
        branchMap: {
            '0': {
                loc: {
                    start: {
                        line: 141,
                        column: 8
                    },
                    end: {
                        line: 143,
                        column: 9
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 141,
                        column: 8
                    },
                    end: {
                        line: 143,
                        column: 9
                    }
                }, {
                    start: {
                        line: 141,
                        column: 8
                    },
                    end: {
                        line: 143,
                        column: 9
                    }
                }],
                line: 141
            },
            '1': {
                loc: {
                    start: {
                        line: 164,
                        column: 8
                    },
                    end: {
                        line: 170,
                        column: 9
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 164,
                        column: 8
                    },
                    end: {
                        line: 170,
                        column: 9
                    }
                }, {
                    start: {
                        line: 164,
                        column: 8
                    },
                    end: {
                        line: 170,
                        column: 9
                    }
                }],
                line: 164
            },
            '2': {
                loc: {
                    start: {
                        line: 167,
                        column: 12
                    },
                    end: {
                        line: 169,
                        column: 13
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 167,
                        column: 12
                    },
                    end: {
                        line: 169,
                        column: 13
                    }
                }, {
                    start: {
                        line: 167,
                        column: 12
                    },
                    end: {
                        line: 169,
                        column: 13
                    }
                }],
                line: 167
            },
            '3': {
                loc: {
                    start: {
                        line: 184,
                        column: 16
                    },
                    end: {
                        line: 188,
                        column: 17
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 184,
                        column: 16
                    },
                    end: {
                        line: 188,
                        column: 17
                    }
                }, {
                    start: {
                        line: 184,
                        column: 16
                    },
                    end: {
                        line: 188,
                        column: 17
                    }
                }],
                line: 184
            },
            '4': {
                loc: {
                    start: {
                        line: 194,
                        column: 36
                    },
                    end: {
                        line: 194,
                        column: 101
                    }
                },
                type: 'binary-expr',
                locations: [{
                    start: {
                        line: 194,
                        column: 36
                    },
                    end: {
                        line: 194,
                        column: 81
                    }
                }, {
                    start: {
                        line: 194,
                        column: 85
                    },
                    end: {
                        line: 194,
                        column: 101
                    }
                }],
                line: 194
            },
            '5': {
                loc: {
                    start: {
                        line: 227,
                        column: 20
                    },
                    end: {
                        line: 229,
                        column: 21
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 227,
                        column: 20
                    },
                    end: {
                        line: 229,
                        column: 21
                    }
                }, {
                    start: {
                        line: 227,
                        column: 20
                    },
                    end: {
                        line: 229,
                        column: 21
                    }
                }],
                line: 227
            },
            '6': {
                loc: {
                    start: {
                        line: 231,
                        column: 20
                    },
                    end: {
                        line: 240,
                        column: 21
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 231,
                        column: 20
                    },
                    end: {
                        line: 240,
                        column: 21
                    }
                }, {
                    start: {
                        line: 231,
                        column: 20
                    },
                    end: {
                        line: 240,
                        column: 21
                    }
                }],
                line: 231
            },
            '7': {
                loc: {
                    start: {
                        line: 233,
                        column: 24
                    },
                    end: {
                        line: 239,
                        column: 25
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 233,
                        column: 24
                    },
                    end: {
                        line: 239,
                        column: 25
                    }
                }, {
                    start: {
                        line: 233,
                        column: 24
                    },
                    end: {
                        line: 239,
                        column: 25
                    }
                }],
                line: 233
            },
            '8': {
                loc: {
                    start: {
                        line: 236,
                        column: 28
                    },
                    end: {
                        line: 238,
                        column: 29
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 236,
                        column: 28
                    },
                    end: {
                        line: 238,
                        column: 29
                    }
                }, {
                    start: {
                        line: 236,
                        column: 28
                    },
                    end: {
                        line: 238,
                        column: 29
                    }
                }],
                line: 236
            },
            '9': {
                loc: {
                    start: {
                        line: 246,
                        column: 20
                    },
                    end: {
                        line: 265,
                        column: 21
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 246,
                        column: 20
                    },
                    end: {
                        line: 265,
                        column: 21
                    }
                }, {
                    start: {
                        line: 246,
                        column: 20
                    },
                    end: {
                        line: 265,
                        column: 21
                    }
                }],
                line: 246
            },
            '10': {
                loc: {
                    start: {
                        line: 253,
                        column: 24
                    },
                    end: {
                        line: 261,
                        column: 25
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 253,
                        column: 24
                    },
                    end: {
                        line: 261,
                        column: 25
                    }
                }, {
                    start: {
                        line: 253,
                        column: 24
                    },
                    end: {
                        line: 261,
                        column: 25
                    }
                }],
                line: 253
            },
            '11': {
                loc: {
                    start: {
                        line: 254,
                        column: 28
                    },
                    end: {
                        line: 260,
                        column: 29
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 254,
                        column: 28
                    },
                    end: {
                        line: 260,
                        column: 29
                    }
                }, {
                    start: {
                        line: 254,
                        column: 28
                    },
                    end: {
                        line: 260,
                        column: 29
                    }
                }],
                line: 254
            },
            '12': {
                loc: {
                    start: {
                        line: 254,
                        column: 50
                    },
                    end: {
                        line: 254,
                        column: 69
                    }
                },
                type: 'binary-expr',
                locations: [{
                    start: {
                        line: 254,
                        column: 50
                    },
                    end: {
                        line: 254,
                        column: 57
                    }
                }, {
                    start: {
                        line: 254,
                        column: 61
                    },
                    end: {
                        line: 254,
                        column: 69
                    }
                }],
                line: 254
            },
            '13': {
                loc: {
                    start: {
                        line: 296,
                        column: 12
                    },
                    end: {
                        line: 298,
                        column: 26
                    }
                },
                type: 'cond-expr',
                locations: [{
                    start: {
                        line: 297,
                        column: 14
                    },
                    end: {
                        line: 297,
                        column: 30
                    }
                }, {
                    start: {
                        line: 298,
                        column: 14
                    },
                    end: {
                        line: 298,
                        column: 26
                    }
                }],
                line: 296
            },
            '14': {
                loc: {
                    start: {
                        line: 302,
                        column: 8
                    },
                    end: {
                        line: 339,
                        column: 9
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 302,
                        column: 8
                    },
                    end: {
                        line: 339,
                        column: 9
                    }
                }, {
                    start: {
                        line: 302,
                        column: 8
                    },
                    end: {
                        line: 339,
                        column: 9
                    }
                }],
                line: 302
            },
            '15': {
                loc: {
                    start: {
                        line: 307,
                        column: 12
                    },
                    end: {
                        line: 332,
                        column: 13
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 307,
                        column: 12
                    },
                    end: {
                        line: 332,
                        column: 13
                    }
                }, {
                    start: {
                        line: 307,
                        column: 12
                    },
                    end: {
                        line: 332,
                        column: 13
                    }
                }],
                line: 307
            },
            '16': {
                loc: {
                    start: {
                        line: 310,
                        column: 16
                    },
                    end: {
                        line: 324,
                        column: 17
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 310,
                        column: 16
                    },
                    end: {
                        line: 324,
                        column: 17
                    }
                }, {
                    start: {
                        line: 310,
                        column: 16
                    },
                    end: {
                        line: 324,
                        column: 17
                    }
                }],
                line: 310
            }
        },
        s: {
            '0': 0,
            '1': 0,
            '2': 0,
            '3': 0,
            '4': 0,
            '5': 0,
            '6': 0,
            '7': 0,
            '8': 0,
            '9': 0,
            '10': 0,
            '11': 0,
            '12': 0,
            '13': 0,
            '14': 0,
            '15': 0,
            '16': 0,
            '17': 0,
            '18': 0,
            '19': 0,
            '20': 0,
            '21': 0,
            '22': 0,
            '23': 0,
            '24': 0,
            '25': 0,
            '26': 0,
            '27': 0,
            '28': 0,
            '29': 0,
            '30': 0,
            '31': 0,
            '32': 0,
            '33': 0,
            '34': 0,
            '35': 0,
            '36': 0,
            '37': 0,
            '38': 0,
            '39': 0,
            '40': 0,
            '41': 0,
            '42': 0,
            '43': 0,
            '44': 0,
            '45': 0,
            '46': 0,
            '47': 0,
            '48': 0,
            '49': 0,
            '50': 0,
            '51': 0,
            '52': 0,
            '53': 0,
            '54': 0,
            '55': 0,
            '56': 0,
            '57': 0,
            '58': 0,
            '59': 0,
            '60': 0,
            '61': 0,
            '62': 0,
            '63': 0,
            '64': 0,
            '65': 0,
            '66': 0,
            '67': 0,
            '68': 0,
            '69': 0,
            '70': 0,
            '71': 0,
            '72': 0,
            '73': 0,
            '74': 0,
            '75': 0,
            '76': 0,
            '77': 0,
            '78': 0,
            '79': 0,
            '80': 0,
            '81': 0,
            '82': 0,
            '83': 0,
            '84': 0,
            '85': 0,
            '86': 0,
            '87': 0,
            '88': 0,
            '89': 0,
            '90': 0,
            '91': 0
        },
        f: {
            '0': 0,
            '1': 0,
            '2': 0,
            '3': 0,
            '4': 0,
            '5': 0,
            '6': 0,
            '7': 0,
            '8': 0,
            '9': 0,
            '10': 0,
            '11': 0,
            '12': 0,
            '13': 0,
            '14': 0,
            '15': 0
        },
        b: {
            '0': [0, 0],
            '1': [0, 0],
            '2': [0, 0],
            '3': [0, 0],
            '4': [0, 0],
            '5': [0, 0],
            '6': [0, 0],
            '7': [0, 0],
            '8': [0, 0],
            '9': [0, 0],
            '10': [0, 0],
            '11': [0, 0],
            '12': [0, 0],
            '13': [0, 0],
            '14': [0, 0],
            '15': [0, 0],
            '16': [0, 0]
        },
        _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
        return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
}();

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.GetChainTransactions = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

// This is what happens INSIDE the worker
// We ask the MAIN to fetch us transactions from the
// blockchain and addresses
// The MAIN thread replies back to the worker, and we work from there
//
//
// It's complicated like this, because
// (1) we want to keep the logic in the worker
// (2) but the worker cannot directly call another worker, and we have all
//      other logic in separate workers for speed purposes
//          we have bitcore socket.io communication in worker, because the http polling is slow
//          we have the address derivation in worker, because it's slow
//  so we have the logic of asking things out from the worker by requests,
//  and the main thread returning things back

var _deferred = require('../../../utils/deferred');

var _stream = require('../../../utils/stream');

var _bitcoinjsLibZcash = require('bitcoinjs-lib-zcash');

var _addressSource = require('../../../address-source');

var _bchaddrjs = require('bchaddrjs');

var _bchaddrjs2 = _interopRequireDefault(_bchaddrjs);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var GetChainTransactions = exports.GetChainTransactions = function () {
    _createClass(GetChainTransactions, [{
        key: 'originalLastSearched',


        // last address that was searched with the previous search


        // a variable that will maybe increase when I see
        // new confirmed address


        // transactions in the range will be saved to this array
        // indexed by hash
        value: function originalLastSearched() {
            cov_23l4oknjv3.f[0]++;
            cov_23l4oknjv3.s[0]++;

            return this.originalLastConfirmed + this.gap;
        }

        // this is deferred promise for result


        // last address that was confirmed with the previous search
        // (constant)


        // path of last address that I searched


        // address -> number map

        // all seen addresses, including the gap addresses

    }, {
        key: 'nullRange',
        value: function nullRange() {
            cov_23l4oknjv3.f[1]++;

            var range = (cov_23l4oknjv3.s[1]++, this.range);
            cov_23l4oknjv3.s[2]++;
            return {
                firstHeight: 0,
                last: range.last
            };
        }

        // will be injected
        // used only if not webassembly

    }]);

    function GetChainTransactions(id, range, originalLastConfirmed, getStream, originalTransactions, oldAddresses, network, xpub, segwit, webassembly, cashAddress, gap) {
        _classCallCheck(this, GetChainTransactions);

        this.allCheckedAddresses = [];
        this.backSearch = {};
        this.newTransactions = {};
        this.lastSearched = -1;
        this.dfd = (0, _deferred.deferred)();
        cov_23l4oknjv3.f[2]++;
        cov_23l4oknjv3.s[3]++;

        this.gap = gap;
        cov_23l4oknjv3.s[4]++;
        this.cashAddress = cashAddress;
        cov_23l4oknjv3.s[5]++;
        this.originalLastConfirmed = originalLastConfirmed;
        cov_23l4oknjv3.s[6]++;
        this.lastConfirmed = originalLastConfirmed;
        cov_23l4oknjv3.s[7]++;
        this.chainId = id;
        cov_23l4oknjv3.s[8]++;
        this.range = range;
        cov_23l4oknjv3.s[9]++;
        this.getStream = getStream;
        cov_23l4oknjv3.s[10]++;
        this.txids = deriveTxidSet(originalTransactions);
        cov_23l4oknjv3.s[11]++;
        this.allAddresses = oldAddresses;
        cov_23l4oknjv3.s[12]++;
        this.network = network;
        cov_23l4oknjv3.s[13]++;
        this.xpub = xpub;
        cov_23l4oknjv3.s[14]++;
        this.segwit = segwit;
        cov_23l4oknjv3.s[15]++;
        this.webassembly = webassembly;
        cov_23l4oknjv3.s[16]++;
        if (!this.webassembly) {
            cov_23l4oknjv3.b[0][0]++;
            cov_23l4oknjv3.s[17]++;

            this.source = new _addressSource.BrowserAddressSource(_bitcoinjsLibZcash.HDNode.fromBase58(this.xpub, this.network).derive(this.chainId), this.network, this.segwit);
        } else {
            cov_23l4oknjv3.b[0][1]++;
        }
    }

    _createClass(GetChainTransactions, [{
        key: 'discover',
        value: function discover() {
            cov_23l4oknjv3.f[3]++;

            // first and last range of addresses for the first search
            // (always 0 - 19)
            var first = (cov_23l4oknjv3.s[18]++, 0);
            var last = (cov_23l4oknjv3.s[19]++, this.gap - 1);

            cov_23l4oknjv3.s[20]++;
            this.iterate(first, last, this.range);
            cov_23l4oknjv3.s[21]++;
            return this.dfd.promise;
        }

        // one "iteration" - meaning, get stream of transactions on one chunk,
        // wait for it to end, and then decide what to do next

    }, {
        key: 'iterate',
        value: function iterate(first, last, // last is inclusive
        range) {
            var _this = this;

            cov_23l4oknjv3.f[4]++;

            var addressesP = (cov_23l4oknjv3.s[22]++, Promise.resolve(null));
            cov_23l4oknjv3.s[23]++;
            if (this.allAddresses.length - 1 >= last) {
                cov_23l4oknjv3.b[1][0]++;
                cov_23l4oknjv3.s[24]++;

                addressesP = Promise.resolve(this.allAddresses.slice(first, last + 1));
            } else {
                cov_23l4oknjv3.b[1][1]++;
                cov_23l4oknjv3.s[25]++;

                if (!this.webassembly) {
                    cov_23l4oknjv3.b[2][0]++;
                    cov_23l4oknjv3.s[26]++;

                    addressesP = this.source.derive(first, last);
                } else {
                    cov_23l4oknjv3.b[2][1]++;
                }
            }

            cov_23l4oknjv3.s[27]++;
            addressesP.then(function (addresses) {
                cov_23l4oknjv3.f[5]++;

                var stream = (cov_23l4oknjv3.s[28]++, _this.getStream(_this.chainId, first, last, range.firstHeight, range.last.height, _this.txids.size, addresses));

                cov_23l4oknjv3.s[29]++;
                stream.values.attach(function (value_) {
                    cov_23l4oknjv3.f[6]++;
                    cov_23l4oknjv3.s[30]++;

                    if (value_ instanceof Error) {
                        cov_23l4oknjv3.b[3][0]++;
                        cov_23l4oknjv3.s[31]++;

                        _this.dfd.reject(value_);
                        cov_23l4oknjv3.s[32]++;
                        stream.dispose();
                        cov_23l4oknjv3.s[33]++;
                        return;
                    } else {
                        cov_23l4oknjv3.b[3][1]++;
                    }

                    var value = (cov_23l4oknjv3.s[34]++, value_);
                    cov_23l4oknjv3.s[35]++;
                    try {
                        cov_23l4oknjv3.s[36]++;

                        _this.handleTransactions(value, first);
                    } catch (error) {
                        cov_23l4oknjv3.s[37]++;

                        _this.dfd.reject((cov_23l4oknjv3.b[4][0]++, 'Error transaction parsing: ' + error.message) || (cov_23l4oknjv3.b[4][1]++, error.toString()));
                        cov_23l4oknjv3.s[38]++;
                        stream.dispose();
                        cov_23l4oknjv3.s[39]++;
                        return;
                    }
                });

                cov_23l4oknjv3.s[40]++;
                stream.finish.attach(function () {
                    cov_23l4oknjv3.f[7]++;
                    cov_23l4oknjv3.s[41]++;

                    _this.handleFinish(last);
                });
            });
        }

        // What to do with transactions?

    }, {
        key: 'handleTransactions',
        value: function handleTransactions(value, first) {
            var _this2 = this;

            cov_23l4oknjv3.f[8]++;
            cov_23l4oknjv3.s[42]++;

            // save the addresses
            value.addresses.forEach(function (address, i) {
                cov_23l4oknjv3.f[9]++;
                cov_23l4oknjv3.s[43]++;

                _this2.allAddresses[i + first] = address;
                cov_23l4oknjv3.s[44]++;
                _this2.allCheckedAddresses[i + first] = address;
                cov_23l4oknjv3.s[45]++;
                _this2.backSearch[address] = i + first;
            });

            cov_23l4oknjv3.s[46]++;
            value.transactions.forEach(function (transaction) {
                cov_23l4oknjv3.f[10]++;

                // parse txs (error in here is handled in iterate)
                var parsed = (cov_23l4oknjv3.s[47]++, _bitcoinjsLibZcash.Transaction.fromHex(transaction.hex, transaction.zcash));
                var outputAddresses = (cov_23l4oknjv3.s[48]++, []);
                cov_23l4oknjv3.s[49]++;
                parsed.outs.forEach(function (output) {
                    cov_23l4oknjv3.f[11]++;

                    var address = void 0;
                    // try-catch, because some outputs don't have addresses
                    cov_23l4oknjv3.s[50]++;
                    try {
                        cov_23l4oknjv3.s[51]++;

                        address = _bitcoinjsLibZcash.address.fromOutputScript(output.script, _this2.network);
                        cov_23l4oknjv3.s[52]++;
                        if (_this2.cashAddress) {
                            cov_23l4oknjv3.b[5][0]++;
                            cov_23l4oknjv3.s[53]++;

                            address = _bchaddrjs2.default.toCashAddress(address);
                        } else {
                            cov_23l4oknjv3.b[5][1]++;
                        }
                        // if mine...
                        cov_23l4oknjv3.s[54]++;
                        if (_this2.backSearch[address] != null) {
                            cov_23l4oknjv3.b[6][0]++;
                            cov_23l4oknjv3.s[55]++;

                            // check if confirmed
                            if (transaction.height != null) {
                                cov_23l4oknjv3.b[7][0]++;

                                var _addressI = (cov_23l4oknjv3.s[56]++, _this2.backSearch[address]);
                                // if it's mine and confirmed, bump lastConfirmed
                                cov_23l4oknjv3.s[57]++;
                                if (_addressI > _this2.lastConfirmed) {
                                    cov_23l4oknjv3.b[8][0]++;
                                    cov_23l4oknjv3.s[58]++;

                                    _this2.lastConfirmed = _addressI;
                                } else {
                                    cov_23l4oknjv3.b[8][1]++;
                                }
                            } else {
                                cov_23l4oknjv3.b[7][1]++;
                            }
                        } else {
                            cov_23l4oknjv3.b[6][1]++;
                        }
                    } catch (e) {
                        // TODO add to flowdef
                        // $FlowIssue
                        var type = (cov_23l4oknjv3.s[59]++, _bitcoinjsLibZcash.script.classifyOutput(output.script));

                        cov_23l4oknjv3.s[60]++;
                        if (type === 'nulldata') {
                            cov_23l4oknjv3.b[9][0]++;

                            // TODO add to flowdef
                            // $FlowIssue
                            var buffer = (cov_23l4oknjv3.s[61]++, _bitcoinjsLibZcash.script.nullData.output.decode(output.script));

                            var text = (cov_23l4oknjv3.s[62]++, '');

                            cov_23l4oknjv3.s[63]++;
                            if (buffer !== 0) {
                                cov_23l4oknjv3.b[10][0]++;
                                cov_23l4oknjv3.s[64]++;

                                if (buffer.every(function (i) {
                                    cov_23l4oknjv3.f[12]++;
                                    cov_23l4oknjv3.s[65]++;
                                    return (cov_23l4oknjv3.b[12][0]++, i >= 32) && (cov_23l4oknjv3.b[12][1]++, i <= 126);
                                })) {
                                    cov_23l4oknjv3.b[11][0]++;

                                    var ascii = (cov_23l4oknjv3.s[66]++, buffer.toString('ascii'));
                                    cov_23l4oknjv3.s[67]++;
                                    text = ascii.slice(0, 40);
                                } else {
                                    cov_23l4oknjv3.b[11][1]++;

                                    var hex = (cov_23l4oknjv3.s[68]++, '0x' + buffer.toString('hex'));
                                    cov_23l4oknjv3.s[69]++;
                                    text = hex.slice(0, 40);
                                }
                            } else {
                                cov_23l4oknjv3.b[10][1]++;
                            }
                            cov_23l4oknjv3.s[70]++;
                            address = 'OP_RETURN (' + text + ')';
                        } else {
                            cov_23l4oknjv3.b[9][1]++;
                            cov_23l4oknjv3.s[71]++;

                            address = 'UNKNOWN';
                        }
                    }

                    cov_23l4oknjv3.s[72]++;
                    outputAddresses.push(address);
                });
                var c = (cov_23l4oknjv3.s[73]++, {
                    tx: parsed,
                    outputAddresses: outputAddresses,
                    height: transaction.height,
                    timestamp: transaction.timestamp,
                    hash: transaction.hash,
                    vsize: transaction.vsize,
                    inputAddresses: transaction.inputAddresses
                });

                // more transactions with the same ID overwrite each other
                cov_23l4oknjv3.s[74]++;
                _this2.newTransactions[c.hash] = c;
                cov_23l4oknjv3.s[75]++;
                _this2.txids.add(c.hash);
            });
        }

        // when stream finishes, we have to decide if we want try more addresses or not

    }, {
        key: 'handleFinish',
        value: function handleFinish(last) {
            cov_23l4oknjv3.f[13]++;
            cov_23l4oknjv3.s[76]++;

            this.lastSearched = last;

            // look at which is the next thing we want
            var shouldSearchLast = (cov_23l4oknjv3.s[77]++, this.lastConfirmed + this.gap);
            var nextChunkEnd = (cov_23l4oknjv3.s[78]++, this.lastSearched + this.gap);
            var nextLast = (cov_23l4oknjv3.s[79]++, shouldSearchLast < nextChunkEnd ? (cov_23l4oknjv3.b[13][0]++, shouldSearchLast) : (cov_23l4oknjv3.b[13][1]++, nextChunkEnd));
            var nextFirst = (cov_23l4oknjv3.s[80]++, this.lastSearched + 1);

            // Is there something to search?
            cov_23l4oknjv3.s[81]++;
            if (nextLast >= nextFirst) {
                cov_23l4oknjv3.b[14][0]++;
                cov_23l4oknjv3.s[82]++;

                // on completely new addresses, we look from block 0
                // so we don't miss transactions

                // are there some new addresses?
                if (nextLast > this.originalLastSearched()) {
                    cov_23l4oknjv3.b[15][0]++;
                    cov_23l4oknjv3.s[83]++;

                    // "break" into two parts, one part only new addresses,
                    // other part only old addresses
                    if (nextFirst >= this.originalLastSearched() + 1) {
                        cov_23l4oknjv3.b[16][0]++;
                        cov_23l4oknjv3.s[84]++;

                        // new addresses, all blocks
                        this.iterate(nextFirst, nextLast, this.nullRange());
                    } else {
                        cov_23l4oknjv3.b[16][1]++;
                        cov_23l4oknjv3.s[85]++;

                        // old addresses, new blocks
                        this.iterate(nextFirst, this.originalLastSearched(), this.range);
                    }
                } else {
                    cov_23l4oknjv3.b[15][1]++;
                    cov_23l4oknjv3.s[86]++;

                    // old addresses, new blocks
                    this.iterate(nextFirst, nextLast, this.range);
                }
            } else {
                cov_23l4oknjv3.b[14][1]++;
                cov_23l4oknjv3.s[87]++;

                // nothing more to look for, return
                this.dfd.resolve({
                    newTransactions: this.newTransactions,
                    allAddresses: this.allAddresses
                });
            }
        }
    }]);

    return GetChainTransactions;
}();

function deriveTxidSet(transactions) {
    cov_23l4oknjv3.f[14]++;

    var res = (cov_23l4oknjv3.s[88]++, new Set());

    cov_23l4oknjv3.s[89]++;
    transactions.forEach(function (t) {
        cov_23l4oknjv3.f[15]++;
        cov_23l4oknjv3.s[90]++;

        res.add(t.hash);
    });
    cov_23l4oknjv3.s[91]++;
    return res;
}