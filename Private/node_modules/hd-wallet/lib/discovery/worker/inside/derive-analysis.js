'use strict';

var cov_1fqw934kkq = function () {
    var path = '/home/g/dev/hd-wallet/src/discovery/worker/inside/derive-analysis.js',
        hash = '5498c4f6b5fec18879b12814d6cb5cd77172ce80',
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
        path: '/home/g/dev/hd-wallet/src/discovery/worker/inside/derive-analysis.js',
        statementMap: {
            '0': {
                start: {
                    line: 53,
                    column: 31
                },
                end: {
                    line: 56,
                    column: 5
                }
            },
            '1': {
                start: {
                    line: 60,
                    column: 21
                },
                end: {
                    line: 67,
                    column: 5
                }
            },
            '2': {
                start: {
                    line: 70,
                    column: 25
                },
                end: {
                    line: 70,
                    column: 49
                }
            },
            '3': {
                start: {
                    line: 71,
                    column: 4
                },
                end: {
                    line: 71,
                    column: 24
                }
            },
            '4': {
                start: {
                    line: 84,
                    column: 24
                },
                end: {
                    line: 84,
                    column: 26
                }
            },
            '5': {
                start: {
                    line: 85,
                    column: 8
                },
                end: {
                    line: 87,
                    column: 11
                }
            },
            '6': {
                start: {
                    line: 86,
                    column: 12
                },
                end: {
                    line: 86,
                    column: 60
                }
            },
            '7': {
                start: {
                    line: 88,
                    column: 21
                },
                end: {
                    line: 88,
                    column: 27
                }
            },
            '8': {
                start: {
                    line: 89,
                    column: 8
                },
                end: {
                    line: 89,
                    column: 31
                }
            },
            '9': {
                start: {
                    line: 97,
                    column: 24
                },
                end: {
                    line: 97,
                    column: 26
                }
            },
            '10': {
                start: {
                    line: 98,
                    column: 8
                },
                end: {
                    line: 102,
                    column: 9
                }
            },
            '11': {
                start: {
                    line: 99,
                    column: 27
                },
                end: {
                    line: 99,
                    column: 39
                }
            },
            '12': {
                start: {
                    line: 100,
                    column: 28
                },
                end: {
                    line: 100,
                    column: 48
                }
            },
            '13': {
                start: {
                    line: 101,
                    column: 12
                },
                end: {
                    line: 101,
                    column: 57
                }
            },
            '14': {
                start: {
                    line: 103,
                    column: 21
                },
                end: {
                    line: 103,
                    column: 27
                }
            },
            '15': {
                start: {
                    line: 104,
                    column: 8
                },
                end: {
                    line: 104,
                    column: 31
                }
            },
            '16': {
                start: {
                    line: 107,
                    column: 16
                },
                end: {
                    line: 107,
                    column: 18
                }
            },
            '17': {
                start: {
                    line: 108,
                    column: 23
                },
                end: {
                    line: 108,
                    column: 84
                }
            },
            '18': {
                start: {
                    line: 108,
                    column: 52
                },
                end: {
                    line: 108,
                    column: 83
                }
            },
            '19': {
                start: {
                    line: 109,
                    column: 23
                },
                end: {
                    line: 109,
                    column: 70
                }
            },
            '20': {
                start: {
                    line: 109,
                    column: 38
                },
                end: {
                    line: 109,
                    column: 69
                }
            },
            '21': {
                start: {
                    line: 113,
                    column: 4
                },
                end: {
                    line: 115,
                    column: 7
                }
            },
            '22': {
                start: {
                    line: 114,
                    column: 8
                },
                end: {
                    line: 114,
                    column: 28
                }
            },
            '23': {
                start: {
                    line: 116,
                    column: 4
                },
                end: {
                    line: 116,
                    column: 15
                }
            },
            '24': {
                start: {
                    line: 127,
                    column: 16
                },
                end: {
                    line: 127,
                    column: 18
                }
            },
            '25': {
                start: {
                    line: 129,
                    column: 4
                },
                end: {
                    line: 131,
                    column: 7
                }
            },
            '26': {
                start: {
                    line: 130,
                    column: 8
                },
                end: {
                    line: 130,
                    column: 24
                }
            },
            '27': {
                start: {
                    line: 132,
                    column: 4
                },
                end: {
                    line: 134,
                    column: 7
                }
            },
            '28': {
                start: {
                    line: 133,
                    column: 8
                },
                end: {
                    line: 133,
                    column: 97
                }
            },
            '29': {
                start: {
                    line: 135,
                    column: 4
                },
                end: {
                    line: 135,
                    column: 15
                }
            },
            '30': {
                start: {
                    line: 146,
                    column: 21
                },
                end: {
                    line: 148,
                    column: 5
                }
            },
            '31': {
                start: {
                    line: 147,
                    column: 9
                },
                end: {
                    line: 147,
                    column: 52
                }
            },
            '32': {
                start: {
                    line: 149,
                    column: 26
                },
                end: {
                    line: 149,
                    column: 52
                }
            },
            '33': {
                start: {
                    line: 151,
                    column: 23
                },
                end: {
                    line: 151,
                    column: 88
                }
            },
            '34': {
                start: {
                    line: 151,
                    column: 44
                },
                end: {
                    line: 151,
                    column: 87
                }
            },
            '35': {
                start: {
                    line: 153,
                    column: 17
                },
                end: {
                    line: 153,
                    column: 23
                }
            },
            '36': {
                start: {
                    line: 156,
                    column: 20
                },
                end: {
                    line: 162,
                    column: 5
                }
            },
            '37': {
                start: {
                    line: 163,
                    column: 18
                },
                end: {
                    line: 163,
                    column: 62
                }
            },
            '38': {
                start: {
                    line: 165,
                    column: 26
                },
                end: {
                    line: 165,
                    column: 89
                }
            },
            '39': {
                start: {
                    line: 167,
                    column: 4
                },
                end: {
                    line: 177,
                    column: 6
                }
            },
            '40': {
                start: {
                    line: 189,
                    column: 28
                },
                end: {
                    line: 189,
                    column: 39
                }
            },
            '41': {
                start: {
                    line: 190,
                    column: 27
                },
                end: {
                    line: 190,
                    column: 60
                }
            },
            '42': {
                start: {
                    line: 192,
                    column: 18
                },
                end: {
                    line: 192,
                    column: 19
                }
            },
            '43': {
                start: {
                    line: 193,
                    column: 17
                },
                end: {
                    line: 193,
                    column: 18
                }
            },
            '44': {
                start: {
                    line: 194,
                    column: 16
                },
                end: {
                    line: 194,
                    column: 17
                }
            },
            '45': {
                start: {
                    line: 198,
                    column: 8
                },
                end: {
                    line: 198,
                    column: 84
                }
            },
            '46': {
                start: {
                    line: 202,
                    column: 8
                },
                end: {
                    line: 202,
                    column: 84
                }
            },
            '47': {
                start: {
                    line: 206,
                    column: 8
                },
                end: {
                    line: 206,
                    column: 55
                }
            },
            '48': {
                start: {
                    line: 210,
                    column: 8
                },
                end: {
                    line: 210,
                    column: 28
                }
            },
            '49': {
                start: {
                    line: 218,
                    column: 4
                },
                end: {
                    line: 229,
                    column: 7
                }
            },
            '50': {
                start: {
                    line: 219,
                    column: 21
                },
                end: {
                    line: 219,
                    column: 32
                }
            },
            '51': {
                start: {
                    line: 220,
                    column: 8
                },
                end: {
                    line: 228,
                    column: 9
                }
            },
            '52': {
                start: {
                    line: 221,
                    column: 27
                },
                end: {
                    line: 221,
                    column: 38
                }
            },
            '53': {
                start: {
                    line: 222,
                    column: 12
                },
                end: {
                    line: 227,
                    column: 13
                }
            },
            '54': {
                start: {
                    line: 223,
                    column: 16
                },
                end: {
                    line: 226,
                    column: 17
                }
            },
            '55': {
                start: {
                    line: 224,
                    column: 20
                },
                end: {
                    line: 224,
                    column: 42
                }
            },
            '56': {
                start: {
                    line: 225,
                    column: 20
                },
                end: {
                    line: 225,
                    column: 29
                }
            },
            '57': {
                start: {
                    line: 231,
                    column: 49
                },
                end: {
                    line: 231,
                    column: 51
                }
            },
            '58': {
                start: {
                    line: 237,
                    column: 4
                },
                end: {
                    line: 243,
                    column: 7
                }
            },
            '59': {
                start: {
                    line: 238,
                    column: 8
                },
                end: {
                    line: 242,
                    column: 9
                }
            },
            '60': {
                start: {
                    line: 239,
                    column: 12
                },
                end: {
                    line: 239,
                    column: 34
                }
            },
            '61': {
                start: {
                    line: 240,
                    column: 12
                },
                end: {
                    line: 240,
                    column: 22
                }
            },
            '62': {
                start: {
                    line: 241,
                    column: 12
                },
                end: {
                    line: 241,
                    column: 77
                }
            },
            '63': {
                start: {
                    line: 245,
                    column: 37
                },
                end: {
                    line: 245,
                    column: 39
                }
            },
            '64': {
                start: {
                    line: 248,
                    column: 20
                },
                end: {
                    line: 248,
                    column: 22
                }
            },
            '65': {
                start: {
                    line: 249,
                    column: 8
                },
                end: {
                    line: 254,
                    column: 11
                }
            },
            '66': {
                start: {
                    line: 250,
                    column: 37
                },
                end: {
                    line: 250,
                    column: 41
                }
            },
            '67': {
                start: {
                    line: 251,
                    column: 12
                },
                end: {
                    line: 253,
                    column: 13
                }
            },
            '68': {
                start: {
                    line: 252,
                    column: 16
                },
                end: {
                    line: 252,
                    column: 46
                }
            },
            '69': {
                start: {
                    line: 255,
                    column: 8
                },
                end: {
                    line: 255,
                    column: 19
                }
            },
            '70': {
                start: {
                    line: 260,
                    column: 22
                },
                end: {
                    line: 260,
                    column: 37
                }
            },
            '71': {
                start: {
                    line: 261,
                    column: 23
                },
                end: {
                    line: 261,
                    column: 44
                }
            },
            '72': {
                start: {
                    line: 266,
                    column: 4
                },
                end: {
                    line: 281,
                    column: 5
                }
            },
            '73': {
                start: {
                    line: 268,
                    column: 8
                },
                end: {
                    line: 268,
                    column: 22
                }
            },
            '74': {
                start: {
                    line: 269,
                    column: 8
                },
                end: {
                    line: 269,
                    column: 21
                }
            },
            '75': {
                start: {
                    line: 270,
                    column: 11
                },
                end: {
                    line: 281,
                    column: 5
                }
            },
            '76': {
                start: {
                    line: 272,
                    column: 8
                },
                end: {
                    line: 272,
                    column: 22
                }
            },
            '77': {
                start: {
                    line: 273,
                    column: 8
                },
                end: {
                    line: 273,
                    column: 64
                }
            },
            '78': {
                start: {
                    line: 273,
                    column: 43
                },
                end: {
                    line: 273,
                    column: 62
                }
            },
            '79': {
                start: {
                    line: 274,
                    column: 8
                },
                end: {
                    line: 276,
                    column: 9
                }
            },
            '80': {
                start: {
                    line: 275,
                    column: 12
                },
                end: {
                    line: 275,
                    column: 68
                }
            },
            '81': {
                start: {
                    line: 275,
                    column: 47
                },
                end: {
                    line: 275,
                    column: 66
                }
            },
            '82': {
                start: {
                    line: 279,
                    column: 8
                },
                end: {
                    line: 279,
                    column: 22
                }
            },
            '83': {
                start: {
                    line: 280,
                    column: 8
                },
                end: {
                    line: 280,
                    column: 61
                }
            },
            '84': {
                start: {
                    line: 280,
                    column: 43
                },
                end: {
                    line: 280,
                    column: 59
                }
            },
            '85': {
                start: {
                    line: 286,
                    column: 4
                },
                end: {
                    line: 286,
                    column: 45
                }
            },
            '86': {
                start: {
                    line: 293,
                    column: 27
                },
                end: {
                    line: 293,
                    column: 78
                }
            },
            '87': {
                start: {
                    line: 295,
                    column: 15
                },
                end: {
                    line: 295,
                    column: 19
                }
            },
            '88': {
                start: {
                    line: 296,
                    column: 20
                },
                end: {
                    line: 306,
                    column: 6
                }
            },
            '89': {
                start: {
                    line: 298,
                    column: 12
                },
                end: {
                    line: 300,
                    column: 28
                }
            },
            '90': {
                start: {
                    line: 301,
                    column: 8
                },
                end: {
                    line: 304,
                    column: 10
                }
            },
            '91': {
                start: {
                    line: 305,
                    column: 8
                },
                end: {
                    line: 305,
                    column: 20
                }
            },
            '92': {
                start: {
                    line: 307,
                    column: 4
                },
                end: {
                    line: 307,
                    column: 29
                }
            },
            '93': {
                start: {
                    line: 310,
                    column: 24
                },
                end: {
                    line: 310,
                    column: 48
                }
            },
            '94': {
                start: {
                    line: 316,
                    column: 16
                },
                end: {
                    line: 316,
                    column: 54
                }
            },
            '95': {
                start: {
                    line: 317,
                    column: 16
                },
                end: {
                    line: 317,
                    column: 54
                }
            },
            '96': {
                start: {
                    line: 318,
                    column: 17
                },
                end: {
                    line: 318,
                    column: 31
                }
            },
            '97': {
                start: {
                    line: 319,
                    column: 4
                },
                end: {
                    line: 321,
                    column: 5
                }
            },
            '98': {
                start: {
                    line: 320,
                    column: 8
                },
                end: {
                    line: 320,
                    column: 20
                }
            },
            '99': {
                start: {
                    line: 322,
                    column: 19
                },
                end: {
                    line: 322,
                    column: 84
                }
            },
            '100': {
                start: {
                    line: 323,
                    column: 4
                },
                end: {
                    line: 325,
                    column: 5
                }
            },
            '101': {
                start: {
                    line: 324,
                    column: 8
                },
                end: {
                    line: 324,
                    column: 21
                }
            },
            '102': {
                start: {
                    line: 328,
                    column: 18
                },
                end: {
                    line: 328,
                    column: 24
                }
            },
            '103': {
                start: {
                    line: 329,
                    column: 18
                },
                end: {
                    line: 329,
                    column: 24
                }
            },
            '104': {
                start: {
                    line: 330,
                    column: 4
                },
                end: {
                    line: 334,
                    column: 5
                }
            },
            '105': {
                start: {
                    line: 331,
                    column: 8
                },
                end: {
                    line: 331,
                    column: 18
                }
            },
            '106': {
                start: {
                    line: 333,
                    column: 8
                },
                end: {
                    line: 333,
                    column: 17
                }
            }
        },
        fnMap: {
            '0': {
                name: 'deriveAnalysis',
                decl: {
                    start: {
                        line: 43,
                        column: 16
                    },
                    end: {
                        line: 43,
                        column: 30
                    }
                },
                loc: {
                    start: {
                        line: 49,
                        column: 2
                    },
                    end: {
                        line: 72,
                        column: 1
                    }
                },
                line: 49
            },
            '1': {
                name: 'deriveOutputsForAnalysisMap',
                decl: {
                    start: {
                        line: 75,
                        column: 9
                    },
                    end: {
                        line: 75,
                        column: 36
                    }
                },
                loc: {
                    start: {
                        line: 78,
                        column: 25
                    },
                    end: {
                        line: 117,
                        column: 1
                    }
                },
                line: 78
            },
            '2': {
                name: 'getOutputsFromOldTransaction',
                decl: {
                    start: {
                        line: 80,
                        column: 13
                    },
                    end: {
                        line: 80,
                        column: 41
                    }
                },
                loc: {
                    start: {
                        line: 83,
                        column: 6
                    },
                    end: {
                        line: 90,
                        column: 5
                    }
                },
                line: 83
            },
            '3': {
                name: '(anonymous_3)',
                decl: {
                    start: {
                        line: 85,
                        column: 41
                    },
                    end: {
                        line: 85,
                        column: 42
                    }
                },
                loc: {
                    start: {
                        line: 85,
                        column: 46
                    },
                    end: {
                        line: 87,
                        column: 9
                    }
                },
                line: 85
            },
            '4': {
                name: 'getOutputsFromNewTransaction',
                decl: {
                    start: {
                        line: 93,
                        column: 13
                    },
                    end: {
                        line: 93,
                        column: 41
                    }
                },
                loc: {
                    start: {
                        line: 96,
                        column: 6
                    },
                    end: {
                        line: 105,
                        column: 5
                    }
                },
                line: 96
            },
            '5': {
                name: '(anonymous_5)',
                decl: {
                    start: {
                        line: 108,
                        column: 47
                    },
                    end: {
                        line: 108,
                        column: 48
                    }
                },
                loc: {
                    start: {
                        line: 108,
                        column: 52
                    },
                    end: {
                        line: 108,
                        column: 83
                    }
                },
                line: 108
            },
            '6': {
                name: '(anonymous_6)',
                decl: {
                    start: {
                        line: 109,
                        column: 33
                    },
                    end: {
                        line: 109,
                        column: 34
                    }
                },
                loc: {
                    start: {
                        line: 109,
                        column: 38
                    },
                    end: {
                        line: 109,
                        column: 69
                    }
                },
                line: 109
            },
            '7': {
                name: '(anonymous_7)',
                decl: {
                    start: {
                        line: 113,
                        column: 42
                    },
                    end: {
                        line: 113,
                        column: 43
                    }
                },
                loc: {
                    start: {
                        line: 113,
                        column: 63
                    },
                    end: {
                        line: 115,
                        column: 5
                    }
                },
                line: 113
            },
            '8': {
                name: 'deriveBalancelessAnalysisMap',
                decl: {
                    start: {
                        line: 119,
                        column: 9
                    },
                    end: {
                        line: 119,
                        column: 37
                    }
                },
                loc: {
                    start: {
                        line: 126,
                        column: 46
                    },
                    end: {
                        line: 136,
                        column: 1
                    }
                },
                line: 126
            },
            '9': {
                name: '(anonymous_9)',
                decl: {
                    start: {
                        line: 129,
                        column: 18
                    },
                    end: {
                        line: 129,
                        column: 19
                    }
                },
                loc: {
                    start: {
                        line: 129,
                        column: 23
                    },
                    end: {
                        line: 131,
                        column: 5
                    }
                },
                line: 129
            },
            '10': {
                name: '(anonymous_10)',
                decl: {
                    start: {
                        line: 132,
                        column: 31
                    },
                    end: {
                        line: 132,
                        column: 32
                    }
                },
                loc: {
                    start: {
                        line: 132,
                        column: 37
                    },
                    end: {
                        line: 134,
                        column: 5
                    }
                },
                line: 132
            },
            '11': {
                name: 'analyzeTransaction',
                decl: {
                    start: {
                        line: 139,
                        column: 9
                    },
                    end: {
                        line: 139,
                        column: 27
                    }
                },
                loc: {
                    start: {
                        line: 145,
                        column: 30
                    },
                    end: {
                        line: 178,
                        column: 1
                    }
                },
                line: 145
            },
            '12': {
                name: '(anonymous_12)',
                decl: {
                    start: {
                        line: 146,
                        column: 34
                    },
                    end: {
                        line: 146,
                        column: 35
                    }
                },
                loc: {
                    start: {
                        line: 147,
                        column: 9
                    },
                    end: {
                        line: 147,
                        column: 52
                    }
                },
                line: 147
            },
            '13': {
                name: '(anonymous_13)',
                decl: {
                    start: {
                        line: 151,
                        column: 37
                    },
                    end: {
                        line: 151,
                        column: 38
                    }
                },
                loc: {
                    start: {
                        line: 151,
                        column: 44
                    },
                    end: {
                        line: 151,
                        column: 87
                    }
                },
                line: 151
            },
            '14': {
                name: 'getTargetsFromTransaction',
                decl: {
                    start: {
                        line: 180,
                        column: 9
                    },
                    end: {
                        line: 180,
                        column: 34
                    }
                },
                loc: {
                    start: {
                        line: 186,
                        column: 15
                    },
                    end: {
                        line: 287,
                        column: 1
                    }
                },
                line: 186
            },
            '15': {
                name: 'isExternal',
                decl: {
                    start: {
                        line: 197,
                        column: 13
                    },
                    end: {
                        line: 197,
                        column: 23
                    }
                },
                loc: {
                    start: {
                        line: 197,
                        column: 45
                    },
                    end: {
                        line: 199,
                        column: 5
                    }
                },
                line: 197
            },
            '16': {
                name: 'isInternal',
                decl: {
                    start: {
                        line: 201,
                        column: 13
                    },
                    end: {
                        line: 201,
                        column: 23
                    }
                },
                loc: {
                    start: {
                        line: 201,
                        column: 45
                    },
                    end: {
                        line: 203,
                        column: 5
                    }
                },
                line: 201
            },
            '17': {
                name: 'isCredit',
                decl: {
                    start: {
                        line: 205,
                        column: 13
                    },
                    end: {
                        line: 205,
                        column: 21
                    }
                },
                loc: {
                    start: {
                        line: 205,
                        column: 43
                    },
                    end: {
                        line: 207,
                        column: 5
                    }
                },
                line: 205
            },
            '18': {
                name: 'isDebit',
                decl: {
                    start: {
                        line: 209,
                        column: 13
                    },
                    end: {
                        line: 209,
                        column: 20
                    }
                },
                loc: {
                    start: {
                        line: 209,
                        column: 42
                    },
                    end: {
                        line: 211,
                        column: 5
                    }
                },
                line: 209
            },
            '19': {
                name: '(anonymous_19)',
                decl: {
                    start: {
                        line: 218,
                        column: 21
                    },
                    end: {
                        line: 218,
                        column: 22
                    }
                },
                loc: {
                    start: {
                        line: 218,
                        column: 38
                    },
                    end: {
                        line: 229,
                        column: 5
                    }
                },
                line: 218
            },
            '20': {
                name: '(anonymous_20)',
                decl: {
                    start: {
                        line: 237,
                        column: 27
                    },
                    end: {
                        line: 237,
                        column: 28
                    }
                },
                loc: {
                    start: {
                        line: 237,
                        column: 42
                    },
                    end: {
                        line: 243,
                        column: 5
                    }
                },
                line: 237
            },
            '21': {
                name: 'filterTargets',
                decl: {
                    start: {
                        line: 247,
                        column: 13
                    },
                    end: {
                        line: 247,
                        column: 26
                    }
                },
                loc: {
                    start: {
                        line: 247,
                        column: 92
                    },
                    end: {
                        line: 256,
                        column: 5
                    }
                },
                line: 247
            },
            '22': {
                name: '(anonymous_22)',
                decl: {
                    start: {
                        line: 249,
                        column: 31
                    },
                    end: {
                        line: 249,
                        column: 32
                    }
                },
                loc: {
                    start: {
                        line: 249,
                        column: 44
                    },
                    end: {
                        line: 254,
                        column: 9
                    }
                },
                line: 249
            },
            '23': {
                name: '(anonymous_23)',
                decl: {
                    start: {
                        line: 273,
                        column: 32
                    },
                    end: {
                        line: 273,
                        column: 33
                    }
                },
                loc: {
                    start: {
                        line: 273,
                        column: 43
                    },
                    end: {
                        line: 273,
                        column: 62
                    }
                },
                line: 273
            },
            '24': {
                name: '(anonymous_24)',
                decl: {
                    start: {
                        line: 275,
                        column: 36
                    },
                    end: {
                        line: 275,
                        column: 37
                    }
                },
                loc: {
                    start: {
                        line: 275,
                        column: 47
                    },
                    end: {
                        line: 275,
                        column: 66
                    }
                },
                line: 275
            },
            '25': {
                name: '(anonymous_25)',
                decl: {
                    start: {
                        line: 280,
                        column: 32
                    },
                    end: {
                        line: 280,
                        column: 33
                    }
                },
                loc: {
                    start: {
                        line: 280,
                        column: 43
                    },
                    end: {
                        line: 280,
                        column: 59
                    }
                },
                line: 280
            },
            '26': {
                name: 'deriveFullInfo',
                decl: {
                    start: {
                        line: 290,
                        column: 9
                    },
                    end: {
                        line: 290,
                        column: 23
                    }
                },
                loc: {
                    start: {
                        line: 292,
                        column: 26
                    },
                    end: {
                        line: 308,
                        column: 1
                    }
                },
                line: 292
            },
            '27': {
                name: '(anonymous_27)',
                decl: {
                    start: {
                        line: 296,
                        column: 39
                    },
                    end: {
                        line: 296,
                        column: 40
                    }
                },
                loc: {
                    start: {
                        line: 296,
                        column: 94
                    },
                    end: {
                        line: 306,
                        column: 5
                    }
                },
                line: 296
            },
            '28': {
                name: 'compareByOldestAndType',
                decl: {
                    start: {
                        line: 312,
                        column: 9
                    },
                    end: {
                        line: 312,
                        column: 31
                    }
                },
                loc: {
                    start: {
                        line: 315,
                        column: 10
                    },
                    end: {
                        line: 335,
                        column: 1
                    }
                },
                line: 315
            }
        },
        branchMap: {
            '0': {
                loc: {
                    start: {
                        line: 165,
                        column: 26
                    },
                    end: {
                        line: 165,
                        column: 89
                    }
                },
                type: 'cond-expr',
                locations: [{
                    start: {
                        line: 165,
                        column: 47
                    },
                    end: {
                        line: 165,
                        column: 51
                    }
                }, {
                    start: {
                        line: 165,
                        column: 55
                    },
                    end: {
                        line: 165,
                        column: 88
                    }
                }],
                line: 165
            },
            '1': {
                loc: {
                    start: {
                        line: 198,
                        column: 16
                    },
                    end: {
                        line: 198,
                        column: 82
                    }
                },
                type: 'binary-expr',
                locations: [{
                    start: {
                        line: 198,
                        column: 16
                    },
                    end: {
                        line: 198,
                        column: 25
                    }
                }, {
                    start: {
                        line: 198,
                        column: 29
                    },
                    end: {
                        line: 198,
                        column: 53
                    }
                }, {
                    start: {
                        line: 198,
                        column: 57
                    },
                    end: {
                        line: 198,
                        column: 82
                    }
                }],
                line: 198
            },
            '2': {
                loc: {
                    start: {
                        line: 202,
                        column: 16
                    },
                    end: {
                        line: 202,
                        column: 82
                    }
                },
                type: 'binary-expr',
                locations: [{
                    start: {
                        line: 202,
                        column: 16
                    },
                    end: {
                        line: 202,
                        column: 25
                    }
                }, {
                    start: {
                        line: 202,
                        column: 29
                    },
                    end: {
                        line: 202,
                        column: 53
                    }
                }, {
                    start: {
                        line: 202,
                        column: 57
                    },
                    end: {
                        line: 202,
                        column: 82
                    }
                }],
                line: 202
            },
            '3': {
                loc: {
                    start: {
                        line: 206,
                        column: 16
                    },
                    end: {
                        line: 206,
                        column: 53
                    }
                },
                type: 'binary-expr',
                locations: [{
                    start: {
                        line: 206,
                        column: 16
                    },
                    end: {
                        line: 206,
                        column: 25
                    }
                }, {
                    start: {
                        line: 206,
                        column: 29
                    },
                    end: {
                        line: 206,
                        column: 53
                    }
                }],
                line: 206
            },
            '4': {
                loc: {
                    start: {
                        line: 220,
                        column: 8
                    },
                    end: {
                        line: 228,
                        column: 9
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 220,
                        column: 8
                    },
                    end: {
                        line: 228,
                        column: 9
                    }
                }, {
                    start: {
                        line: 220,
                        column: 8
                    },
                    end: {
                        line: 228,
                        column: 9
                    }
                }],
                line: 220
            },
            '5': {
                loc: {
                    start: {
                        line: 222,
                        column: 12
                    },
                    end: {
                        line: 227,
                        column: 13
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 222,
                        column: 12
                    },
                    end: {
                        line: 227,
                        column: 13
                    }
                }, {
                    start: {
                        line: 222,
                        column: 12
                    },
                    end: {
                        line: 227,
                        column: 13
                    }
                }],
                line: 222
            },
            '6': {
                loc: {
                    start: {
                        line: 223,
                        column: 16
                    },
                    end: {
                        line: 226,
                        column: 17
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 223,
                        column: 16
                    },
                    end: {
                        line: 226,
                        column: 17
                    }
                }, {
                    start: {
                        line: 223,
                        column: 16
                    },
                    end: {
                        line: 226,
                        column: 17
                    }
                }],
                line: 223
            },
            '7': {
                loc: {
                    start: {
                        line: 238,
                        column: 8
                    },
                    end: {
                        line: 242,
                        column: 9
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 238,
                        column: 8
                    },
                    end: {
                        line: 242,
                        column: 9
                    }
                }, {
                    start: {
                        line: 238,
                        column: 8
                    },
                    end: {
                        line: 242,
                        column: 9
                    }
                }],
                line: 238
            },
            '8': {
                loc: {
                    start: {
                        line: 251,
                        column: 12
                    },
                    end: {
                        line: 253,
                        column: 13
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 251,
                        column: 12
                    },
                    end: {
                        line: 253,
                        column: 13
                    }
                }, {
                    start: {
                        line: 251,
                        column: 12
                    },
                    end: {
                        line: 253,
                        column: 13
                    }
                }],
                line: 251
            },
            '9': {
                loc: {
                    start: {
                        line: 266,
                        column: 4
                    },
                    end: {
                        line: 281,
                        column: 5
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 266,
                        column: 4
                    },
                    end: {
                        line: 281,
                        column: 5
                    }
                }, {
                    start: {
                        line: 266,
                        column: 4
                    },
                    end: {
                        line: 281,
                        column: 5
                    }
                }],
                line: 266
            },
            '10': {
                loc: {
                    start: {
                        line: 266,
                        column: 8
                    },
                    end: {
                        line: 266,
                        column: 74
                    }
                },
                type: 'binary-expr',
                locations: [{
                    start: {
                        line: 266,
                        column: 8
                    },
                    end: {
                        line: 266,
                        column: 28
                    }
                }, {
                    start: {
                        line: 266,
                        column: 33
                    },
                    end: {
                        line: 266,
                        column: 47
                    }
                }, {
                    start: {
                        line: 266,
                        column: 52
                    },
                    end: {
                        line: 266,
                        column: 74
                    }
                }],
                line: 266
            },
            '11': {
                loc: {
                    start: {
                        line: 270,
                        column: 11
                    },
                    end: {
                        line: 281,
                        column: 5
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 270,
                        column: 11
                    },
                    end: {
                        line: 281,
                        column: 5
                    }
                }, {
                    start: {
                        line: 270,
                        column: 11
                    },
                    end: {
                        line: 281,
                        column: 5
                    }
                }],
                line: 270
            },
            '12': {
                loc: {
                    start: {
                        line: 274,
                        column: 8
                    },
                    end: {
                        line: 276,
                        column: 9
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 274,
                        column: 8
                    },
                    end: {
                        line: 276,
                        column: 9
                    }
                }, {
                    start: {
                        line: 274,
                        column: 8
                    },
                    end: {
                        line: 276,
                        column: 9
                    }
                }],
                line: 274
            },
            '13': {
                loc: {
                    start: {
                        line: 298,
                        column: 12
                    },
                    end: {
                        line: 300,
                        column: 28
                    }
                },
                type: 'cond-expr',
                locations: [{
                    start: {
                        line: 299,
                        column: 18
                    },
                    end: {
                        line: 299,
                        column: 43
                    }
                }, {
                    start: {
                        line: 300,
                        column: 18
                    },
                    end: {
                        line: 300,
                        column: 28
                    }
                }],
                line: 298
            },
            '14': {
                loc: {
                    start: {
                        line: 316,
                        column: 16
                    },
                    end: {
                        line: 316,
                        column: 54
                    }
                },
                type: 'cond-expr',
                locations: [{
                    start: {
                        line: 316,
                        column: 35
                    },
                    end: {
                        line: 316,
                        column: 43
                    }
                }, {
                    start: {
                        line: 316,
                        column: 46
                    },
                    end: {
                        line: 316,
                        column: 54
                    }
                }],
                line: 316
            },
            '15': {
                loc: {
                    start: {
                        line: 317,
                        column: 16
                    },
                    end: {
                        line: 317,
                        column: 54
                    }
                },
                type: 'cond-expr',
                locations: [{
                    start: {
                        line: 317,
                        column: 35
                    },
                    end: {
                        line: 317,
                        column: 43
                    }
                }, {
                    start: {
                        line: 317,
                        column: 46
                    },
                    end: {
                        line: 317,
                        column: 54
                    }
                }],
                line: 317
            },
            '16': {
                loc: {
                    start: {
                        line: 318,
                        column: 17
                    },
                    end: {
                        line: 318,
                        column: 31
                    }
                },
                type: 'binary-expr',
                locations: [{
                    start: {
                        line: 318,
                        column: 18
                    },
                    end: {
                        line: 318,
                        column: 25
                    }
                }, {
                    start: {
                        line: 318,
                        column: 30
                    },
                    end: {
                        line: 318,
                        column: 31
                    }
                }],
                line: 318
            },
            '17': {
                loc: {
                    start: {
                        line: 319,
                        column: 4
                    },
                    end: {
                        line: 321,
                        column: 5
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 319,
                        column: 4
                    },
                    end: {
                        line: 321,
                        column: 5
                    }
                }, {
                    start: {
                        line: 319,
                        column: 4
                    },
                    end: {
                        line: 321,
                        column: 5
                    }
                }],
                line: 319
            },
            '18': {
                loc: {
                    start: {
                        line: 323,
                        column: 4
                    },
                    end: {
                        line: 325,
                        column: 5
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 323,
                        column: 4
                    },
                    end: {
                        line: 325,
                        column: 5
                    }
                }, {
                    start: {
                        line: 323,
                        column: 4
                    },
                    end: {
                        line: 325,
                        column: 5
                    }
                }],
                line: 323
            },
            '19': {
                loc: {
                    start: {
                        line: 330,
                        column: 4
                    },
                    end: {
                        line: 334,
                        column: 5
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 330,
                        column: 4
                    },
                    end: {
                        line: 334,
                        column: 5
                    }
                }, {
                    start: {
                        line: 330,
                        column: 4
                    },
                    end: {
                        line: 334,
                        column: 5
                    }
                }],
                line: 330
            }
        },
        s: {
            '0': 0,
            '1': 0,
            '2': 0,
            '3': 0,
            '4': 0,
            '5': 0,
            '6': 0,
            '7': 0,
            '8': 0,
            '9': 0,
            '10': 0,
            '11': 0,
            '12': 0,
            '13': 0,
            '14': 0,
            '15': 0,
            '16': 0,
            '17': 0,
            '18': 0,
            '19': 0,
            '20': 0,
            '21': 0,
            '22': 0,
            '23': 0,
            '24': 0,
            '25': 0,
            '26': 0,
            '27': 0,
            '28': 0,
            '29': 0,
            '30': 0,
            '31': 0,
            '32': 0,
            '33': 0,
            '34': 0,
            '35': 0,
            '36': 0,
            '37': 0,
            '38': 0,
            '39': 0,
            '40': 0,
            '41': 0,
            '42': 0,
            '43': 0,
            '44': 0,
            '45': 0,
            '46': 0,
            '47': 0,
            '48': 0,
            '49': 0,
            '50': 0,
            '51': 0,
            '52': 0,
            '53': 0,
            '54': 0,
            '55': 0,
            '56': 0,
            '57': 0,
            '58': 0,
            '59': 0,
            '60': 0,
            '61': 0,
            '62': 0,
            '63': 0,
            '64': 0,
            '65': 0,
            '66': 0,
            '67': 0,
            '68': 0,
            '69': 0,
            '70': 0,
            '71': 0,
            '72': 0,
            '73': 0,
            '74': 0,
            '75': 0,
            '76': 0,
            '77': 0,
            '78': 0,
            '79': 0,
            '80': 0,
            '81': 0,
            '82': 0,
            '83': 0,
            '84': 0,
            '85': 0,
            '86': 0,
            '87': 0,
            '88': 0,
            '89': 0,
            '90': 0,
            '91': 0,
            '92': 0,
            '93': 0,
            '94': 0,
            '95': 0,
            '96': 0,
            '97': 0,
            '98': 0,
            '99': 0,
            '100': 0,
            '101': 0,
            '102': 0,
            '103': 0,
            '104': 0,
            '105': 0,
            '106': 0
        },
        f: {
            '0': 0,
            '1': 0,
            '2': 0,
            '3': 0,
            '4': 0,
            '5': 0,
            '6': 0,
            '7': 0,
            '8': 0,
            '9': 0,
            '10': 0,
            '11': 0,
            '12': 0,
            '13': 0,
            '14': 0,
            '15': 0,
            '16': 0,
            '17': 0,
            '18': 0,
            '19': 0,
            '20': 0,
            '21': 0,
            '22': 0,
            '23': 0,
            '24': 0,
            '25': 0,
            '26': 0,
            '27': 0,
            '28': 0
        },
        b: {
            '0': [0, 0],
            '1': [0, 0, 0],
            '2': [0, 0, 0],
            '3': [0, 0],
            '4': [0, 0],
            '5': [0, 0],
            '6': [0, 0],
            '7': [0, 0],
            '8': [0, 0],
            '9': [0, 0],
            '10': [0, 0, 0],
            '11': [0, 0],
            '12': [0, 0],
            '13': [0, 0],
            '14': [0, 0],
            '15': [0, 0],
            '16': [0, 0],
            '17': [0, 0],
            '18': [0, 0],
            '19': [0, 0]
        },
        _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
        return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
}();

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

exports.deriveAnalysis = deriveAnalysis;

var _utils = require('../utils');

var _dates = require('./dates');

var _bitcoinjsLibZcash = require('bitcoinjs-lib-zcash');

// Pretty complicated function for deriving transaction analysis.
//
// Transaction analysis is a little heuristic - I have transactions and I try
// to find out which are "positive" and which are "negative"
// and which outputs to "display to user"
//
// Also, what is the "effective balance" of the transaction
//
// I do not re-analyze old transactions, I just analyze new transactions

function deriveAnalysis(newTransactions, oldTransactions, addressToPath, lastBlock, wantedOffset) // what (new Date().getTimezoneOffset()) returns
{
    cov_1fqw934kkq.f[0]++;

    // I need the outputs in format txid+i -> address/value
    // For old transactions, that are in history, I just need my outputs
    // For new transactions, I need all outputs (I will be analyzing them)
    var outputsForAnalysis = (cov_1fqw934kkq.s[0]++, deriveOutputsForAnalysisMap(newTransactions, oldTransactions));

    // For each tx, derive info about its impact,
    // but since we don't know order, we don't know balance after it
    var analysis = (cov_1fqw934kkq.s[1]++, deriveBalancelessAnalysisMap(newTransactions, oldTransactions, outputsForAnalysis, addressToPath, lastBlock, wantedOffset));

    // Add "balance" (which means balance after the transaction)
    var transactions = (cov_1fqw934kkq.s[2]++, deriveFullInfo(analysis));
    cov_1fqw934kkq.s[3]++;
    return transactions;
}

// All info about outputs
function deriveOutputsForAnalysisMap(newTs, oldTs) {
    cov_1fqw934kkq.f[1]++;

    // Take only my outputs from old
    function getOutputsFromOldTransaction(t) {
        cov_1fqw934kkq.f[2]++;

        var outputs = (cov_1fqw934kkq.s[4]++, []);
        cov_1fqw934kkq.s[5]++;
        Object.keys(t.myOutputs).forEach(function (i) {
            cov_1fqw934kkq.f[3]++;
            cov_1fqw934kkq.s[6]++;

            outputs[parseInt(i)] = t.myOutputs[parseInt(i)];
        });
        var txid = (cov_1fqw934kkq.s[7]++, t.hash);
        cov_1fqw934kkq.s[8]++;
        return { txid: txid, outputs: outputs };
    }

    // take all info from new txs, since I will be going throug them 1 by 1
    function getOutputsFromNewTransaction(t) {
        cov_1fqw934kkq.f[4]++;

        var outputs = (cov_1fqw934kkq.s[9]++, []);
        cov_1fqw934kkq.s[10]++;
        for (var _i = 0; _i < t.tx.outs.length; _i++) {
            var output = (cov_1fqw934kkq.s[11]++, t.tx.outs[_i]);
            var _address = (cov_1fqw934kkq.s[12]++, t.outputAddresses[_i]);
            cov_1fqw934kkq.s[13]++;
            outputs.push({ address: _address, value: output.value });
        }
        var txid = (cov_1fqw934kkq.s[14]++, t.hash);
        cov_1fqw934kkq.s[15]++;
        return { txid: txid, outputs: outputs };
    }

    var res = (cov_1fqw934kkq.s[16]++, {});
    var newOutputs = (cov_1fqw934kkq.s[17]++, (0, _utils.objectValues)(newTs).map(function (t) {
        cov_1fqw934kkq.f[5]++;
        cov_1fqw934kkq.s[18]++;
        return getOutputsFromNewTransaction(t);
    }));
    var oldOutputs = (cov_1fqw934kkq.s[19]++, oldTs.map(function (t) {
        cov_1fqw934kkq.f[6]++;
        cov_1fqw934kkq.s[20]++;
        return getOutputsFromOldTransaction(t);
    }));

    // new txs are replacing the old ones
    // (rare case - new tx can have new address "discovered")
    cov_1fqw934kkq.s[21]++;
    oldOutputs.concat(newOutputs).forEach(function (_ref) {
        var txid = _ref.txid,
            outputs = _ref.outputs;
        cov_1fqw934kkq.f[7]++;
        cov_1fqw934kkq.s[22]++;

        res[txid] = outputs;
    });
    cov_1fqw934kkq.s[23]++;
    return res;
}

function deriveBalancelessAnalysisMap(newTs, oldTs, outputs, addressToPath, lastBlock, wantedOffset) {
    cov_1fqw934kkq.f[8]++;

    var res = (cov_1fqw934kkq.s[24]++, {});
    // first, save the old ones
    cov_1fqw934kkq.s[25]++;
    oldTs.forEach(function (t) {
        cov_1fqw934kkq.f[9]++;
        cov_1fqw934kkq.s[26]++;

        res[t.hash] = t;
    });
    cov_1fqw934kkq.s[27]++;
    Object.keys(newTs).forEach(function (id) {
        cov_1fqw934kkq.f[10]++;
        cov_1fqw934kkq.s[28]++;

        res[id] = analyzeTransaction(newTs[id], outputs, addressToPath, lastBlock, wantedOffset);
    });
    cov_1fqw934kkq.s[29]++;
    return res;
}

// Analyze single transaction
function analyzeTransaction(t, outputs, addressToPath, lastBlock, wantedOffset) {
    cov_1fqw934kkq.f[11]++;

    var inputIds = (cov_1fqw934kkq.s[30]++, t.tx.ins.map(function (input) {
        cov_1fqw934kkq.f[12]++;
        cov_1fqw934kkq.s[31]++;
        return { id: (0, _utils.getInputId)(input), index: input.index };
    }));
    var hasJoinsplits = (cov_1fqw934kkq.s[32]++, t.tx.joinsplits.length > 0);

    var isCoinbase = (cov_1fqw934kkq.s[33]++, t.tx.ins.some(function (i) {
        cov_1fqw934kkq.f[13]++;
        cov_1fqw934kkq.s[34]++;
        return _bitcoinjsLibZcash.Transaction.isCoinbaseHash(i.hash);
    }));

    var hash = (cov_1fqw934kkq.s[35]++, t.hash);

    // the main logic is here
    var targets = (cov_1fqw934kkq.s[36]++, getTargetsFromTransaction(inputIds, outputs, addressToPath, hash, hasJoinsplits));
    var dates = (cov_1fqw934kkq.s[37]++, (0, _dates.deriveDateFormats)(t.timestamp, wantedOffset));

    var confirmations = (cov_1fqw934kkq.s[38]++, t.height == null ? (cov_1fqw934kkq.b[0][0]++, null) : (cov_1fqw934kkq.b[0][1]++, lastBlock.height - t.height + 1));

    cov_1fqw934kkq.s[39]++;
    return _extends({
        isCoinbase: isCoinbase
    }, dates, {
        height: t.height,
        confirmations: confirmations,
        hash: hash
    }, targets, {
        inputs: inputIds,
        tsize: t.tx.byteLength(),
        vsize: t.vsize
    });
}

function getTargetsFromTransaction(inputIds, outputs, addressToPath, id, hasJoinsplits) {
    cov_1fqw934kkq.f[14]++;

    // this function gets run only on new transactions,
    // so currentOutputs is always with full outputs, not pruned
    var currentOutputs_ = (cov_1fqw934kkq.s[40]++, outputs[id]);
    var currentOutputs = (cov_1fqw934kkq.s[41]++, (0, _utils.filterNull)(currentOutputs_, true));

    var nCredit = (cov_1fqw934kkq.s[42]++, 0);
    var nDebit = (cov_1fqw934kkq.s[43]++, 0);
    var value = (cov_1fqw934kkq.s[44]++, 0);

    // testing if address is mine / change / not change / ...
    function isExternal(a) {
        cov_1fqw934kkq.f[15]++;
        cov_1fqw934kkq.s[45]++;

        return (cov_1fqw934kkq.b[1][0]++, a != null) && (cov_1fqw934kkq.b[1][1]++, addressToPath[a] != null) && (cov_1fqw934kkq.b[1][2]++, addressToPath[a][0] === 0);
    }

    function isInternal(a) {
        cov_1fqw934kkq.f[16]++;
        cov_1fqw934kkq.s[46]++;

        return (cov_1fqw934kkq.b[2][0]++, a != null) && (cov_1fqw934kkq.b[2][1]++, addressToPath[a] != null) && (cov_1fqw934kkq.b[2][2]++, addressToPath[a][0] === 1);
    }

    function isCredit(a) {
        cov_1fqw934kkq.f[17]++;
        cov_1fqw934kkq.s[47]++;

        return (cov_1fqw934kkq.b[3][0]++, a != null) && (cov_1fqw934kkq.b[3][1]++, addressToPath[a] != null);
    }

    function isDebit(a) {
        cov_1fqw934kkq.f[18]++;
        cov_1fqw934kkq.s[48]++;

        return !isCredit(a);
    }

    // subtract debit impact value

    // Transaction is TAKING me my money,
    // if its input is mine
    // == if its input belongs to a transaction that's mine AND the address of corresponding output is mine
    cov_1fqw934kkq.s[49]++;
    inputIds.forEach(function (_ref2) {
        var id = _ref2.id,
            index = _ref2.index;
        cov_1fqw934kkq.f[19]++;

        var info = (cov_1fqw934kkq.s[50]++, outputs[id]);
        cov_1fqw934kkq.s[51]++;
        if (info) {
            cov_1fqw934kkq.b[4][0]++;

            var output = (cov_1fqw934kkq.s[52]++, info[index]);
            cov_1fqw934kkq.s[53]++;
            if (output) {
                cov_1fqw934kkq.b[5][0]++;
                cov_1fqw934kkq.s[54]++;

                if (isCredit(output.address)) {
                    cov_1fqw934kkq.b[6][0]++;
                    cov_1fqw934kkq.s[55]++;

                    value -= output.value;
                    cov_1fqw934kkq.s[56]++;
                    nDebit++;
                } else {
                    cov_1fqw934kkq.b[6][1]++;
                }
            } else {
                cov_1fqw934kkq.b[5][1]++;
            }
        } else {
            cov_1fqw934kkq.b[4][1]++;
        }
    });

    var myOutputs = (cov_1fqw934kkq.s[57]++, {});

    // add credit impact value

    // Transansction is GIVING me money,
    // if its output has address that is mine. (On any chain.)
    cov_1fqw934kkq.s[58]++;
    currentOutputs.forEach(function (output, i) {
        cov_1fqw934kkq.f[20]++;
        cov_1fqw934kkq.s[59]++;

        if (isCredit(output.address)) {
            cov_1fqw934kkq.b[7][0]++;
            cov_1fqw934kkq.s[60]++;

            value += output.value;
            cov_1fqw934kkq.s[61]++;
            nCredit++;
            cov_1fqw934kkq.s[62]++;
            myOutputs[i] = { address: output.address, value: output.value, i: i };
        } else {
            cov_1fqw934kkq.b[7][1]++;
        }
    });

    var targets = (cov_1fqw934kkq.s[63]++, []);

    function filterTargets(filterFunction) {
        cov_1fqw934kkq.f[21]++;

        var res = (cov_1fqw934kkq.s[64]++, []);
        cov_1fqw934kkq.s[65]++;
        currentOutputs.forEach(function (info, i) {
            cov_1fqw934kkq.f[22]++;

            var _ref3 = (cov_1fqw934kkq.s[66]++, info),
                address = _ref3.address,
                value = _ref3.value;

            cov_1fqw934kkq.s[67]++;

            if (filterFunction(address)) {
                cov_1fqw934kkq.b[8][0]++;
                cov_1fqw934kkq.s[68]++;

                res.push({ address: address, value: value, i: i });
            } else {
                cov_1fqw934kkq.b[8][1]++;
            }
        });
        cov_1fqw934kkq.s[69]++;
        return res;
    }

    var type = void 0;

    var insLength = (cov_1fqw934kkq.s[70]++, inputIds.length);
    var outsLength = (cov_1fqw934kkq.s[71]++, currentOutputs.length);

    // joinsplit is a special (zcash) case - it has no inputs - but outputs still mine

    // if all inputs are mine and all outputs are mine - no targets
    cov_1fqw934kkq.s[72]++;
    if ((cov_1fqw934kkq.b[10][0]++, nDebit === insLength) && (cov_1fqw934kkq.b[10][1]++, !hasJoinsplits) && (cov_1fqw934kkq.b[10][2]++, nCredit === outsLength)) {
        cov_1fqw934kkq.b[9][0]++;
        cov_1fqw934kkq.s[73]++;

        // within the same account
        type = 'self';
        cov_1fqw934kkq.s[74]++;
        targets = [];
    } else {
            cov_1fqw934kkq.b[9][1]++;
            cov_1fqw934kkq.s[75]++;
            if (value > 0) {
                cov_1fqw934kkq.b[11][0]++;
                cov_1fqw934kkq.s[76]++;

                // incoming transaction, targets are either external or internal outputs
                type = 'recv';
                cov_1fqw934kkq.s[77]++;
                targets = filterTargets(function (address) {
                    cov_1fqw934kkq.f[23]++;
                    cov_1fqw934kkq.s[78]++;
                    return isExternal(address);
                });
                cov_1fqw934kkq.s[79]++;
                if (targets.length === 0) {
                    cov_1fqw934kkq.b[12][0]++;
                    cov_1fqw934kkq.s[80]++;

                    targets = filterTargets(function (address) {
                        cov_1fqw934kkq.f[24]++;
                        cov_1fqw934kkq.s[81]++;
                        return isInternal(address);
                    });
                } else {
                    cov_1fqw934kkq.b[12][1]++;
                }
            } else {
                cov_1fqw934kkq.b[11][1]++;
                cov_1fqw934kkq.s[82]++;

                // outgoing transaction, targets are debit outputs
                type = 'sent';
                cov_1fqw934kkq.s[83]++;
                targets = filterTargets(function (address) {
                    cov_1fqw934kkq.f[25]++;
                    cov_1fqw934kkq.s[84]++;
                    return isDebit(address);
                });
            }
        } // note that target selection does NOT affect value/balance
    // makes sense - even "sent to self" transactions are negative - cost fee

    cov_1fqw934kkq.s[85]++;
    return { targets: targets, type: type, value: value, myOutputs: myOutputs };
}

// Full info is just analysis sorted and with added balances
function deriveFullInfo(analysis) {
    cov_1fqw934kkq.f[26]++;

    var sortedAnalysis = (cov_1fqw934kkq.s[86]++, (0, _utils.objectValues)(analysis).sort(compareByOldestAndType));

    var prev = (cov_1fqw934kkq.s[87]++, null);
    var impacts = (cov_1fqw934kkq.s[88]++, sortedAnalysis.map(function (info) {
        cov_1fqw934kkq.f[27]++;

        var balance = (cov_1fqw934kkq.s[89]++, prev != null ? (cov_1fqw934kkq.b[13][0]++, prev.balance + info.value) : (cov_1fqw934kkq.b[13][1]++, info.value));
        cov_1fqw934kkq.s[90]++;
        prev = _extends({}, info, {
            balance: balance
        });
        cov_1fqw934kkq.s[91]++;
        return prev;
    }));
    cov_1fqw934kkq.s[92]++;
    return impacts.reverse();
}

var IMPACT_ORDERING = (cov_1fqw934kkq.s[93]++, ['recv', 'self', 'sent']);

function compareByOldestAndType(a, b) {
    cov_1fqw934kkq.f[28]++;

    var ah = (cov_1fqw934kkq.s[94]++, a.height != null ? (cov_1fqw934kkq.b[14][0]++, a.height) : (cov_1fqw934kkq.b[14][1]++, Infinity));
    var bh = (cov_1fqw934kkq.s[95]++, b.height != null ? (cov_1fqw934kkq.b[15][0]++, b.height) : (cov_1fqw934kkq.b[15][1]++, Infinity));
    var diff = (cov_1fqw934kkq.s[96]++, (cov_1fqw934kkq.b[16][0]++, ah - bh) || (cov_1fqw934kkq.b[16][1]++, 0)); // Infinity - Infinity = NaN
    cov_1fqw934kkq.s[97]++;
    if (diff !== 0) {
        cov_1fqw934kkq.b[17][0]++;
        cov_1fqw934kkq.s[98]++;

        return diff;
    } else {
        cov_1fqw934kkq.b[17][1]++;
    }
    var odiff = (cov_1fqw934kkq.s[99]++, IMPACT_ORDERING.indexOf(a.type) - IMPACT_ORDERING.indexOf(b.type));
    cov_1fqw934kkq.s[100]++;
    if (odiff !== 0) {
        cov_1fqw934kkq.b[18][0]++;
        cov_1fqw934kkq.s[101]++;

        return odiff;
    } else {
        cov_1fqw934kkq.b[18][1]++;
    }

    // this does not really matter, what matter is that it is stable
    var ahash = (cov_1fqw934kkq.s[102]++, a.hash);
    var bhash = (cov_1fqw934kkq.s[103]++, b.hash);
    cov_1fqw934kkq.s[104]++;
    if (ahash < bhash) {
        cov_1fqw934kkq.b[19][0]++;
        cov_1fqw934kkq.s[105]++;

        return -1;
    } else {
        cov_1fqw934kkq.b[19][1]++;
        cov_1fqw934kkq.s[106]++;

        return 1;
    }
}