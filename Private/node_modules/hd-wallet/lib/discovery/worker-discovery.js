'use strict';

var cov_qzo1qkpwm = function () {
    var path = '/home/g/dev/hd-wallet/src/discovery/worker-discovery.js',
        hash = '664f3168ad25ba14c65b4ecc5392ab22502cdf16',
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
        path: '/home/g/dev/hd-wallet/src/discovery/worker-discovery.js',
        statementMap: {
            '0': {
                start: {
                    line: 31,
                    column: 8
                },
                end: {
                    line: 31,
                    column: 61
                }
            },
            '1': {
                start: {
                    line: 33,
                    column: 8
                },
                end: {
                    line: 33,
                    column: 123
                }
            },
            '2': {
                start: {
                    line: 34,
                    column: 8
                },
                end: {
                    line: 41,
                    column: 10
                }
            },
            '3': {
                start: {
                    line: 36,
                    column: 16
                },
                end: {
                    line: 38,
                    column: 17
                }
            },
            '4': {
                start: {
                    line: 37,
                    column: 20
                },
                end: {
                    line: 37,
                    column: 71
                }
            },
            '5': {
                start: {
                    line: 40,
                    column: 21
                },
                end: {
                    line: 40,
                    column: 41
                }
            },
            '6': {
                start: {
                    line: 42,
                    column: 8
                },
                end: {
                    line: 42,
                    column: 27
                }
            },
            '7': {
                start: {
                    line: 46,
                    column: 8
                },
                end: {
                    line: 54,
                    column: 9
                }
            },
            '8': {
                start: {
                    line: 47,
                    column: 25
                },
                end: {
                    line: 47,
                    column: 72
                }
            },
            '9': {
                start: {
                    line: 48,
                    column: 12
                },
                end: {
                    line: 50,
                    column: 13
                }
            },
            '10': {
                start: {
                    line: 49,
                    column: 16
                },
                end: {
                    line: 49,
                    column: 75
                }
            },
            '11': {
                start: {
                    line: 51,
                    column: 12
                },
                end: {
                    line: 51,
                    column: 24
                }
            },
            '12': {
                start: {
                    line: 53,
                    column: 12
                },
                end: {
                    line: 53,
                    column: 21
                }
            },
            '13': {
                start: {
                    line: 59,
                    column: 151
                },
                end: {
                    line: 59,
                    column: 158
                }
            },
            '14': {
                start: {
                    line: 65,
                    column: 8
                },
                end: {
                    line: 65,
                    column: 54
                }
            },
            '15': {
                start: {
                    line: 66,
                    column: 8
                },
                end: {
                    line: 66,
                    column: 54
                }
            },
            '16': {
                start: {
                    line: 75,
                    column: 28
                },
                end: {
                    line: 75,
                    column: 52
                }
            },
            '17': {
                start: {
                    line: 76,
                    column: 21
                },
                end: {
                    line: 76,
                    column: 50
                }
            },
            '18': {
                start: {
                    line: 77,
                    column: 8
                },
                end: {
                    line: 79,
                    column: 9
                }
            },
            '19': {
                start: {
                    line: 78,
                    column: 12
                },
                end: {
                    line: 78,
                    column: 40
                }
            },
            '20': {
                start: {
                    line: 80,
                    column: 25
                },
                end: {
                    line: 80,
                    column: 39
                }
            },
            '21': {
                start: {
                    line: 81,
                    column: 25
                },
                end: {
                    line: 81,
                    column: 39
                }
            },
            '22': {
                start: {
                    line: 83,
                    column: 24
                },
                end: {
                    line: 86,
                    column: 9
                }
            },
            '23': {
                start: {
                    line: 89,
                    column: 8
                },
                end: {
                    line: 94,
                    column: 42
                }
            },
            '24': {
                start: {
                    line: 93,
                    column: 12
                },
                end: {
                    line: 93,
                    column: 89
                }
            },
            '25': {
                start: {
                    line: 94,
                    column: 24
                },
                end: {
                    line: 94,
                    column: 40
                }
            },
            '26': {
                start: {
                    line: 111,
                    column: 21
                },
                end: {
                    line: 111,
                    column: 50
                }
            },
            '27': {
                start: {
                    line: 112,
                    column: 8
                },
                end: {
                    line: 114,
                    column: 9
                }
            },
            '28': {
                start: {
                    line: 113,
                    column: 12
                },
                end: {
                    line: 113,
                    column: 101
                }
            },
            '29': {
                start: {
                    line: 116,
                    column: 8
                },
                end: {
                    line: 136,
                    column: 10
                }
            },
            '30': {
                start: {
                    line: 118,
                    column: 33
                },
                end: {
                    line: 118,
                    column: 88
                }
            },
            '31': {
                start: {
                    line: 119,
                    column: 33
                },
                end: {
                    line: 119,
                    column: 88
                }
            },
            '32': {
                start: {
                    line: 121,
                    column: 32
                },
                end: {
                    line: 124,
                    column: 17
                }
            },
            '33': {
                start: {
                    line: 126,
                    column: 28
                },
                end: {
                    line: 133,
                    column: 17
                }
            },
            '34': {
                start: {
                    line: 134,
                    column: 16
                },
                end: {
                    line: 134,
                    column: 88
                }
            },
            '35': {
                start: {
                    line: 153,
                    column: 21
                },
                end: {
                    line: 153,
                    column: 50
                }
            },
            '36': {
                start: {
                    line: 154,
                    column: 8
                },
                end: {
                    line: 156,
                    column: 9
                }
            },
            '37': {
                start: {
                    line: 155,
                    column: 12
                },
                end: {
                    line: 155,
                    column: 39
                }
            },
            '38': {
                start: {
                    line: 157,
                    column: 8
                },
                end: {
                    line: 215,
                    column: 10
                }
            },
            '39': {
                start: {
                    line: 159,
                    column: 33
                },
                end: {
                    line: 159,
                    column: 88
                }
            },
            '40': {
                start: {
                    line: 160,
                    column: 33
                },
                end: {
                    line: 160,
                    column: 88
                }
            },
            '41': {
                start: {
                    line: 162,
                    column: 32
                },
                end: {
                    line: 165,
                    column: 17
                }
            },
            '42': {
                start: {
                    line: 168,
                    column: 20
                },
                end: {
                    line: 172,
                    column: 22
                }
            },
            '43': {
                start: {
                    line: 169,
                    column: 52
                },
                end: {
                    line: 169,
                    column: 61
                }
            },
            '44': {
                start: {
                    line: 175,
                    column: 16
                },
                end: {
                    line: 175,
                    column: 60
                }
            },
            '45': {
                start: {
                    line: 176,
                    column: 35
                },
                end: {
                    line: 176,
                    column: 42
                }
            },
            '46': {
                start: {
                    line: 178,
                    column: 74
                },
                end: {
                    line: 192,
                    column: 90
                }
            },
            '47': {
                start: {
                    line: 180,
                    column: 38
                },
                end: {
                    line: 180,
                    column: 64
                }
            },
            '48': {
                start: {
                    line: 181,
                    column: 31
                },
                end: {
                    line: 181,
                    column: 36
                }
            },
            '49': {
                start: {
                    line: 182,
                    column: 20
                },
                end: {
                    line: 188,
                    column: 23
                }
            },
            '50': {
                start: {
                    line: 183,
                    column: 24
                },
                end: {
                    line: 187,
                    column: 25
                }
            },
            '51': {
                start: {
                    line: 184,
                    column: 28
                },
                end: {
                    line: 186,
                    column: 29
                }
            },
            '52': {
                start: {
                    line: 185,
                    column: 32
                },
                end: {
                    line: 185,
                    column: 44
                }
            },
            '53': {
                start: {
                    line: 189,
                    column: 20
                },
                end: {
                    line: 189,
                    column: 32
                }
            },
            '54': {
                start: {
                    line: 192,
                    column: 87
                },
                end: {
                    line: 192,
                    column: 89
                }
            },
            '55': {
                start: {
                    line: 195,
                    column: 77
                },
                end: {
                    line: 195,
                    column: 113
                }
            },
            '56': {
                start: {
                    line: 195,
                    column: 105
                },
                end: {
                    line: 195,
                    column: 112
                }
            },
            '57': {
                start: {
                    line: 197,
                    column: 64
                },
                end: {
                    line: 210,
                    column: 18
                }
            },
            '58': {
                start: {
                    line: 198,
                    column: 32
                },
                end: {
                    line: 205,
                    column: 21
                }
            },
            '59': {
                start: {
                    line: 206,
                    column: 20
                },
                end: {
                    line: 209,
                    column: 23
                }
            },
            '60': {
                start: {
                    line: 207,
                    column: 24
                },
                end: {
                    line: 207,
                    column: 43
                }
            },
            '61': {
                start: {
                    line: 208,
                    column: 24
                },
                end: {
                    line: 208,
                    column: 35
                }
            },
            '62': {
                start: {
                    line: 212,
                    column: 57
                },
                end: {
                    line: 212,
                    column: 83
                }
            },
            '63': {
                start: {
                    line: 213,
                    column: 16
                },
                end: {
                    line: 213,
                    column: 27
                }
            },
            '64': {
                start: {
                    line: 219,
                    column: 23
                },
                end: {
                    line: 219,
                    column: 76
                }
            },
            '65': {
                start: {
                    line: 220,
                    column: 8
                },
                end: {
                    line: 222,
                    column: 9
                }
            },
            '66': {
                start: {
                    line: 221,
                    column: 12
                },
                end: {
                    line: 221,
                    column: 78
                }
            },
            '67': {
                start: {
                    line: 223,
                    column: 8
                },
                end: {
                    line: 223,
                    column: 22
                }
            },
            '68': {
                start: {
                    line: 227,
                    column: 37
                },
                end: {
                    line: 227,
                    column: 62
                }
            },
            '69': {
                start: {
                    line: 228,
                    column: 8
                },
                end: {
                    line: 230,
                    column: 9
                }
            },
            '70': {
                start: {
                    line: 229,
                    column: 12
                },
                end: {
                    line: 229,
                    column: 24
                }
            },
            '71': {
                start: {
                    line: 231,
                    column: 24
                },
                end: {
                    line: 231,
                    column: 83
                }
            },
            '72': {
                start: {
                    line: 232,
                    column: 8
                },
                end: {
                    line: 232,
                    column: 84
                }
            },
            '73': {
                start: {
                    line: 240,
                    column: 37
                },
                end: {
                    line: 240,
                    column: 62
                }
            },
            '74': {
                start: {
                    line: 241,
                    column: 8
                },
                end: {
                    line: 250,
                    column: 9
                }
            },
            '75': {
                start: {
                    line: 242,
                    column: 12
                },
                end: {
                    line: 242,
                    column: 109
                }
            },
            '76': {
                start: {
                    line: 244,
                    column: 12
                },
                end: {
                    line: 249,
                    column: 33
                }
            },
            '77': {
                start: {
                    line: 249,
                    column: 25
                },
                end: {
                    line: 249,
                    column: 31
                }
            }
        },
        fnMap: {
            '0': {
                name: '(anonymous_0)',
                decl: {
                    start: {
                        line: 25,
                        column: 4
                    },
                    end: {
                        line: 25,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 30,
                        column: 6
                    },
                    end: {
                        line: 43,
                        column: 5
                    }
                },
                line: 30
            },
            '1': {
                name: '(anonymous_1)',
                decl: {
                    start: {
                        line: 35,
                        column: 12
                    },
                    end: {
                        line: 35,
                        column: 13
                    }
                },
                loc: {
                    start: {
                        line: 35,
                        column: 22
                    },
                    end: {
                        line: 39,
                        column: 13
                    }
                },
                line: 35
            },
            '2': {
                name: '(anonymous_2)',
                decl: {
                    start: {
                        line: 40,
                        column: 12
                    },
                    end: {
                        line: 40,
                        column: 13
                    }
                },
                loc: {
                    start: {
                        line: 40,
                        column: 21
                    },
                    end: {
                        line: 40,
                        column: 41
                    }
                },
                line: 40
            },
            '3': {
                name: '(anonymous_3)',
                decl: {
                    start: {
                        line: 45,
                        column: 4
                    },
                    end: {
                        line: 45,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 45,
                        column: 80
                    },
                    end: {
                        line: 55,
                        column: 5
                    }
                },
                line: 45
            },
            '4': {
                name: '(anonymous_4)',
                decl: {
                    start: {
                        line: 59,
                        column: 131
                    },
                    end: {
                        line: 59,
                        column: 132
                    }
                },
                loc: {
                    start: {
                        line: 59,
                        column: 137
                    },
                    end: {
                        line: 59,
                        column: 139
                    }
                },
                line: 59
            },
            '5': {
                name: '(anonymous_5)',
                decl: {
                    start: {
                        line: 59,
                        column: 145
                    },
                    end: {
                        line: 59,
                        column: 146
                    }
                },
                loc: {
                    start: {
                        line: 59,
                        column: 151
                    },
                    end: {
                        line: 59,
                        column: 158
                    }
                },
                line: 59
            },
            '6': {
                name: '(anonymous_6)',
                decl: {
                    start: {
                        line: 62,
                        column: 4
                    },
                    end: {
                        line: 62,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 64,
                        column: 12
                    },
                    end: {
                        line: 67,
                        column: 5
                    }
                },
                line: 64
            },
            '7': {
                name: '(anonymous_7)',
                decl: {
                    start: {
                        line: 69,
                        column: 4
                    },
                    end: {
                        line: 69,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 74,
                        column: 24
                    },
                    end: {
                        line: 95,
                        column: 5
                    }
                },
                line: 74
            },
            '8': {
                name: '(anonymous_8)',
                decl: {
                    start: {
                        line: 92,
                        column: 16
                    },
                    end: {
                        line: 92,
                        column: 17
                    }
                },
                loc: {
                    start: {
                        line: 93,
                        column: 12
                    },
                    end: {
                        line: 93,
                        column: 89
                    }
                },
                line: 93
            },
            '9': {
                name: '(anonymous_9)',
                decl: {
                    start: {
                        line: 94,
                        column: 15
                    },
                    end: {
                        line: 94,
                        column: 16
                    }
                },
                loc: {
                    start: {
                        line: 94,
                        column: 24
                    },
                    end: {
                        line: 94,
                        column: 40
                    }
                },
                line: 94
            },
            '10': {
                name: '(anonymous_10)',
                decl: {
                    start: {
                        line: 97,
                        column: 4
                    },
                    end: {
                        line: 97,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 110,
                        column: 56
                    },
                    end: {
                        line: 137,
                        column: 5
                    }
                },
                line: 110
            },
            '11': {
                name: '(anonymous_11)',
                decl: {
                    start: {
                        line: 117,
                        column: 101
                    },
                    end: {
                        line: 117,
                        column: 102
                    }
                },
                loc: {
                    start: {
                        line: 117,
                        column: 135
                    },
                    end: {
                        line: 135,
                        column: 13
                    }
                },
                line: 117
            },
            '12': {
                name: '(anonymous_12)',
                decl: {
                    start: {
                        line: 139,
                        column: 4
                    },
                    end: {
                        line: 139,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 152,
                        column: 35
                    },
                    end: {
                        line: 216,
                        column: 5
                    }
                },
                line: 152
            },
            '13': {
                name: '(anonymous_13)',
                decl: {
                    start: {
                        line: 158,
                        column: 101
                    },
                    end: {
                        line: 158,
                        column: 102
                    }
                },
                loc: {
                    start: {
                        line: 158,
                        column: 135
                    },
                    end: {
                        line: 214,
                        column: 13
                    }
                },
                line: 158
            },
            '14': {
                name: 'allAddresses',
                decl: {
                    start: {
                        line: 167,
                        column: 25
                    },
                    end: {
                        line: 167,
                        column: 37
                    }
                },
                loc: {
                    start: {
                        line: 167,
                        column: 70
                    },
                    end: {
                        line: 173,
                        column: 17
                    }
                },
                line: 167
            },
            '15': {
                name: '(anonymous_15)',
                decl: {
                    start: {
                        line: 169,
                        column: 47
                    },
                    end: {
                        line: 169,
                        column: 48
                    }
                },
                loc: {
                    start: {
                        line: 169,
                        column: 52
                    },
                    end: {
                        line: 169,
                        column: 61
                    }
                },
                line: 169
            },
            '16': {
                name: '(anonymous_16)',
                decl: {
                    start: {
                        line: 178,
                        column: 106
                    },
                    end: {
                        line: 178,
                        column: 107
                    }
                },
                loc: {
                    start: {
                        line: 178,
                        column: 112
                    },
                    end: {
                        line: 190,
                        column: 17
                    }
                },
                line: 178
            },
            '17': {
                name: '(anonymous_17)',
                decl: {
                    start: {
                        line: 182,
                        column: 73
                    },
                    end: {
                        line: 182,
                        column: 74
                    }
                },
                loc: {
                    start: {
                        line: 182,
                        column: 78
                    },
                    end: {
                        line: 188,
                        column: 21
                    }
                },
                line: 182
            },
            '18': {
                name: '(anonymous_18)',
                decl: {
                    start: {
                        line: 192,
                        column: 21
                    },
                    end: {
                        line: 192,
                        column: 22
                    }
                },
                loc: {
                    start: {
                        line: 192,
                        column: 87
                    },
                    end: {
                        line: 192,
                        column: 89
                    }
                },
                line: 192
            },
            '19': {
                name: '(anonymous_19)',
                decl: {
                    start: {
                        line: 195,
                        column: 99
                    },
                    end: {
                        line: 195,
                        column: 100
                    }
                },
                loc: {
                    start: {
                        line: 195,
                        column: 105
                    },
                    end: {
                        line: 195,
                        column: 112
                    }
                },
                line: 195
            },
            '20': {
                name: '(anonymous_20)',
                decl: {
                    start: {
                        line: 197,
                        column: 151
                    },
                    end: {
                        line: 197,
                        column: 152
                    }
                },
                loc: {
                    start: {
                        line: 197,
                        column: 157
                    },
                    end: {
                        line: 210,
                        column: 17
                    }
                },
                line: 197
            },
            '21': {
                name: '(anonymous_21)',
                decl: {
                    start: {
                        line: 206,
                        column: 109
                    },
                    end: {
                        line: 206,
                        column: 110
                    }
                },
                loc: {
                    start: {
                        line: 206,
                        column: 116
                    },
                    end: {
                        line: 209,
                        column: 21
                    }
                },
                line: 206
            },
            '22': {
                name: '(anonymous_22)',
                decl: {
                    start: {
                        line: 218,
                        column: 4
                    },
                    end: {
                        line: 218,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 218,
                        column: 113
                    },
                    end: {
                        line: 224,
                        column: 5
                    }
                },
                line: 218
            },
            '23': {
                name: '(anonymous_23)',
                decl: {
                    start: {
                        line: 226,
                        column: 4
                    },
                    end: {
                        line: 226,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 226,
                        column: 126
                    },
                    end: {
                        line: 233,
                        column: 5
                    }
                },
                line: 226
            },
            '24': {
                name: '(anonymous_24)',
                decl: {
                    start: {
                        line: 235,
                        column: 4
                    },
                    end: {
                        line: 235,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 239,
                        column: 23
                    },
                    end: {
                        line: 251,
                        column: 5
                    }
                },
                line: 239
            },
            '25': {
                name: '(anonymous_25)',
                decl: {
                    start: {
                        line: 249,
                        column: 20
                    },
                    end: {
                        line: 249,
                        column: 21
                    }
                },
                loc: {
                    start: {
                        line: 249,
                        column: 25
                    },
                    end: {
                        line: 249,
                        column: 31
                    }
                },
                line: 249
            }
        },
        branchMap: {
            '0': {
                loc: {
                    start: {
                        line: 33,
                        column: 36
                    },
                    end: {
                        line: 33,
                        column: 122
                    }
                },
                type: 'cond-expr',
                locations: [{
                    start: {
                        line: 33,
                        column: 75
                    },
                    end: {
                        line: 33,
                        column: 79
                    }
                }, {
                    start: {
                        line: 33,
                        column: 82
                    },
                    end: {
                        line: 33,
                        column: 122
                    }
                }],
                line: 33
            },
            '1': {
                loc: {
                    start: {
                        line: 36,
                        column: 16
                    },
                    end: {
                        line: 38,
                        column: 17
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 36,
                        column: 16
                    },
                    end: {
                        line: 38,
                        column: 17
                    }
                }, {
                    start: {
                        line: 36,
                        column: 16
                    },
                    end: {
                        line: 38,
                        column: 17
                    }
                }],
                line: 36
            },
            '2': {
                loc: {
                    start: {
                        line: 48,
                        column: 12
                    },
                    end: {
                        line: 50,
                        column: 13
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 48,
                        column: 12
                    },
                    end: {
                        line: 50,
                        column: 13
                    }
                }, {
                    start: {
                        line: 48,
                        column: 12
                    },
                    end: {
                        line: 50,
                        column: 13
                    }
                }],
                line: 48
            },
            '3': {
                loc: {
                    start: {
                        line: 75,
                        column: 28
                    },
                    end: {
                        line: 75,
                        column: 52
                    }
                },
                type: 'cond-expr',
                locations: [{
                    start: {
                        line: 75,
                        column: 43
                    },
                    end: {
                        line: 75,
                        column: 45
                    }
                }, {
                    start: {
                        line: 75,
                        column: 48
                    },
                    end: {
                        line: 75,
                        column: 52
                    }
                }],
                line: 75
            },
            '4': {
                loc: {
                    start: {
                        line: 77,
                        column: 8
                    },
                    end: {
                        line: 79,
                        column: 9
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 77,
                        column: 8
                    },
                    end: {
                        line: 79,
                        column: 9
                    }
                }, {
                    start: {
                        line: 77,
                        column: 8
                    },
                    end: {
                        line: 79,
                        column: 9
                    }
                }],
                line: 77
            },
            '5': {
                loc: {
                    start: {
                        line: 112,
                        column: 8
                    },
                    end: {
                        line: 114,
                        column: 9
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 112,
                        column: 8
                    },
                    end: {
                        line: 114,
                        column: 9
                    }
                }, {
                    start: {
                        line: 112,
                        column: 8
                    },
                    end: {
                        line: 114,
                        column: 9
                    }
                }],
                line: 112
            },
            '6': {
                loc: {
                    start: {
                        line: 131,
                        column: 20
                    },
                    end: {
                        line: 131,
                        column: 40
                    }
                },
                type: 'binary-expr',
                locations: [{
                    start: {
                        line: 131,
                        column: 20
                    },
                    end: {
                        line: 131,
                        column: 31
                    }
                }, {
                    start: {
                        line: 131,
                        column: 35
                    },
                    end: {
                        line: 131,
                        column: 40
                    }
                }],
                line: 131
            },
            '7': {
                loc: {
                    start: {
                        line: 154,
                        column: 8
                    },
                    end: {
                        line: 156,
                        column: 9
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 154,
                        column: 8
                    },
                    end: {
                        line: 156,
                        column: 9
                    }
                }, {
                    start: {
                        line: 154,
                        column: 8
                    },
                    end: {
                        line: 156,
                        column: 9
                    }
                }],
                line: 154
            },
            '8': {
                loc: {
                    start: {
                        line: 183,
                        column: 24
                    },
                    end: {
                        line: 187,
                        column: 25
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 183,
                        column: 24
                    },
                    end: {
                        line: 187,
                        column: 25
                    }
                }, {
                    start: {
                        line: 183,
                        column: 24
                    },
                    end: {
                        line: 187,
                        column: 25
                    }
                }],
                line: 183
            },
            '9': {
                loc: {
                    start: {
                        line: 184,
                        column: 28
                    },
                    end: {
                        line: 186,
                        column: 29
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 184,
                        column: 28
                    },
                    end: {
                        line: 186,
                        column: 29
                    }
                }, {
                    start: {
                        line: 184,
                        column: 28
                    },
                    end: {
                        line: 186,
                        column: 29
                    }
                }],
                line: 184
            },
            '10': {
                loc: {
                    start: {
                        line: 203,
                        column: 24
                    },
                    end: {
                        line: 203,
                        column: 44
                    }
                },
                type: 'binary-expr',
                locations: [{
                    start: {
                        line: 203,
                        column: 24
                    },
                    end: {
                        line: 203,
                        column: 35
                    }
                }, {
                    start: {
                        line: 203,
                        column: 39
                    },
                    end: {
                        line: 203,
                        column: 44
                    }
                }],
                line: 203
            },
            '11': {
                loc: {
                    start: {
                        line: 220,
                        column: 8
                    },
                    end: {
                        line: 222,
                        column: 9
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 220,
                        column: 8
                    },
                    end: {
                        line: 222,
                        column: 9
                    }
                }, {
                    start: {
                        line: 220,
                        column: 8
                    },
                    end: {
                        line: 222,
                        column: 9
                    }
                }],
                line: 220
            },
            '12': {
                loc: {
                    start: {
                        line: 228,
                        column: 8
                    },
                    end: {
                        line: 230,
                        column: 9
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 228,
                        column: 8
                    },
                    end: {
                        line: 230,
                        column: 9
                    }
                }, {
                    start: {
                        line: 228,
                        column: 8
                    },
                    end: {
                        line: 230,
                        column: 9
                    }
                }],
                line: 228
            },
            '13': {
                loc: {
                    start: {
                        line: 231,
                        column: 24
                    },
                    end: {
                        line: 231,
                        column: 83
                    }
                },
                type: 'cond-expr',
                locations: [{
                    start: {
                        line: 231,
                        column: 44
                    },
                    end: {
                        line: 231,
                        column: 62
                    }
                }, {
                    start: {
                        line: 231,
                        column: 65
                    },
                    end: {
                        line: 231,
                        column: 83
                    }
                }],
                line: 231
            },
            '14': {
                loc: {
                    start: {
                        line: 241,
                        column: 8
                    },
                    end: {
                        line: 250,
                        column: 9
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 241,
                        column: 8
                    },
                    end: {
                        line: 250,
                        column: 9
                    }
                }, {
                    start: {
                        line: 241,
                        column: 8
                    },
                    end: {
                        line: 250,
                        column: 9
                    }
                }],
                line: 241
            }
        },
        s: {
            '0': 0,
            '1': 0,
            '2': 0,
            '3': 0,
            '4': 0,
            '5': 0,
            '6': 0,
            '7': 0,
            '8': 0,
            '9': 0,
            '10': 0,
            '11': 0,
            '12': 0,
            '13': 0,
            '14': 0,
            '15': 0,
            '16': 0,
            '17': 0,
            '18': 0,
            '19': 0,
            '20': 0,
            '21': 0,
            '22': 0,
            '23': 0,
            '24': 0,
            '25': 0,
            '26': 0,
            '27': 0,
            '28': 0,
            '29': 0,
            '30': 0,
            '31': 0,
            '32': 0,
            '33': 0,
            '34': 0,
            '35': 0,
            '36': 0,
            '37': 0,
            '38': 0,
            '39': 0,
            '40': 0,
            '41': 0,
            '42': 0,
            '43': 0,
            '44': 0,
            '45': 0,
            '46': 0,
            '47': 0,
            '48': 0,
            '49': 0,
            '50': 0,
            '51': 0,
            '52': 0,
            '53': 0,
            '54': 0,
            '55': 0,
            '56': 0,
            '57': 0,
            '58': 0,
            '59': 0,
            '60': 0,
            '61': 0,
            '62': 0,
            '63': 0,
            '64': 0,
            '65': 0,
            '66': 0,
            '67': 0,
            '68': 0,
            '69': 0,
            '70': 0,
            '71': 0,
            '72': 0,
            '73': 0,
            '74': 0,
            '75': 0,
            '76': 0,
            '77': 0
        },
        f: {
            '0': 0,
            '1': 0,
            '2': 0,
            '3': 0,
            '4': 0,
            '5': 0,
            '6': 0,
            '7': 0,
            '8': 0,
            '9': 0,
            '10': 0,
            '11': 0,
            '12': 0,
            '13': 0,
            '14': 0,
            '15': 0,
            '16': 0,
            '17': 0,
            '18': 0,
            '19': 0,
            '20': 0,
            '21': 0,
            '22': 0,
            '23': 0,
            '24': 0,
            '25': 0
        },
        b: {
            '0': [0, 0],
            '1': [0, 0],
            '2': [0, 0],
            '3': [0, 0],
            '4': [0, 0],
            '5': [0, 0],
            '6': [0, 0],
            '7': [0, 0],
            '8': [0, 0],
            '9': [0, 0],
            '10': [0, 0],
            '11': [0, 0],
            '12': [0, 0],
            '13': [0, 0],
            '14': [0, 0]
        },
        _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
        return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
}();

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.WorkerDiscovery = undefined;

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _stream = require('../utils/stream');

var _outside = require('./worker/outside');

var _bitcoinjsLibZcash = require('bitcoinjs-lib-zcash');

var _simpleWorkerChannel = require('../utils/simple-worker-channel');

var _addressSource = require('../address-source');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var WorkerDiscovery = exports.WorkerDiscovery = function () {
    function WorkerDiscovery(discoveryWorkerFactory, fastXpubWorker, fastXpubWasmPromise, chain) {
        var _this = this;

        _classCallCheck(this, WorkerDiscovery);

        this.forceAddedTransactions = [];
        this.forceAddedTransactionsEmitter = new _stream.Emitter();
        this.forceAddedTransactionsStream = _stream.Stream.fromEmitter(this.forceAddedTransactionsEmitter, function () {
            cov_qzo1qkpwm.f[4]++;
        }).map(function () {
            cov_qzo1qkpwm.f[5]++;
            cov_qzo1qkpwm.s[13]++;
            return 'block';
        });
        cov_qzo1qkpwm.f[0]++;
        cov_qzo1qkpwm.s[0]++;

        this.discoveryWorkerFactory = discoveryWorkerFactory;
        // $FlowIssue
        cov_qzo1qkpwm.s[1]++;
        this.addressWorkerChannel = typeof WebAssembly === 'undefined' ? (cov_qzo1qkpwm.b[0][0]++, null) : (cov_qzo1qkpwm.b[0][1]++, new _simpleWorkerChannel.WorkerChannel(fastXpubWorker));
        cov_qzo1qkpwm.s[2]++;
        fastXpubWasmPromise.then(function (binary) {
            cov_qzo1qkpwm.f[1]++;
            cov_qzo1qkpwm.s[3]++;

            if (_this.addressWorkerChannel !== null) {
                cov_qzo1qkpwm.b[1][0]++;
                cov_qzo1qkpwm.s[4]++;

                fastXpubWorker.postMessage({ type: 'init', binary: binary });
            } else {
                cov_qzo1qkpwm.b[1][1]++;
            }
        }, function (error) {
            cov_qzo1qkpwm.f[2]++;
            cov_qzo1qkpwm.s[5]++;
            return console.error(error);
        });
        cov_qzo1qkpwm.s[6]++;
        this.chain = chain;
    }

    _createClass(WorkerDiscovery, [{
        key: 'tryHDNode',
        value: function tryHDNode(xpub, network) {
            cov_qzo1qkpwm.f[3]++;
            cov_qzo1qkpwm.s[7]++;

            try {
                var node = (cov_qzo1qkpwm.s[8]++, _bitcoinjsLibZcash.HDNode.fromBase58(xpub, network, true));
                cov_qzo1qkpwm.s[9]++;
                if (!node.isNeutered()) {
                    cov_qzo1qkpwm.b[2][0]++;
                    cov_qzo1qkpwm.s[10]++;

                    throw new Error('XPRV entrered instead of XPUB. Exiting.');
                } else {
                    cov_qzo1qkpwm.b[2][1]++;
                }
                cov_qzo1qkpwm.s[11]++;
                return node;
            } catch (e) {
                cov_qzo1qkpwm.s[12]++;

                return e;
            }
        }
    }, {
        key: 'forceAddTransaction',


        // useful for adding transactions right after succesful send
        value: function forceAddTransaction(transaction) {
            cov_qzo1qkpwm.f[6]++;
            cov_qzo1qkpwm.s[14]++;

            this.forceAddedTransactions.push(transaction);
            cov_qzo1qkpwm.s[15]++;
            this.forceAddedTransactionsEmitter.emit(true);
        }
    }, {
        key: 'detectUsedAccount',
        value: function detectUsedAccount(xpub, network, segwit, gap_) {
            var _this2 = this;

            cov_qzo1qkpwm.f[7]++;

            var gap = (cov_qzo1qkpwm.s[16]++, gap_ == null ? (cov_qzo1qkpwm.b[3][0]++, 20) : (cov_qzo1qkpwm.b[3][1]++, gap_));
            var node = (cov_qzo1qkpwm.s[17]++, this.tryHDNode(xpub, network));
            cov_qzo1qkpwm.s[18]++;
            if (node instanceof Error) {
                cov_qzo1qkpwm.b[4][0]++;
                cov_qzo1qkpwm.s[19]++;

                return Promise.reject(node);
            } else {
                cov_qzo1qkpwm.b[4][1]++;
            }
            var external = (cov_qzo1qkpwm.s[20]++, node.derive(0));
            var internal = (cov_qzo1qkpwm.s[21]++, node.derive(1));

            var sources = (cov_qzo1qkpwm.s[22]++, [this.createAddressSource(external, network, segwit), this.createAddressSource(internal, network, segwit)]);
            // I do not actually need to do any logic in the separate worker for discovery

            cov_qzo1qkpwm.s[23]++;
            return Promise.all([_outside.WorkerDiscoveryHandler.deriveAddresses(sources[0], null, 0, gap - 1), _outside.WorkerDiscoveryHandler.deriveAddresses(sources[1], null, 0, gap - 1)]).then(function (_ref) {
                var _ref2 = _slicedToArray(_ref, 2),
                    addressesA = _ref2[0],
                    addressesB = _ref2[1];

                cov_qzo1qkpwm.f[8]++;
                cov_qzo1qkpwm.s[24]++;
                return _this2.chain.lookupTransactionsIds(addressesA.concat(addressesB), 100000000, 0);
            }).then(function (ids) {
                cov_qzo1qkpwm.f[9]++;
                cov_qzo1qkpwm.s[25]++;
                return ids.length !== 0;
            });
        }
    }, {
        key: 'discoverAccount',
        value: function discoverAccount(initial, xpub, network, segwit, cashAddress, gap,

        // what (new Date().getTimezoneOffset()) returns
        // note that it is NEGATIVE from the UTC string timezone
        // so, UTC+2 timezone returns -120...
        timeOffset) {
            var _this3 = this;

            cov_qzo1qkpwm.f[10]++;

            var node = (cov_qzo1qkpwm.s[26]++, this.tryHDNode(xpub, network));
            cov_qzo1qkpwm.s[27]++;
            if (node instanceof Error) {
                cov_qzo1qkpwm.b[5][0]++;
                cov_qzo1qkpwm.s[28]++;

                return _stream.StreamWithEnding.fromStreamAndPromise(_stream.Stream.fromArray([]), Promise.reject(node));
            } else {
                cov_qzo1qkpwm.b[5][1]++;
            }

            cov_qzo1qkpwm.s[29]++;
            return _stream.StreamWithEnding.fromPromise(Promise.all([this.deriveXpub(xpub, network, 0), this.deriveXpub(xpub, network, 1)]).then(function (_ref3) {
                var _ref4 = _slicedToArray(_ref3, 2),
                    externalXpub = _ref4[0],
                    internalXpub = _ref4[1];

                cov_qzo1qkpwm.f[11]++;

                var internal = (cov_qzo1qkpwm.s[30]++, _bitcoinjsLibZcash.HDNode.fromBase58(internalXpub, network, true));
                var external = (cov_qzo1qkpwm.s[31]++, _bitcoinjsLibZcash.HDNode.fromBase58(externalXpub, network, true));

                var sources = (cov_qzo1qkpwm.s[32]++, [_this3.createWorkerAddressSource(external, network, segwit), _this3.createWorkerAddressSource(internal, network, segwit)]);

                var out = (cov_qzo1qkpwm.s[33]++, new _outside.WorkerDiscoveryHandler(_this3.discoveryWorkerFactory, _this3.chain, sources, network, (cov_qzo1qkpwm.b[6][0]++, cashAddress) || (cov_qzo1qkpwm.b[6][1]++, false), _this3.forceAddedTransactions));
                cov_qzo1qkpwm.s[34]++;
                return out.discovery(initial, xpub, segwit === 'p2sh', gap, timeOffset);
            }));
        }
    }, {
        key: 'monitorAccountActivity',
        value: function monitorAccountActivity(initial, xpub, network, segwit, cashAddress, gap,

        // what (new Date().getTimezoneOffset()) returns
        // note that it is NEGATIVE from the UTC string timezone
        // so, UTC+2 timezone returns -120...
        timeOffset) {
            var _this4 = this;

            cov_qzo1qkpwm.f[12]++;

            var node = (cov_qzo1qkpwm.s[35]++, this.tryHDNode(xpub, network));
            cov_qzo1qkpwm.s[36]++;
            if (node instanceof Error) {
                cov_qzo1qkpwm.b[7][0]++;
                cov_qzo1qkpwm.s[37]++;

                return _stream.Stream.simple(node);
            } else {
                cov_qzo1qkpwm.b[7][1]++;
            }
            cov_qzo1qkpwm.s[38]++;
            return _stream.Stream.fromPromise(Promise.all([this.deriveXpub(xpub, network, 0), this.deriveXpub(xpub, network, 1)]).then(function (_ref5) {
                var _ref6 = _slicedToArray(_ref5, 2),
                    externalXpub = _ref6[0],
                    internalXpub = _ref6[1];

                cov_qzo1qkpwm.f[13]++;

                var internal = (cov_qzo1qkpwm.s[39]++, _bitcoinjsLibZcash.HDNode.fromBase58(internalXpub, network, true));
                var external = (cov_qzo1qkpwm.s[40]++, _bitcoinjsLibZcash.HDNode.fromBase58(externalXpub, network, true));

                var sources = (cov_qzo1qkpwm.s[41]++, [_this4.createWorkerAddressSource(external, network, segwit), _this4.createWorkerAddressSource(internal, network, segwit)]);

                function allAddresses(info) {
                    cov_qzo1qkpwm.f[14]++;
                    cov_qzo1qkpwm.s[42]++;

                    return new Set(info.usedAddresses.map(function (a) {
                        cov_qzo1qkpwm.f[15]++;
                        cov_qzo1qkpwm.s[43]++;
                        return a.address;
                    }).concat(info.unusedAddresses).concat(info.changeAddresses));
                }

                cov_qzo1qkpwm.s[44]++;
                _this4.chain.subscribe(allAddresses(initial));
                var currentState = (cov_qzo1qkpwm.s[45]++, initial);

                var txNotifs = (cov_qzo1qkpwm.s[46]++, _this4.chain.notifications.filter(function (tx) {
                    cov_qzo1qkpwm.f[16]++;

                    // determine if it's mine
                    var addresses = (cov_qzo1qkpwm.s[47]++, allAddresses(currentState));
                    var mine = (cov_qzo1qkpwm.s[48]++, false);
                    cov_qzo1qkpwm.s[49]++;
                    tx.inputAddresses.concat(tx.outputAddresses).forEach(function (a) {
                        cov_qzo1qkpwm.f[17]++;
                        cov_qzo1qkpwm.s[50]++;

                        if (a != null) {
                            cov_qzo1qkpwm.b[8][0]++;
                            cov_qzo1qkpwm.s[51]++;

                            if (addresses.has(a)) {
                                cov_qzo1qkpwm.b[9][0]++;
                                cov_qzo1qkpwm.s[52]++;

                                mine = true;
                            } else {
                                cov_qzo1qkpwm.b[9][1]++;
                            }
                        } else {
                            cov_qzo1qkpwm.b[8][1]++;
                        }
                    });
                    cov_qzo1qkpwm.s[53]++;
                    return mine;
                })
                // flow thing
                .map(function (tx) {
                    cov_qzo1qkpwm.f[18]++;
                    cov_qzo1qkpwm.s[54]++;
                    return tx;
                }));

                // we need to do updates on blocks, if there are unconfs
                var blockStream = (cov_qzo1qkpwm.s[55]++, _this4.chain.blocks.map(function () {
                    cov_qzo1qkpwm.f[19]++;
                    cov_qzo1qkpwm.s[56]++;
                    return 'block';
                }));

                var resNull = (cov_qzo1qkpwm.s[57]++, blockStream.concat(txNotifs).concat(_this4.forceAddedTransactionsStream).mapPromiseError(function () {
                    cov_qzo1qkpwm.f[20]++;

                    var out = (cov_qzo1qkpwm.s[58]++, new _outside.WorkerDiscoveryHandler(_this4.discoveryWorkerFactory, _this4.chain, sources, network, (cov_qzo1qkpwm.b[10][0]++, cashAddress) || (cov_qzo1qkpwm.b[10][1]++, false), _this4.forceAddedTransactions));
                    cov_qzo1qkpwm.s[59]++;
                    return out.discovery(currentState, xpub, segwit === 'p2sh', gap, timeOffset).ending.then(function (res) {
                        cov_qzo1qkpwm.f[21]++;
                        cov_qzo1qkpwm.s[60]++;

                        currentState = res;
                        cov_qzo1qkpwm.s[61]++;
                        return res;
                    });
                }));

                var res = (cov_qzo1qkpwm.s[62]++, _stream.Stream.filterNull(resNull));
                cov_qzo1qkpwm.s[63]++;
                return res;
            }));
        }
    }, {
        key: 'createAddressSource',
        value: function createAddressSource(node, network, segwit) {
            cov_qzo1qkpwm.f[22]++;

            var source = (cov_qzo1qkpwm.s[64]++, this.createWorkerAddressSource(node, network, segwit));
            cov_qzo1qkpwm.s[65]++;
            if (source == null) {
                cov_qzo1qkpwm.b[11][0]++;
                cov_qzo1qkpwm.s[66]++;

                return new _addressSource.BrowserAddressSource(node, network, segwit === 'p2sh');
            } else {
                cov_qzo1qkpwm.b[11][1]++;
            }
            cov_qzo1qkpwm.s[67]++;
            return source;
        }
    }, {
        key: 'createWorkerAddressSource',
        value: function createWorkerAddressSource(node, network, segwit) {
            cov_qzo1qkpwm.f[23]++;

            var addressWorkerChannel = (cov_qzo1qkpwm.s[68]++, this.addressWorkerChannel);
            cov_qzo1qkpwm.s[69]++;
            if (addressWorkerChannel == null) {
                cov_qzo1qkpwm.b[12][0]++;
                cov_qzo1qkpwm.s[70]++;

                return null;
            } else {
                cov_qzo1qkpwm.b[12][1]++;
            }
            var version = (cov_qzo1qkpwm.s[71]++, segwit === 'p2sh' ? (cov_qzo1qkpwm.b[13][0]++, network.scriptHash) : (cov_qzo1qkpwm.b[13][1]++, network.pubKeyHash));
            cov_qzo1qkpwm.s[72]++;
            return new _addressSource.WorkerAddressSource(addressWorkerChannel, node, version, segwit);
        }
    }, {
        key: 'deriveXpub',
        value: function deriveXpub(xpub, network, index) {
            cov_qzo1qkpwm.f[24]++;

            var addressWorkerChannel = (cov_qzo1qkpwm.s[73]++, this.addressWorkerChannel);
            cov_qzo1qkpwm.s[74]++;
            if (addressWorkerChannel == null) {
                cov_qzo1qkpwm.b[14][0]++;
                cov_qzo1qkpwm.s[75]++;

                return Promise.resolve(_bitcoinjsLibZcash.HDNode.fromBase58(xpub, network, true).derive(index).toBase58());
            } else {
                cov_qzo1qkpwm.b[14][1]++;
                cov_qzo1qkpwm.s[76]++;

                return addressWorkerChannel.postMessage({
                    type: 'deriveNode',
                    xpub: xpub,
                    version: network.bip32.public,
                    index: index
                }).then(function (x) {
                    cov_qzo1qkpwm.f[25]++;
                    cov_qzo1qkpwm.s[77]++;
                    return x.xpub;
                });
            }
        }
    }]);

    return WorkerDiscovery;
}();