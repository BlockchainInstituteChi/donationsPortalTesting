'use strict';

var cov_21wg7aantp = function () {
    var path = '/home/g/dev/hd-wallet/src/socketio-worker/outside.js',
        hash = 'd337ab63eea8c499b04f283d103871fc0f517cee',
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
        path: '/home/g/dev/hd-wallet/src/socketio-worker/outside.js',
        statementMap: {
            '0': {
                start: {
                    line: 13,
                    column: 23
                },
                end: {
                    line: 13,
                    column: 28
                }
            },
            '1': {
                start: {
                    line: 15,
                    column: 4
                },
                end: {
                    line: 15,
                    column: 28
                }
            },
            '2': {
                start: {
                    line: 26,
                    column: 8
                },
                end: {
                    line: 26,
                    column: 33
                }
            },
            '3': {
                start: {
                    line: 27,
                    column: 8
                },
                end: {
                    line: 27,
                    column: 61
                }
            },
            '4': {
                start: {
                    line: 28,
                    column: 8
                },
                end: {
                    line: 28,
                    column: 61
                }
            },
            '5': {
                start: {
                    line: 32,
                    column: 8
                },
                end: {
                    line: 32,
                    column: 72
                }
            },
            '6': {
                start: {
                    line: 32,
                    column: 45
                },
                end: {
                    line: 32,
                    column: 70
                }
            },
            '7': {
                start: {
                    line: 36,
                    column: 8
                },
                end: {
                    line: 36,
                    column: 57
                }
            },
            '8': {
                start: {
                    line: 36,
                    column: 39
                },
                end: {
                    line: 36,
                    column: 55
                }
            },
            '9': {
                start: {
                    line: 37,
                    column: 8
                },
                end: {
                    line: 39,
                    column: 20
                }
            },
            '10': {
                start: {
                    line: 38,
                    column: 12
                },
                end: {
                    line: 38,
                    column: 31
                }
            },
            '11': {
                start: {
                    line: 43,
                    column: 20
                },
                end: {
                    line: 43,
                    column: 97
                }
            },
            '12': {
                start: {
                    line: 43,
                    column: 69
                },
                end: {
                    line: 43,
                    column: 95
                }
            },
            '13': {
                start: {
                    line: 44,
                    column: 8
                },
                end: {
                    line: 44,
                    column: 31
                }
            },
            '14': {
                start: {
                    line: 45,
                    column: 8
                },
                end: {
                    line: 45,
                    column: 19
                }
            },
            '15': {
                start: {
                    line: 49,
                    column: 8
                },
                end: {
                    line: 49,
                    column: 102
                }
            },
            '16': {
                start: {
                    line: 49,
                    column: 45
                },
                end: {
                    line: 49,
                    column: 84
                }
            },
            '17': {
                start: {
                    line: 53,
                    column: 19
                },
                end: {
                    line: 53,
                    column: 87
                }
            },
            '18': {
                start: {
                    line: 54,
                    column: 29
                },
                end: {
                    line: 54,
                    column: 88
                }
            },
            '19': {
                start: {
                    line: 63,
                    column: 8
                },
                end: {
                    line: 63,
                    column: 43
                }
            },
            '20': {
                start: {
                    line: 64,
                    column: 8
                },
                end: {
                    line: 64,
                    column: 25
                }
            },
            '21': {
                start: {
                    line: 68,
                    column: 23
                },
                end: {
                    line: 68,
                    column: 43
                }
            },
            '22': {
                start: {
                    line: 69,
                    column: 20
                },
                end: {
                    line: 69,
                    column: 30
                }
            },
            '23': {
                start: {
                    line: 70,
                    column: 8
                },
                end: {
                    line: 80,
                    column: 10
                }
            },
            '24': {
                start: {
                    line: 71,
                    column: 25
                },
                end: {
                    line: 71,
                    column: 37
                }
            },
            '25': {
                start: {
                    line: 72,
                    column: 12
                },
                end: {
                    line: 79,
                    column: 13
                }
            },
            '26': {
                start: {
                    line: 73,
                    column: 31
                },
                end: {
                    line: 73,
                    column: 47
                }
            },
            '27': {
                start: {
                    line: 74,
                    column: 16
                },
                end: {
                    line: 78,
                    column: 17
                }
            },
            '28': {
                start: {
                    line: 75,
                    column: 20
                },
                end: {
                    line: 75,
                    column: 40
                }
            },
            '29': {
                start: {
                    line: 77,
                    column: 20
                },
                end: {
                    line: 77,
                    column: 64
                }
            },
            '30': {
                start: {
                    line: 82,
                    column: 8
                },
                end: {
                    line: 86,
                    column: 12
                }
            },
            '31': {
                start: {
                    line: 87,
                    column: 8
                },
                end: {
                    line: 87,
                    column: 27
                }
            },
            '32': {
                start: {
                    line: 91,
                    column: 8
                },
                end: {
                    line: 118,
                    column: 15
                }
            },
            '33': {
                start: {
                    line: 92,
                    column: 25
                },
                end: {
                    line: 92,
                    column: 61
                }
            },
            '34': {
                start: {
                    line: 94,
                    column: 16
                },
                end: {
                    line: 94,
                    column: 38
                }
            },
            '35': {
                start: {
                    line: 95,
                    column: 32
                },
                end: {
                    line: 95,
                    column: 45
                }
            },
            '36': {
                start: {
                    line: 96,
                    column: 16
                },
                end: {
                    line: 101,
                    column: 18
                }
            },
            '37': {
                start: {
                    line: 97,
                    column: 33
                },
                end: {
                    line: 97,
                    column: 45
                }
            },
            '38': {
                start: {
                    line: 98,
                    column: 20
                },
                end: {
                    line: 100,
                    column: 21
                }
            },
            '39': {
                start: {
                    line: 99,
                    column: 24
                },
                end: {
                    line: 99,
                    column: 55
                }
            },
            '40': {
                start: {
                    line: 102,
                    column: 16
                },
                end: {
                    line: 102,
                    column: 40
                }
            },
            '41': {
                start: {
                    line: 104,
                    column: 16
                },
                end: {
                    line: 115,
                    column: 19
                }
            },
            '42': {
                start: {
                    line: 105,
                    column: 20
                },
                end: {
                    line: 114,
                    column: 23
                }
            },
            '43': {
                start: {
                    line: 110,
                    column: 24
                },
                end: {
                    line: 112,
                    column: 27
                }
            },
            '44': {
                start: {
                    line: 113,
                    column: 24
                },
                end: {
                    line: 113,
                    column: 45
                }
            },
            '45': {
                start: {
                    line: 117,
                    column: 16
                },
                end: {
                    line: 117,
                    column: 23
                }
            },
            '46': {
                start: {
                    line: 122,
                    column: 8
                },
                end: {
                    line: 124,
                    column: 11
                }
            },
            '47': {
                start: {
                    line: 125,
                    column: 8
                },
                end: {
                    line: 128,
                    column: 9
                }
            },
            '48': {
                start: {
                    line: 126,
                    column: 12
                },
                end: {
                    line: 126,
                    column: 36
                }
            },
            '49': {
                start: {
                    line: 127,
                    column: 12
                },
                end: {
                    line: 127,
                    column: 33
                }
            },
            '50': {
                start: {
                    line: 132,
                    column: 8
                },
                end: {
                    line: 132,
                    column: 23
                }
            },
            '51': {
                start: {
                    line: 133,
                    column: 24
                },
                end: {
                    line: 133,
                    column: 36
                }
            },
            '52': {
                start: {
                    line: 134,
                    column: 8
                },
                end: {
                    line: 138,
                    column: 11
                }
            },
            '53': {
                start: {
                    line: 139,
                    column: 20
                },
                end: {
                    line: 139,
                    column: 30
                }
            },
            '54': {
                start: {
                    line: 140,
                    column: 8
                },
                end: {
                    line: 142,
                    column: 9
                }
            },
            '55': {
                start: {
                    line: 141,
                    column: 12
                },
                end: {
                    line: 141,
                    column: 69
                }
            },
            '56': {
                start: {
                    line: 143,
                    column: 8
                },
                end: {
                    line: 165,
                    column: 11
                }
            },
            '57': {
                start: {
                    line: 144,
                    column: 12
                },
                end: {
                    line: 146,
                    column: 13
                }
            },
            '58': {
                start: {
                    line: 145,
                    column: 16
                },
                end: {
                    line: 145,
                    column: 63
                }
            },
            '59': {
                start: {
                    line: 148,
                    column: 12
                },
                end: {
                    line: 156,
                    column: 13
                }
            },
            '60': {
                start: {
                    line: 149,
                    column: 40
                },
                end: {
                    line: 149,
                    column: 53
                }
            },
            '61': {
                start: {
                    line: 150,
                    column: 16
                },
                end: {
                    line: 154,
                    column: 17
                }
            },
            '62': {
                start: {
                    line: 151,
                    column: 20
                },
                end: {
                    line: 151,
                    column: 38
                }
            },
            '63': {
                start: {
                    line: 153,
                    column: 20
                },
                end: {
                    line: 153,
                    column: 40
                }
            },
            '64': {
                start: {
                    line: 155,
                    column: 16
                },
                end: {
                    line: 155,
                    column: 25
                }
            },
            '65': {
                start: {
                    line: 161,
                    column: 12
                },
                end: {
                    line: 164,
                    column: 13
                }
            },
            '66': {
                start: {
                    line: 162,
                    column: 16
                },
                end: {
                    line: 162,
                    column: 62
                }
            },
            '67': {
                start: {
                    line: 163,
                    column: 16
                },
                end: {
                    line: 163,
                    column: 25
                }
            },
            '68': {
                start: {
                    line: 166,
                    column: 8
                },
                end: {
                    line: 166,
                    column: 27
                }
            },
            '69': {
                start: {
                    line: 170,
                    column: 8
                },
                end: {
                    line: 170,
                    column: 23
                }
            },
            '70': {
                start: {
                    line: 171,
                    column: 24
                },
                end: {
                    line: 171,
                    column: 36
                }
            },
            '71': {
                start: {
                    line: 172,
                    column: 8
                },
                end: {
                    line: 176,
                    column: 11
                }
            },
            '72': {
                start: {
                    line: 179,
                    column: 57
                },
                end: {
                    line: 179,
                    column: 70
                }
            },
            '73': {
                start: {
                    line: 181,
                    column: 8
                },
                end: {
                    line: 195,
                    column: 11
                }
            },
            '74': {
                start: {
                    line: 184,
                    column: 16
                },
                end: {
                    line: 188,
                    column: 19
                }
            },
            '75': {
                start: {
                    line: 191,
                    column: 29
                },
                end: {
                    line: 191,
                    column: 79
                }
            },
            '76': {
                start: {
                    line: 194,
                    column: 12
                },
                end: {
                    line: 194,
                    column: 32
                }
            },
            '77': {
                start: {
                    line: 199,
                    column: 8
                },
                end: {
                    line: 203,
                    column: 11
                }
            },
            '78': {
                start: {
                    line: 208,
                    column: 31
                },
                end: {
                    line: 208,
                    column: 43
                }
            },
            '79': {
                start: {
                    line: 209,
                    column: 8
                },
                end: {
                    line: 211,
                    column: 9
                }
            },
            '80': {
                start: {
                    line: 210,
                    column: 12
                },
                end: {
                    line: 210,
                    column: 60
                }
            },
            '81': {
                start: {
                    line: 213,
                    column: 8
                },
                end: {
                    line: 213,
                    column: 52
                }
            }
        },
        fnMap: {
            '0': {
                name: 'setLogCommunication',
                decl: {
                    start: {
                        line: 14,
                        column: 16
                    },
                    end: {
                        line: 14,
                        column: 35
                    }
                },
                loc: {
                    start: {
                        line: 14,
                        column: 38
                    },
                    end: {
                        line: 16,
                        column: 1
                    }
                },
                line: 14
            },
            '1': {
                name: '(anonymous_1)',
                decl: {
                    start: {
                        line: 25,
                        column: 4
                    },
                    end: {
                        line: 25,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 25,
                        column: 70
                    },
                    end: {
                        line: 29,
                        column: 5
                    }
                },
                line: 25
            },
            '2': {
                name: '(anonymous_2)',
                decl: {
                    start: {
                        line: 31,
                        column: 4
                    },
                    end: {
                        line: 31,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 31,
                        column: 40
                    },
                    end: {
                        line: 33,
                        column: 5
                    }
                },
                line: 31
            },
            '3': {
                name: '(anonymous_3)',
                decl: {
                    start: {
                        line: 32,
                        column: 39
                    },
                    end: {
                        line: 32,
                        column: 40
                    }
                },
                loc: {
                    start: {
                        line: 32,
                        column: 45
                    },
                    end: {
                        line: 32,
                        column: 70
                    }
                },
                line: 32
            },
            '4': {
                name: '(anonymous_4)',
                decl: {
                    start: {
                        line: 35,
                        column: 4
                    },
                    end: {
                        line: 35,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 35,
                        column: 12
                    },
                    end: {
                        line: 40,
                        column: 5
                    }
                },
                line: 35
            },
            '5': {
                name: '(anonymous_5)',
                decl: {
                    start: {
                        line: 36,
                        column: 29
                    },
                    end: {
                        line: 36,
                        column: 30
                    }
                },
                loc: {
                    start: {
                        line: 36,
                        column: 39
                    },
                    end: {
                        line: 36,
                        column: 55
                    }
                },
                line: 36
            },
            '6': {
                name: '(anonymous_6)',
                decl: {
                    start: {
                        line: 37,
                        column: 32
                    },
                    end: {
                        line: 37,
                        column: 33
                    }
                },
                loc: {
                    start: {
                        line: 38,
                        column: 12
                    },
                    end: {
                        line: 38,
                        column: 31
                    }
                },
                line: 38
            },
            '7': {
                name: '(anonymous_7)',
                decl: {
                    start: {
                        line: 39,
                        column: 10
                    },
                    end: {
                        line: 39,
                        column: 11
                    }
                },
                loc: {
                    start: {
                        line: 39,
                        column: 16
                    },
                    end: {
                        line: 39,
                        column: 18
                    }
                },
                line: 39
            },
            '8': {
                name: '(anonymous_8)',
                decl: {
                    start: {
                        line: 42,
                        column: 4
                    },
                    end: {
                        line: 42,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 42,
                        column: 40
                    },
                    end: {
                        line: 46,
                        column: 5
                    }
                },
                line: 42
            },
            '9': {
                name: '(anonymous_9)',
                decl: {
                    start: {
                        line: 43,
                        column: 63
                    },
                    end: {
                        line: 43,
                        column: 64
                    }
                },
                loc: {
                    start: {
                        line: 43,
                        column: 69
                    },
                    end: {
                        line: 43,
                        column: 95
                    }
                },
                line: 43
            },
            '10': {
                name: '(anonymous_10)',
                decl: {
                    start: {
                        line: 48,
                        column: 4
                    },
                    end: {
                        line: 48,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 48,
                        column: 52
                    },
                    end: {
                        line: 50,
                        column: 5
                    }
                },
                line: 48
            },
            '11': {
                name: '(anonymous_11)',
                decl: {
                    start: {
                        line: 49,
                        column: 39
                    },
                    end: {
                        line: 49,
                        column: 40
                    }
                },
                loc: {
                    start: {
                        line: 49,
                        column: 45
                    },
                    end: {
                        line: 49,
                        column: 84
                    }
                },
                line: 49
            },
            '12': {
                name: '(anonymous_12)',
                decl: {
                    start: {
                        line: 49,
                        column: 92
                    },
                    end: {
                        line: 49,
                        column: 93
                    }
                },
                loc: {
                    start: {
                        line: 49,
                        column: 98
                    },
                    end: {
                        line: 49,
                        column: 100
                    }
                },
                line: 49
            },
            '13': {
                name: '(anonymous_13)',
                decl: {
                    start: {
                        line: 62,
                        column: 4
                    },
                    end: {
                        line: 62,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 62,
                        column: 45
                    },
                    end: {
                        line: 65,
                        column: 5
                    }
                },
                line: 62
            },
            '14': {
                name: '(anonymous_14)',
                decl: {
                    start: {
                        line: 67,
                        column: 4
                    },
                    end: {
                        line: 67,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 67,
                        column: 64
                    },
                    end: {
                        line: 88,
                        column: 5
                    }
                },
                line: 67
            },
            '15': {
                name: '(anonymous_15)',
                decl: {
                    start: {
                        line: 70,
                        column: 27
                    },
                    end: {
                        line: 70,
                        column: 28
                    }
                },
                loc: {
                    start: {
                        line: 70,
                        column: 40
                    },
                    end: {
                        line: 80,
                        column: 9
                    }
                },
                line: 70
            },
            '16': {
                name: '(anonymous_16)',
                decl: {
                    start: {
                        line: 90,
                        column: 4
                    },
                    end: {
                        line: 90,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 90,
                        column: 42
                    },
                    end: {
                        line: 119,
                        column: 5
                    }
                },
                line: 90
            },
            '17': {
                name: '(anonymous_17)',
                decl: {
                    start: {
                        line: 92,
                        column: 19
                    },
                    end: {
                        line: 92,
                        column: 20
                    }
                },
                loc: {
                    start: {
                        line: 92,
                        column: 25
                    },
                    end: {
                        line: 92,
                        column: 61
                    }
                },
                line: 92
            },
            '18': {
                name: '(anonymous_18)',
                decl: {
                    start: {
                        line: 93,
                        column: 18
                    },
                    end: {
                        line: 93,
                        column: 19
                    }
                },
                loc: {
                    start: {
                        line: 93,
                        column: 30
                    },
                    end: {
                        line: 118,
                        column: 13
                    }
                },
                line: 93
            },
            '19': {
                name: '(anonymous_19)',
                decl: {
                    start: {
                        line: 96,
                        column: 35
                    },
                    end: {
                        line: 96,
                        column: 36
                    }
                },
                loc: {
                    start: {
                        line: 96,
                        column: 48
                    },
                    end: {
                        line: 101,
                        column: 17
                    }
                },
                line: 96
            },
            '20': {
                name: '(anonymous_20)',
                decl: {
                    start: {
                        line: 104,
                        column: 45
                    },
                    end: {
                        line: 104,
                        column: 46
                    }
                },
                loc: {
                    start: {
                        line: 104,
                        column: 53
                    },
                    end: {
                        line: 115,
                        column: 17
                    }
                },
                line: 104
            },
            '21': {
                name: '(anonymous_21)',
                decl: {
                    start: {
                        line: 105,
                        column: 43
                    },
                    end: {
                        line: 105,
                        column: 44
                    }
                },
                loc: {
                    start: {
                        line: 105,
                        column: 49
                    },
                    end: {
                        line: 114,
                        column: 21
                    }
                },
                line: 105
            },
            '22': {
                name: '(anonymous_22)',
                decl: {
                    start: {
                        line: 121,
                        column: 4
                    },
                    end: {
                        line: 121,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 121,
                        column: 12
                    },
                    end: {
                        line: 129,
                        column: 5
                    }
                },
                line: 121
            },
            '23': {
                name: '(anonymous_23)',
                decl: {
                    start: {
                        line: 131,
                        column: 4
                    },
                    end: {
                        line: 131,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 131,
                        column: 40
                    },
                    end: {
                        line: 167,
                        column: 5
                    }
                },
                line: 131
            },
            '24': {
                name: '(anonymous_24)',
                decl: {
                    start: {
                        line: 143,
                        column: 29
                    },
                    end: {
                        line: 143,
                        column: 30
                    }
                },
                loc: {
                    start: {
                        line: 143,
                        column: 50
                    },
                    end: {
                        line: 165,
                        column: 9
                    }
                },
                line: 143
            },
            '25': {
                name: '(anonymous_25)',
                decl: {
                    start: {
                        line: 169,
                        column: 4
                    },
                    end: {
                        line: 169,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 169,
                        column: 40
                    },
                    end: {
                        line: 196,
                        column: 5
                    }
                },
                line: 169
            },
            '26': {
                name: '(anonymous_26)',
                decl: {
                    start: {
                        line: 183,
                        column: 12
                    },
                    end: {
                        line: 183,
                        column: 13
                    }
                },
                loc: {
                    start: {
                        line: 183,
                        column: 18
                    },
                    end: {
                        line: 189,
                        column: 13
                    }
                },
                line: 183
            },
            '27': {
                name: '(anonymous_27)',
                decl: {
                    start: {
                        line: 191,
                        column: 16
                    },
                    end: {
                        line: 191,
                        column: 17
                    }
                },
                loc: {
                    start: {
                        line: 191,
                        column: 29
                    },
                    end: {
                        line: 191,
                        column: 79
                    }
                },
                line: 191
            },
            '28': {
                name: '(anonymous_28)',
                decl: {
                    start: {
                        line: 192,
                        column: 13
                    },
                    end: {
                        line: 192,
                        column: 14
                    }
                },
                loc: {
                    start: {
                        line: 192,
                        column: 26
                    },
                    end: {
                        line: 195,
                        column: 9
                    }
                },
                line: 192
            },
            '29': {
                name: '(anonymous_29)',
                decl: {
                    start: {
                        line: 198,
                        column: 4
                    },
                    end: {
                        line: 198,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 198,
                        column: 52
                    },
                    end: {
                        line: 204,
                        column: 5
                    }
                },
                line: 198
            },
            '30': {
                name: '(anonymous_30)',
                decl: {
                    start: {
                        line: 206,
                        column: 4
                    },
                    end: {
                        line: 206,
                        column: 5
                    }
                },
                loc: {
                    start: {
                        line: 206,
                        column: 49
                    },
                    end: {
                        line: 214,
                        column: 5
                    }
                },
                line: 206
            }
        },
        branchMap: {
            '0': {
                loc: {
                    start: {
                        line: 72,
                        column: 12
                    },
                    end: {
                        line: 79,
                        column: 13
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 72,
                        column: 12
                    },
                    end: {
                        line: 79,
                        column: 13
                    }
                }, {
                    start: {
                        line: 72,
                        column: 12
                    },
                    end: {
                        line: 79,
                        column: 13
                    }
                }],
                line: 72
            },
            '1': {
                loc: {
                    start: {
                        line: 74,
                        column: 16
                    },
                    end: {
                        line: 78,
                        column: 17
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 74,
                        column: 16
                    },
                    end: {
                        line: 78,
                        column: 17
                    }
                }, {
                    start: {
                        line: 74,
                        column: 16
                    },
                    end: {
                        line: 78,
                        column: 17
                    }
                }],
                line: 74
            },
            '2': {
                loc: {
                    start: {
                        line: 98,
                        column: 20
                    },
                    end: {
                        line: 100,
                        column: 21
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 98,
                        column: 20
                    },
                    end: {
                        line: 100,
                        column: 21
                    }
                }, {
                    start: {
                        line: 98,
                        column: 20
                    },
                    end: {
                        line: 100,
                        column: 21
                    }
                }],
                line: 98
            },
            '3': {
                loc: {
                    start: {
                        line: 125,
                        column: 8
                    },
                    end: {
                        line: 128,
                        column: 9
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 125,
                        column: 8
                    },
                    end: {
                        line: 128,
                        column: 9
                    }
                }, {
                    start: {
                        line: 125,
                        column: 8
                    },
                    end: {
                        line: 128,
                        column: 9
                    }
                }],
                line: 125
            },
            '4': {
                loc: {
                    start: {
                        line: 140,
                        column: 8
                    },
                    end: {
                        line: 142,
                        column: 9
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 140,
                        column: 8
                    },
                    end: {
                        line: 142,
                        column: 9
                    }
                }, {
                    start: {
                        line: 140,
                        column: 8
                    },
                    end: {
                        line: 142,
                        column: 9
                    }
                }],
                line: 140
            },
            '5': {
                loc: {
                    start: {
                        line: 144,
                        column: 12
                    },
                    end: {
                        line: 146,
                        column: 13
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 144,
                        column: 12
                    },
                    end: {
                        line: 146,
                        column: 13
                    }
                }, {
                    start: {
                        line: 144,
                        column: 12
                    },
                    end: {
                        line: 146,
                        column: 13
                    }
                }],
                line: 144
            },
            '6': {
                loc: {
                    start: {
                        line: 148,
                        column: 12
                    },
                    end: {
                        line: 156,
                        column: 13
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 148,
                        column: 12
                    },
                    end: {
                        line: 156,
                        column: 13
                    }
                }, {
                    start: {
                        line: 148,
                        column: 12
                    },
                    end: {
                        line: 156,
                        column: 13
                    }
                }],
                line: 148
            },
            '7': {
                loc: {
                    start: {
                        line: 148,
                        column: 16
                    },
                    end: {
                        line: 148,
                        column: 70
                    }
                },
                type: 'binary-expr',
                locations: [{
                    start: {
                        line: 148,
                        column: 16
                    },
                    end: {
                        line: 148,
                        column: 44
                    }
                }, {
                    start: {
                        line: 148,
                        column: 48
                    },
                    end: {
                        line: 148,
                        column: 70
                    }
                }],
                line: 148
            },
            '8': {
                loc: {
                    start: {
                        line: 150,
                        column: 16
                    },
                    end: {
                        line: 154,
                        column: 17
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 150,
                        column: 16
                    },
                    end: {
                        line: 154,
                        column: 17
                    }
                }, {
                    start: {
                        line: 150,
                        column: 16
                    },
                    end: {
                        line: 154,
                        column: 17
                    }
                }],
                line: 150
            },
            '9': {
                loc: {
                    start: {
                        line: 161,
                        column: 12
                    },
                    end: {
                        line: 164,
                        column: 13
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 161,
                        column: 12
                    },
                    end: {
                        line: 164,
                        column: 13
                    }
                }, {
                    start: {
                        line: 161,
                        column: 12
                    },
                    end: {
                        line: 164,
                        column: 13
                    }
                }],
                line: 161
            },
            '10': {
                loc: {
                    start: {
                        line: 161,
                        column: 16
                    },
                    end: {
                        line: 161,
                        column: 85
                    }
                },
                type: 'binary-expr',
                locations: [{
                    start: {
                        line: 161,
                        column: 16
                    },
                    end: {
                        line: 161,
                        column: 39
                    }
                }, {
                    start: {
                        line: 161,
                        column: 44
                    },
                    end: {
                        line: 161,
                        column: 84
                    }
                }],
                line: 161
            },
            '11': {
                loc: {
                    start: {
                        line: 191,
                        column: 29
                    },
                    end: {
                        line: 191,
                        column: 79
                    }
                },
                type: 'binary-expr',
                locations: [{
                    start: {
                        line: 191,
                        column: 29
                    },
                    end: {
                        line: 191,
                        column: 52
                    }
                }, {
                    start: {
                        line: 191,
                        column: 56
                    },
                    end: {
                        line: 191,
                        column: 79
                    }
                }],
                line: 191
            },
            '12': {
                loc: {
                    start: {
                        line: 209,
                        column: 8
                    },
                    end: {
                        line: 211,
                        column: 9
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 209,
                        column: 8
                    },
                    end: {
                        line: 211,
                        column: 9
                    }
                }, {
                    start: {
                        line: 209,
                        column: 8
                    },
                    end: {
                        line: 211,
                        column: 9
                    }
                }],
                line: 209
            }
        },
        s: {
            '0': 0,
            '1': 0,
            '2': 0,
            '3': 0,
            '4': 0,
            '5': 0,
            '6': 0,
            '7': 0,
            '8': 0,
            '9': 0,
            '10': 0,
            '11': 0,
            '12': 0,
            '13': 0,
            '14': 0,
            '15': 0,
            '16': 0,
            '17': 0,
            '18': 0,
            '19': 0,
            '20': 0,
            '21': 0,
            '22': 0,
            '23': 0,
            '24': 0,
            '25': 0,
            '26': 0,
            '27': 0,
            '28': 0,
            '29': 0,
            '30': 0,
            '31': 0,
            '32': 0,
            '33': 0,
            '34': 0,
            '35': 0,
            '36': 0,
            '37': 0,
            '38': 0,
            '39': 0,
            '40': 0,
            '41': 0,
            '42': 0,
            '43': 0,
            '44': 0,
            '45': 0,
            '46': 0,
            '47': 0,
            '48': 0,
            '49': 0,
            '50': 0,
            '51': 0,
            '52': 0,
            '53': 0,
            '54': 0,
            '55': 0,
            '56': 0,
            '57': 0,
            '58': 0,
            '59': 0,
            '60': 0,
            '61': 0,
            '62': 0,
            '63': 0,
            '64': 0,
            '65': 0,
            '66': 0,
            '67': 0,
            '68': 0,
            '69': 0,
            '70': 0,
            '71': 0,
            '72': 0,
            '73': 0,
            '74': 0,
            '75': 0,
            '76': 0,
            '77': 0,
            '78': 0,
            '79': 0,
            '80': 0,
            '81': 0
        },
        f: {
            '0': 0,
            '1': 0,
            '2': 0,
            '3': 0,
            '4': 0,
            '5': 0,
            '6': 0,
            '7': 0,
            '8': 0,
            '9': 0,
            '10': 0,
            '11': 0,
            '12': 0,
            '13': 0,
            '14': 0,
            '15': 0,
            '16': 0,
            '17': 0,
            '18': 0,
            '19': 0,
            '20': 0,
            '21': 0,
            '22': 0,
            '23': 0,
            '24': 0,
            '25': 0,
            '26': 0,
            '27': 0,
            '28': 0,
            '29': 0,
            '30': 0
        },
        b: {
            '0': [0, 0],
            '1': [0, 0],
            '2': [0, 0],
            '3': [0, 0],
            '4': [0, 0],
            '5': [0, 0],
            '6': [0, 0],
            '7': [0, 0],
            '8': [0, 0],
            '9': [0, 0],
            '10': [0, 0],
            '11': [0, 0],
            '12': [0, 0]
        },
        _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
        return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
}();

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Socket = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

exports.setLogCommunication = setLogCommunication;

var _stream = require('../utils/stream');

var _deferred = require('../utils/deferred');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var logCommunication = (cov_21wg7aantp.s[0]++, false);
function setLogCommunication() {
    cov_21wg7aantp.f[0]++;
    cov_21wg7aantp.s[1]++;

    logCommunication = true;
}

var Socket = exports.Socket = function () {
    function Socket(workerFactory, endpoint) {
        _classCallCheck(this, Socket);

        this.streams = [];
        cov_21wg7aantp.f[1]++;
        cov_21wg7aantp.s[2]++;

        this.endpoint = endpoint;
        cov_21wg7aantp.s[3]++;
        this.socket = new SocketWorkerHandler(workerFactory);
        cov_21wg7aantp.s[4]++;
        this._socketInited = this.socket.init(this.endpoint);
    }

    _createClass(Socket, [{
        key: 'send',
        value: function send(message) {
            var _this = this;

            cov_21wg7aantp.f[2]++;
            cov_21wg7aantp.s[5]++;

            return this._socketInited.then(function () {
                cov_21wg7aantp.f[3]++;
                cov_21wg7aantp.s[6]++;
                return _this.socket.send(message);
            });
        }
    }, {
        key: 'close',
        value: function close() {
            var _this2 = this;

            cov_21wg7aantp.f[4]++;
            cov_21wg7aantp.s[7]++;

            this.streams.forEach(function (stream) {
                cov_21wg7aantp.f[5]++;
                cov_21wg7aantp.s[8]++;
                return stream.dispose();
            });
            cov_21wg7aantp.s[9]++;
            this._socketInited.then(function () {
                cov_21wg7aantp.f[6]++;
                cov_21wg7aantp.s[10]++;
                return _this2.socket.close();
            }, function () {
                cov_21wg7aantp.f[7]++;
            });
        }
    }, {
        key: 'observe',
        value: function observe(event) {
            var _this3 = this;

            cov_21wg7aantp.f[8]++;

            var res = (cov_21wg7aantp.s[11]++, _stream.Stream.fromPromise(this._socketInited.then(function () {
                cov_21wg7aantp.f[9]++;
                cov_21wg7aantp.s[12]++;
                return _this3.socket.observe(event);
            })));
            cov_21wg7aantp.s[13]++;
            this.streams.push(res);
            cov_21wg7aantp.s[14]++;
            return res;
        }
    }, {
        key: 'subscribe',
        value: function subscribe(event) {
            var _this4 = this;

            for (var _len = arguments.length, values = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
                values[_key - 1] = arguments[_key];
            }

            cov_21wg7aantp.f[10]++;
            cov_21wg7aantp.s[15]++;

            return this._socketInited.then(function () {
                var _socket;

                cov_21wg7aantp.f[11]++;
                cov_21wg7aantp.s[16]++;
                return (_socket = _this4.socket).subscribe.apply(_socket, [event].concat(values));
            }).catch(function () {
                cov_21wg7aantp.f[12]++;
            });
        }
    }]);

    return Socket;
}();

var errorTypes = (cov_21wg7aantp.s[17]++, ['connect_error', 'reconnect_error', 'error', 'close', 'disconnect']);
var disconnectErrorTypes = (cov_21wg7aantp.s[18]++, ['connect_error', 'reconnect_error', 'close', 'disconnect']);

var SocketWorkerHandler = function () {
    function SocketWorkerHandler(workerFactory) {
        _classCallCheck(this, SocketWorkerHandler);

        cov_21wg7aantp.f[13]++;
        cov_21wg7aantp.s[19]++;

        this.workerFactory = workerFactory;
        cov_21wg7aantp.s[20]++;
        this.counter = 0;
    }

    _createClass(SocketWorkerHandler, [{
        key: '_tryWorker',
        value: function _tryWorker(endpoint, type) {
            cov_21wg7aantp.f[14]++;

            var worker = (cov_21wg7aantp.s[21]++, this.workerFactory());
            var dfd = (cov_21wg7aantp.s[22]++, (0, _deferred.deferred)());
            cov_21wg7aantp.s[23]++;
            worker.onmessage = function (message) {
                cov_21wg7aantp.f[15]++;

                var data = (cov_21wg7aantp.s[24]++, message.data);
                cov_21wg7aantp.s[25]++;
                if (typeof data === 'string') {
                    cov_21wg7aantp.b[0][0]++;

                    var parsed = (cov_21wg7aantp.s[26]++, JSON.parse(data));
                    cov_21wg7aantp.s[27]++;
                    if (parsed.type === 'initDone') {
                        cov_21wg7aantp.b[1][0]++;
                        cov_21wg7aantp.s[28]++;

                        dfd.resolve(worker);
                    } else {
                        cov_21wg7aantp.b[1][1]++;
                        cov_21wg7aantp.s[29]++;

                        dfd.reject(new Error('Connection failed.'));
                    }
                } else {
                    cov_21wg7aantp.b[0][1]++;
                }
            };

            cov_21wg7aantp.s[30]++;
            worker.postMessage(JSON.stringify({
                type: 'init',
                endpoint: endpoint,
                connectionType: type
            }));
            cov_21wg7aantp.s[31]++;
            return dfd.promise;
        }
    }, {
        key: 'init',
        value: function init(endpoint) {
            var _this5 = this;

            cov_21wg7aantp.f[16]++;
            cov_21wg7aantp.s[32]++;

            return this._tryWorker(endpoint, 'websocket').catch(function () {
                cov_21wg7aantp.f[17]++;
                cov_21wg7aantp.s[33]++;
                return _this5._tryWorker(endpoint, 'polling');
            }).then(function (worker) {
                cov_21wg7aantp.f[18]++;
                cov_21wg7aantp.s[34]++;

                _this5._worker = worker;
                var emitter = (cov_21wg7aantp.s[35]++, new _stream.Emitter());
                cov_21wg7aantp.s[36]++;
                worker.onmessage = function (message) {
                    cov_21wg7aantp.f[19]++;

                    var data = (cov_21wg7aantp.s[37]++, message.data);
                    cov_21wg7aantp.s[38]++;
                    if (typeof data === 'string') {
                        cov_21wg7aantp.b[2][0]++;
                        cov_21wg7aantp.s[39]++;

                        emitter.emit(JSON.parse(data));
                    } else {
                        cov_21wg7aantp.b[2][1]++;
                    }
                };
                cov_21wg7aantp.s[40]++;
                _this5._emitter = emitter;

                cov_21wg7aantp.s[41]++;
                disconnectErrorTypes.forEach(function (type) {
                    cov_21wg7aantp.f[20]++;
                    cov_21wg7aantp.s[42]++;

                    _this5.observe(type).map(function () {
                        cov_21wg7aantp.f[21]++;
                        cov_21wg7aantp.s[43]++;

                        // almost the same as this.close(),
                        // but doesn't call destroy()
                        // since that would also delete all handlers attached on emitters
                        // and we want to observe errors from more places
                        _this5._sendMessage({
                            type: 'close'
                        });
                        cov_21wg7aantp.s[44]++;
                        _this5._emitter = null;
                    });
                });

                cov_21wg7aantp.s[45]++;
                return;
            });
        }
    }, {
        key: 'close',
        value: function close() {
            cov_21wg7aantp.f[22]++;
            cov_21wg7aantp.s[46]++;

            this._sendMessage({
                type: 'close'
            });
            cov_21wg7aantp.s[47]++;
            if (this._emitter != null) {
                cov_21wg7aantp.b[3][0]++;
                cov_21wg7aantp.s[48]++;

                this._emitter.destroy();
                cov_21wg7aantp.s[49]++;
                this._emitter = null;
            } else {
                cov_21wg7aantp.b[3][1]++;
            }
        }
    }, {
        key: 'send',
        value: function send(message) {
            cov_21wg7aantp.f[23]++;
            cov_21wg7aantp.s[50]++;

            this.counter++;
            var counter = (cov_21wg7aantp.s[51]++, this.counter);
            cov_21wg7aantp.s[52]++;
            this._sendMessage({
                type: 'send',
                message: message,
                id: counter
            });
            var dfd = (cov_21wg7aantp.s[53]++, (0, _deferred.deferred)());
            cov_21wg7aantp.s[54]++;
            if (this._emitter == null) {
                cov_21wg7aantp.b[4][0]++;
                cov_21wg7aantp.s[55]++;

                return Promise.reject(new Error('Server disconnected.'));
            } else {
                cov_21wg7aantp.b[4][1]++;
            }
            cov_21wg7aantp.s[56]++;
            this._emitter.attach(function (message, detach) {
                cov_21wg7aantp.f[24]++;
                cov_21wg7aantp.s[57]++;

                if (logCommunication) {
                    cov_21wg7aantp.b[5][0]++;
                    cov_21wg7aantp.s[58]++;

                    console.log('[socket.io] in message', message);
                } else {
                    cov_21wg7aantp.b[5][1]++;
                }

                cov_21wg7aantp.s[59]++;
                if ((cov_21wg7aantp.b[7][0]++, message.type === 'sendReply') && (cov_21wg7aantp.b[7][1]++, message.id === counter)) {
                    cov_21wg7aantp.b[6][0]++;

                    var _ref = (cov_21wg7aantp.s[60]++, message.reply),
                        result = _ref.result,
                        error = _ref.error;

                    cov_21wg7aantp.s[61]++;

                    if (error != null) {
                        cov_21wg7aantp.b[8][0]++;
                        cov_21wg7aantp.s[62]++;

                        dfd.reject(error);
                    } else {
                        cov_21wg7aantp.b[8][1]++;
                        cov_21wg7aantp.s[63]++;

                        dfd.resolve(result);
                    }
                    cov_21wg7aantp.s[64]++;
                    detach();
                } else {
                    cov_21wg7aantp.b[6][1]++;
                }
                // This is not covered by coverage, because it's hard to simulate
                // Happens when the server is disconnected during some long operation
                // It's hard to simulate long operation on regtest (very big transactions)
                // but happens in real life
                cov_21wg7aantp.s[65]++;
                if ((cov_21wg7aantp.b[10][0]++, message.type === 'emit') && (cov_21wg7aantp.b[10][1]++, errorTypes.indexOf(message.event) !== -1)) {
                    cov_21wg7aantp.b[9][0]++;
                    cov_21wg7aantp.s[66]++;

                    dfd.reject(new Error('Server disconnected.'));
                    cov_21wg7aantp.s[67]++;
                    detach();
                } else {
                    cov_21wg7aantp.b[9][1]++;
                }
            });
            cov_21wg7aantp.s[68]++;
            return dfd.promise;
        }
    }, {
        key: 'observe',
        value: function observe(event) {
            var _this6 = this;

            cov_21wg7aantp.f[25]++;
            cov_21wg7aantp.s[69]++;

            this.counter++;
            var counter = (cov_21wg7aantp.s[70]++, this.counter);
            cov_21wg7aantp.s[71]++;
            this._sendMessage({
                type: 'observe',
                event: event,
                id: counter
            });

            // $FlowIssue - this can't be null if used from bitcore.js
            var emitter = (cov_21wg7aantp.s[72]++, this._emitter);

            cov_21wg7aantp.s[73]++;
            return _stream.Stream.fromEmitter(emitter, function () {
                cov_21wg7aantp.f[26]++;
                cov_21wg7aantp.s[74]++;

                _this6._sendMessage({
                    type: 'unobserve',
                    event: event,
                    id: counter
                });
            }).filter(function (message) {
                cov_21wg7aantp.f[27]++;
                cov_21wg7aantp.s[75]++;
                return (cov_21wg7aantp.b[11][0]++, message.type === 'emit') && (cov_21wg7aantp.b[11][1]++, message.event === event);
            }).map(function (message) {
                cov_21wg7aantp.f[28]++;
                cov_21wg7aantp.s[76]++;

                // $FlowIssue it always have data because of the filtering
                return message.data;
            });
        }
    }, {
        key: 'subscribe',
        value: function subscribe(event) {
            for (var _len2 = arguments.length, values = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                values[_key2 - 1] = arguments[_key2];
            }

            cov_21wg7aantp.f[29]++;
            cov_21wg7aantp.s[77]++;

            this._sendMessage({
                type: 'subscribe',
                event: event,
                values: values
            });
        }
    }, {
        key: '_sendMessage',
        value: function _sendMessage(message) {
            cov_21wg7aantp.f[30]++;

            // $FlowIssue - this can't be null if used from bitcore.js
            var worker = (cov_21wg7aantp.s[78]++, this._worker);
            cov_21wg7aantp.s[79]++;
            if (logCommunication) {
                cov_21wg7aantp.b[12][0]++;
                cov_21wg7aantp.s[80]++;

                console.log('[socket.io] out message', message);
            } else {
                cov_21wg7aantp.b[12][1]++;
            }

            cov_21wg7aantp.s[81]++;
            worker.postMessage(JSON.stringify(message));
        }
    }]);

    return SocketWorkerHandler;
}();