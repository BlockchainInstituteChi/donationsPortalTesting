<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- <link rel="icon" href="../../../../favicon.ico"> -->
    <!-- Angular Components  -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.js"></script>
    <script src="https://cdn.firebase.com/libs/angularfire/0.8.0/angularfire.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.0.3/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.0.1/firebase-app.js"></script>
    <link rel='stylesheet' id='cryptocoins-css'  href='./css/cryptocoins.css'> 
    <link rel='stylesheet' id='custom-css'  href='./css/style.css'> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script type="text/javascript" src="https://checkout.stripe.com/checkout.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.0.3/firebase-functions.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.0.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.0.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.0.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.0.1/firebase-messaging.js"></script>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <script src="https://rawgit.com/VividCortex/angular-recaptcha/master/release/angular-recaptcha.js"></script>
    <script type="text/javascript" src="scripts/qrcode.js"></script>
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,700|PT+Serif', rel='stylesheet'>
    <link href='//fonts.googleapis.com/css?family=Roboto+Condensed:400,700', rel='stylesheet'>
    <link href="https://fonts.googleapis.com/css?family=Kanit" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.2/css/all.css" integrity="sha384-/rXc/GQVaYpyDdyxK+ecHPVYJSN9bmVFBvjA/9eOB+pb3F2w2N6fc5qB9Ew5yIns" crossorigin="anonymous">     

  </head>

  <body ng-app="donationsManager">

    <div class="container" ng-controller="donationsCtrl">

        <div class="currencySelect {{display[0]}}">
            <h1>Select a donation amount</h1>
            <span class="yourDonationMatters">Every dollar we collect goes towards educating young software developers and entrepreneurs. Your donation could provide the resources needed to build the internet of the future.</span>
            <div  ng-repeat="x in donationOptions" class="currencySelectButton donationAmount">
                <button id="{{x.id}}_amount_button" class="radioSet currencySelect {{x.selected}}" ng-click="setDonationAmount(x.amount)">
                    <span class="amountChoice">${{x.amount}}</span>
                </button>
            </div><br>
            <span>Custom Amount: </span>            
            <div class="donationAmountInput">
                <span class="currencyTypeLabel">$</span><input class="donationAmount" ng-model="donationAmount" type="number" value="100.00" placeholder="100.00" min="0.01" step="0.01" max="5000">    
            </div>
            <span>Next: </span><br>
            <button class="nextBtn" type="next" ng-click="next(1, checkAmountChoice)">Choose Currency</button>
        </div>

        <div class="currencySelect {{display[1]}}">
            <div class="backButton" ng-click="back(1)">
                <i class="fas fa-chevron-left"></i>
            </div>
            <!-- <h1>Select a currency:</h1> -->
            <!-- <p class="errorMessage">{{errorMessage}}</p> -->
            <!-- <input class="form-control" class="container-fluid" type="text" placeholder="Start typing to filter currency choices" id="search" ng-model="searchBarText" ng-keyup="search();"><hr> -->
                <div  ng-repeat="x in set" class="currencySelectButton">
                    <button id="{{x.code}}_button" class="radioSet currencySelect {{x.selected}}" ng-click="setCurrency(x.code)">
                        <br>
                        <i class="{{x.icon}}"></i>
                        <h3>{{x.name}}<br>({{x.code}})</h3>
                    </button>
                </div>
            <br>         
             <div class="securePaymentsMessage"><h3>Secure payments powered by</h3><img src="/images/secure-stripe-payment-logo.png"></div>
             <div class="securePaymentsMessage"><img src="/images/coinpayments-logo.png"></div>

            
        </div>

        <div class="taxReceipt {{display[2]}}">
            <div class="backButton" ng-click="back(2)">
                <i class="fas fa-chevron-left"></i>
            </div>

            <h1>Declarations</h1>
            <span>Some message about how we're sorry about all the boxes but it's important because terrorists are bad.</span>
            <br>

            <p class="errorMessage">{{errorMessage}}</p>

            <fieldset class="taxReceiptSelector">
                <div class="checkbox-container">
                    <button class="yesToAll" ng-click="checkAll()">Check All</button>
                </div>
                <div class="checkbox-container">
                    <input class="checkbox-box" ng-click="showEmailFn()" type="checkbox" id="taxReceiptCheckBox" ng-model="taxReceipt" checked>
                    <label  class="checkbox-label" for="taxReceiptCheckBox"> I would like a tax receipt</label><br>
                </div>
                <div class="checkbox-container">
                    <input class="checkbox-box" type="checkbox" id="countryOfOrigin" ng-model="countryOfOrigin" checked>
                    <label class="checkbox-label" for="countryOfOrigin"> I am not a current resident of any countries subject to sanctions by the United States Government, and my name does not appear in any of the lists maintained by the Office of Foreign Asset Controls. If you are unsure whether you appear on these lists, please use the search <a target="_blank" href="https://sanctionssearch.ofac.treas.gov/">here.</a></label>
                </div>
                <div class="checkbox-container">
                    <input class="checkbox-box" type="checkbox" id="maximumDonation" ng-model="maximumDonation" checked>
                    <label class="checkbox-label" for="maximumDonation"> I have not donated more than $5000 USD or cryptocurrency of equivalent value in the past year.</label>
                </div>
            </fieldset>

            <div class="{{showEmail}}">
                <span>Please enter an email address so we can send you your receipt.</span>
                <input class="emailInput" id="taxReceiptEmail" ng-model="email" placeholder="username@example.com">
                <span class="cancelTaxReceiptButton" ng-click="showEmailFn()">âœ•</span>
            </div>
            <hr>
            <p>A tax receipt can be issued for any donation of more than $50. Tax receipts are valid in the US only. Please <a href="{{contactUrl}}">contact us</a> for more information.</p><br>
            <span>Next:</span><br>
            <button class="nextBtn" type="next" ng-click="next(3, checkDeclarations)">Payment Info</button> 
        </div>  

        <div class="stripe {{display[3]}}">
            <div class="backButton" ng-click="back(3)">
                <i class="fas fa-chevron-left"></i>
            </div>
            <h1>Verify Amount</h1>
            <span class="currencyTypeLabel">$</span><input class="donationAmount" ng-model="donationAmount" type="number" value="100.00" placeholder="100.00" min="0.01" step="0.01" max="5000">
            <a href="" ng-click="onStripe('pk_live_j9F9S8Av7YGE4VH0CH4y891l')"><button class="submitDonation">Pay with Stripe</button></a>
            
            <div class="securePaymentsMessage"><img src="/images/secure-stripe-payment-logo.png"></div>

        </div>

        <div class="reCaptcha {{display[4]}}">
            <div class="backButton" ng-click="back(4)">
                <i class="fas fa-chevron-left"></i>
            </div>
            <h1>Please verify that you're human:</h1>
            <div
                vc-recaptcha
                theme="'light'"
                key="key"
                on-create="setWidgetId(widgetId)"
                on-success="setResponse(response)"
                on-expire="cbExpiration()"
            ></div>

            <br>            
            <!-- <button class="nextBtn" type="next" ng-click="next(5, checkCaptcha)">Next</button>   -->         
        </div>

        <div class="qrcode {{display[5]}}">
            <div class="backButton" ng-click="back(5)">
                <i class="fas fa-chevron-left"></i>
            </div>
            <h1> Scan the QR Code below to donate your funds:</h1>
            <canvas id="qrCode">
            </canvas>
            <hr>
            <div class="donationAmount">
                ${{donationAmount}} in {{currency}}
            </div> 
            <br>
            <p>Address: {{address}}</p>
            <button class="nextBtn" type="next" ng-click="next(6)">Next</button> 
            <div class="securePaymentsMessage"><h3>Secure payments powered by</h3><img src="/images/coinpayments-logo.png"></div>            

        </div>


        <div class="thanks {{display[6]}}">
            <div class="backButton" ng-click="back(6)">
                <i class="fas fa-chevron-left"></i>
            </div>
            <h1>Thanks for your contribution.</h1>
            <p>Your donation helps keep the institute strong. Our team couldn't do it without you! <br> If you selected the option to receive a tax receipt, please stay posted and you should receive an email from a member of our staff shortly.</p>
            
            <br>

            <!-- <button class="nextBtn" type="next" ng-click="done()" >Done</button>  -->
        </div>        

    </div>
  </body>


  <footer>
          <script type="text/javascript" src="donationCtrl.js" defer></script>
  </footer>